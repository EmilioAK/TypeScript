<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>LCOV - lcov.info - compiler/scanner.ts</title>
  <link rel="stylesheet" type="text/css" href="../gcov.css">
</head>

<body>

          <table width="100%" border=0 cellspacing=0 cellpadding=0>
            <tr><td class="title">LCOV - code coverage report</td></tr>
            <tr><td class="ruler"><img src="../glass.png" width=3 height=3 alt=""></td></tr>

            <tr>
              <td width="100%">
                <table cellpadding=1 border=0 width="100%">
          <tr>
            <td width="10%" class="headerItem">Current view:</td>
            <td width="10%" class="headerValue"><a href="../index.html" title="Click to go to top-level">top level</a> - <a href="index.html" title="Click to go to directory compiler">compiler</a> - scanner.ts<span style="font-size: 80%;"> (source / <a href="scanner.ts.func-c.html" title="Click to go to function table">functions</a>)</span></td>
            <td width="5%"></td>
            <td width="5%"></td>
            <td width="5%" class="headerCovTableHead">Coverage</td>
            <td width="5%" class="headerCovTableHead" title="Covered + Uncovered code">Total</td>
            <td width="5%" class="headerCovTableHead" title="Exercised code only">Hit</td>
          </tr>
          <tr>
            <td class="headerItem">Test:</td>
            <td class="headerValue">lcov.info</td>
            <td></td>
            <td class="headerItem">Lines:</td>
            <td class="headerCovTableEntryHi">100.0&nbsp;%</td>
            <td class="headerCovTableEntry">4084</td>
            <td class="headerCovTableEntry">4084</td>
          </tr>
          <tr>
            <td class="headerItem">Test Date:</td>
            <td class="headerValue">2024-06-25 13:41:23</td>
            <td></td>
            <td class="headerItem">Functions:</td>
            <td class="headerCovTableEntryHi">94.0&nbsp;%</td>
            <td class="headerCovTableEntry">149</td>
            <td class="headerCovTableEntry">140</td>
          </tr>
                  <tr><td><img src="../glass.png" width=3 height=3 alt=""></td></tr>
                </table>
              </td>
            </tr>

            <tr><td class="ruler"><img src="../glass.png" width=3 height=3 alt=""></td></tr>
          </table>

          <table cellpadding=0 cellspacing=0 border=0>
            <tr>
              <td><br></td>
            </tr>
            <tr>
              <td>
<pre class="sourceHeading">            Line data    Source code</pre>
<pre class="source">
<span id="L1"><span class="lineNum">       1</span> <span class="tlaGNC tlaBgGNC">           8 : import {</span></span>
<span id="L2"><span class="lineNum">       2</span> <span class="tlaGNC">           8 :     append,</span></span>
<span id="L3"><span class="lineNum">       3</span> <span class="tlaGNC">           8 :     arraysEqual,</span></span>
<span id="L4"><span class="lineNum">       4</span> <span class="tlaGNC">           8 :     binarySearch,</span></span>
<span id="L5"><span class="lineNum">       5</span> <span class="tlaGNC">           8 :     CharacterCodes,</span></span>
<span id="L6"><span class="lineNum">       6</span> <span class="tlaGNC">           8 :     CommentDirective,</span></span>
<span id="L7"><span class="lineNum">       7</span> <span class="tlaGNC">           8 :     CommentDirectiveType,</span></span>
<span id="L8"><span class="lineNum">       8</span> <span class="tlaGNC">           8 :     CommentKind,</span></span>
<span id="L9"><span class="lineNum">       9</span> <span class="tlaGNC">           8 :     CommentRange,</span></span>
<span id="L10"><span class="lineNum">      10</span> <span class="tlaGNC">           8 :     compareValues,</span></span>
<span id="L11"><span class="lineNum">      11</span> <span class="tlaGNC">           8 :     Debug,</span></span>
<span id="L12"><span class="lineNum">      12</span> <span class="tlaGNC">           8 :     DiagnosticMessage,</span></span>
<span id="L13"><span class="lineNum">      13</span> <span class="tlaGNC">           8 :     Diagnostics,</span></span>
<span id="L14"><span class="lineNum">      14</span> <span class="tlaGNC">           8 :     forEach,</span></span>
<span id="L15"><span class="lineNum">      15</span> <span class="tlaGNC">           8 :     getNameOfScriptTarget,</span></span>
<span id="L16"><span class="lineNum">      16</span> <span class="tlaGNC">           8 :     getSpellingSuggestion,</span></span>
<span id="L17"><span class="lineNum">      17</span> <span class="tlaGNC">           8 :     identity,</span></span>
<span id="L18"><span class="lineNum">      18</span> <span class="tlaGNC">           8 :     JSDocParsingMode,</span></span>
<span id="L19"><span class="lineNum">      19</span> <span class="tlaGNC">           8 :     JSDocSyntaxKind,</span></span>
<span id="L20"><span class="lineNum">      20</span> <span class="tlaGNC">           8 :     JsxTokenSyntaxKind,</span></span>
<span id="L21"><span class="lineNum">      21</span> <span class="tlaGNC">           8 :     KeywordSyntaxKind,</span></span>
<span id="L22"><span class="lineNum">      22</span> <span class="tlaGNC">           8 :     LanguageFeatureMinimumTarget,</span></span>
<span id="L23"><span class="lineNum">      23</span> <span class="tlaGNC">           8 :     LanguageVariant,</span></span>
<span id="L24"><span class="lineNum">      24</span> <span class="tlaGNC">           8 :     LineAndCharacter,</span></span>
<span id="L25"><span class="lineNum">      25</span> <span class="tlaGNC">           8 :     MapLike,</span></span>
<span id="L26"><span class="lineNum">      26</span> <span class="tlaGNC">           8 :     parsePseudoBigInt,</span></span>
<span id="L27"><span class="lineNum">      27</span> <span class="tlaGNC">           8 :     positionIsSynthesized,</span></span>
<span id="L28"><span class="lineNum">      28</span> <span class="tlaGNC">           8 :     PunctuationOrKeywordSyntaxKind,</span></span>
<span id="L29"><span class="lineNum">      29</span> <span class="tlaGNC">           8 :     RegularExpressionFlags,</span></span>
<span id="L30"><span class="lineNum">      30</span> <span class="tlaGNC">           8 :     ScriptKind,</span></span>
<span id="L31"><span class="lineNum">      31</span> <span class="tlaGNC">           8 :     ScriptTarget,</span></span>
<span id="L32"><span class="lineNum">      32</span> <span class="tlaGNC">           8 :     SourceFileLike,</span></span>
<span id="L33"><span class="lineNum">      33</span> <span class="tlaGNC">           8 :     SyntaxKind,</span></span>
<span id="L34"><span class="lineNum">      34</span> <span class="tlaGNC">           8 :     TextRange,</span></span>
<span id="L35"><span class="lineNum">      35</span> <span class="tlaGNC">           8 :     TokenFlags,</span></span>
<span id="L36"><span class="lineNum">      36</span> <span class="tlaGNC">           8 : } from &quot;./_namespaces/ts.js&quot;;</span></span>
<span id="L37"><span class="lineNum">      37</span> <span class="tlaGNC">           8 : </span></span>
<span id="L38"><span class="lineNum">      38</span> <span class="tlaGNC">           8 : export type ErrorCallback = (message: DiagnosticMessage, length: number, arg0?: any) =&gt; void;</span></span>
<span id="L39"><span class="lineNum">      39</span> <span class="tlaGNC">           8 : </span></span>
<span id="L40"><span class="lineNum">      40</span> <span class="tlaGNC">           8 : /** @internal */</span></span>
<span id="L41"><span class="lineNum">      41</span> <span class="tlaGNC">           8 : export function tokenIsIdentifierOrKeyword(token: SyntaxKind): boolean {</span></span>
<span id="L42"><span class="lineNum">      42</span> <span class="tlaGNC">           8 :     return token &gt;= SyntaxKind.Identifier;</span></span>
<span id="L43"><span class="lineNum">      43</span> <span class="tlaGNC">           8 : }</span></span>
<span id="L44"><span class="lineNum">      44</span> <span class="tlaGNC">           8 : </span></span>
<span id="L45"><span class="lineNum">      45</span> <span class="tlaGNC">           8 : /** @internal */</span></span>
<span id="L46"><span class="lineNum">      46</span> <span class="tlaGNC">           8 : export function tokenIsIdentifierOrKeywordOrGreaterThan(token: SyntaxKind): boolean {</span></span>
<span id="L47"><span class="lineNum">      47</span> <span class="tlaGNC">           8 :     return token === SyntaxKind.GreaterThanToken || tokenIsIdentifierOrKeyword(token);</span></span>
<span id="L48"><span class="lineNum">      48</span> <span class="tlaGNC">           8 : }</span></span>
<span id="L49"><span class="lineNum">      49</span> <span class="tlaGNC">           8 : </span></span>
<span id="L50"><span class="lineNum">      50</span> <span class="tlaGNC">           8 : export interface Scanner {</span></span>
<span id="L51"><span class="lineNum">      51</span> <span class="tlaGNC">           8 :     /** @deprecated use {@link getTokenFullStart} */</span></span>
<span id="L52"><span class="lineNum">      52</span> <span class="tlaGNC">           8 :     getStartPos(): number;</span></span>
<span id="L53"><span class="lineNum">      53</span> <span class="tlaGNC">           8 :     getToken(): SyntaxKind;</span></span>
<span id="L54"><span class="lineNum">      54</span> <span class="tlaGNC">           8 :     getTokenFullStart(): number;</span></span>
<span id="L55"><span class="lineNum">      55</span> <span class="tlaGNC">           8 :     getTokenStart(): number;</span></span>
<span id="L56"><span class="lineNum">      56</span> <span class="tlaGNC">           8 :     getTokenEnd(): number;</span></span>
<span id="L57"><span class="lineNum">      57</span> <span class="tlaGNC">           8 :     /** @deprecated use {@link getTokenEnd} */</span></span>
<span id="L58"><span class="lineNum">      58</span> <span class="tlaGNC">           8 :     getTextPos(): number;</span></span>
<span id="L59"><span class="lineNum">      59</span> <span class="tlaGNC">           8 :     /** @deprecated use {@link getTokenStart} */</span></span>
<span id="L60"><span class="lineNum">      60</span> <span class="tlaGNC">           8 :     getTokenPos(): number;</span></span>
<span id="L61"><span class="lineNum">      61</span> <span class="tlaGNC">           8 :     getTokenText(): string;</span></span>
<span id="L62"><span class="lineNum">      62</span> <span class="tlaGNC">           8 :     getTokenValue(): string;</span></span>
<span id="L63"><span class="lineNum">      63</span> <span class="tlaGNC">           8 :     hasUnicodeEscape(): boolean;</span></span>
<span id="L64"><span class="lineNum">      64</span> <span class="tlaGNC">           8 :     hasExtendedUnicodeEscape(): boolean;</span></span>
<span id="L65"><span class="lineNum">      65</span> <span class="tlaGNC">           8 :     hasPrecedingLineBreak(): boolean;</span></span>
<span id="L66"><span class="lineNum">      66</span> <span class="tlaGNC">           8 :     /** @internal */</span></span>
<span id="L67"><span class="lineNum">      67</span> <span class="tlaGNC">           8 :     hasPrecedingJSDocComment(): boolean;</span></span>
<span id="L68"><span class="lineNum">      68</span> <span class="tlaGNC">           8 :     isIdentifier(): boolean;</span></span>
<span id="L69"><span class="lineNum">      69</span> <span class="tlaGNC">           8 :     isReservedWord(): boolean;</span></span>
<span id="L70"><span class="lineNum">      70</span> <span class="tlaGNC">           8 :     isUnterminated(): boolean;</span></span>
<span id="L71"><span class="lineNum">      71</span> <span class="tlaGNC">           8 :     /** @internal */</span></span>
<span id="L72"><span class="lineNum">      72</span> <span class="tlaGNC">           8 :     getNumericLiteralFlags(): TokenFlags;</span></span>
<span id="L73"><span class="lineNum">      73</span> <span class="tlaGNC">           8 :     /** @internal */</span></span>
<span id="L74"><span class="lineNum">      74</span> <span class="tlaGNC">           8 :     getCommentDirectives(): CommentDirective[] | undefined;</span></span>
<span id="L75"><span class="lineNum">      75</span> <span class="tlaGNC">           8 :     /** @internal */</span></span>
<span id="L76"><span class="lineNum">      76</span> <span class="tlaGNC">           8 :     getTokenFlags(): TokenFlags;</span></span>
<span id="L77"><span class="lineNum">      77</span> <span class="tlaGNC">           8 :     reScanGreaterToken(): SyntaxKind;</span></span>
<span id="L78"><span class="lineNum">      78</span> <span class="tlaGNC">           8 :     reScanSlashToken(): SyntaxKind;</span></span>
<span id="L79"><span class="lineNum">      79</span> <span class="tlaGNC">           8 :     /** @internal */</span></span>
<span id="L80"><span class="lineNum">      80</span> <span class="tlaGNC">           8 :     reScanSlashToken(reportErrors?: boolean): SyntaxKind; // eslint-disable-line @typescript-eslint/unified-signatures</span></span>
<span id="L81"><span class="lineNum">      81</span> <span class="tlaGNC">           8 :     reScanAsteriskEqualsToken(): SyntaxKind;</span></span>
<span id="L82"><span class="lineNum">      82</span> <span class="tlaGNC">           8 :     reScanTemplateToken(isTaggedTemplate: boolean): SyntaxKind;</span></span>
<span id="L83"><span class="lineNum">      83</span> <span class="tlaGNC">           8 :     /** @deprecated use {@link reScanTemplateToken}(false) */</span></span>
<span id="L84"><span class="lineNum">      84</span> <span class="tlaGNC">           8 :     reScanTemplateHeadOrNoSubstitutionTemplate(): SyntaxKind;</span></span>
<span id="L85"><span class="lineNum">      85</span> <span class="tlaGNC">           8 :     scanJsxIdentifier(): SyntaxKind;</span></span>
<span id="L86"><span class="lineNum">      86</span> <span class="tlaGNC">           8 :     scanJsxAttributeValue(): SyntaxKind;</span></span>
<span id="L87"><span class="lineNum">      87</span> <span class="tlaGNC">           8 :     reScanJsxAttributeValue(): SyntaxKind;</span></span>
<span id="L88"><span class="lineNum">      88</span> <span class="tlaGNC">           8 :     reScanJsxToken(allowMultilineJsxText?: boolean): JsxTokenSyntaxKind;</span></span>
<span id="L89"><span class="lineNum">      89</span> <span class="tlaGNC">           8 :     reScanLessThanToken(): SyntaxKind;</span></span>
<span id="L90"><span class="lineNum">      90</span> <span class="tlaGNC">           8 :     reScanHashToken(): SyntaxKind;</span></span>
<span id="L91"><span class="lineNum">      91</span> <span class="tlaGNC">           8 :     reScanQuestionToken(): SyntaxKind;</span></span>
<span id="L92"><span class="lineNum">      92</span> <span class="tlaGNC">           8 :     reScanInvalidIdentifier(): SyntaxKind;</span></span>
<span id="L93"><span class="lineNum">      93</span> <span class="tlaGNC">           8 :     scanJsxToken(): JsxTokenSyntaxKind;</span></span>
<span id="L94"><span class="lineNum">      94</span> <span class="tlaGNC">           8 :     scanJsDocToken(): JSDocSyntaxKind;</span></span>
<span id="L95"><span class="lineNum">      95</span> <span class="tlaGNC">           8 :     /** @internal */</span></span>
<span id="L96"><span class="lineNum">      96</span> <span class="tlaGNC">           8 :     scanJSDocCommentTextToken(inBackticks: boolean): JSDocSyntaxKind | SyntaxKind.JSDocCommentTextToken;</span></span>
<span id="L97"><span class="lineNum">      97</span> <span class="tlaGNC">           8 :     scan(): SyntaxKind;</span></span>
<span id="L98"><span class="lineNum">      98</span> <span class="tlaGNC">           8 : </span></span>
<span id="L99"><span class="lineNum">      99</span> <span class="tlaGNC">           8 :     getText(): string;</span></span>
<span id="L100"><span class="lineNum">     100</span> <span class="tlaGNC">           8 :     /** @internal */</span></span>
<span id="L101"><span class="lineNum">     101</span> <span class="tlaGNC">           8 :     clearCommentDirectives(): void;</span></span>
<span id="L102"><span class="lineNum">     102</span> <span class="tlaGNC">           8 :     // Sets the text for the scanner to scan.  An optional subrange starting point and length</span></span>
<span id="L103"><span class="lineNum">     103</span> <span class="tlaGNC">           8 :     // can be provided to have the scanner only scan a portion of the text.</span></span>
<span id="L104"><span class="lineNum">     104</span> <span class="tlaGNC">           8 :     setText(text: string | undefined, start?: number, length?: number): void;</span></span>
<span id="L105"><span class="lineNum">     105</span> <span class="tlaGNC">           8 :     setOnError(onError: ErrorCallback | undefined): void;</span></span>
<span id="L106"><span class="lineNum">     106</span> <span class="tlaGNC">           8 :     setScriptTarget(scriptTarget: ScriptTarget): void;</span></span>
<span id="L107"><span class="lineNum">     107</span> <span class="tlaGNC">           8 :     setLanguageVariant(variant: LanguageVariant): void;</span></span>
<span id="L108"><span class="lineNum">     108</span> <span class="tlaGNC">           8 :     setScriptKind(scriptKind: ScriptKind): void;</span></span>
<span id="L109"><span class="lineNum">     109</span> <span class="tlaGNC">           8 :     setJSDocParsingMode(kind: JSDocParsingMode): void;</span></span>
<span id="L110"><span class="lineNum">     110</span> <span class="tlaGNC">           8 :     /** @deprecated use {@link resetTokenState} */</span></span>
<span id="L111"><span class="lineNum">     111</span> <span class="tlaGNC">           8 :     setTextPos(textPos: number): void;</span></span>
<span id="L112"><span class="lineNum">     112</span> <span class="tlaGNC">           8 :     resetTokenState(pos: number): void;</span></span>
<span id="L113"><span class="lineNum">     113</span> <span class="tlaGNC">           8 :     /** @internal */</span></span>
<span id="L114"><span class="lineNum">     114</span> <span class="tlaGNC">           8 :     setSkipJsDocLeadingAsterisks(skip: boolean): void;</span></span>
<span id="L115"><span class="lineNum">     115</span> <span class="tlaGNC">           8 :     // Invokes the provided callback then unconditionally restores the scanner to the state it</span></span>
<span id="L116"><span class="lineNum">     116</span> <span class="tlaGNC">           8 :     // was in immediately prior to invoking the callback.  The result of invoking the callback</span></span>
<span id="L117"><span class="lineNum">     117</span> <span class="tlaGNC">           8 :     // is returned from this function.</span></span>
<span id="L118"><span class="lineNum">     118</span> <span class="tlaGNC">           8 :     lookAhead&lt;T&gt;(callback: () =&gt; T): T;</span></span>
<span id="L119"><span class="lineNum">     119</span> <span class="tlaGNC">           8 : </span></span>
<span id="L120"><span class="lineNum">     120</span> <span class="tlaGNC">           8 :     // Invokes the callback with the scanner set to scan the specified range. When the callback</span></span>
<span id="L121"><span class="lineNum">     121</span> <span class="tlaGNC">           8 :     // returns, the scanner is restored to the state it was in before scanRange was called.</span></span>
<span id="L122"><span class="lineNum">     122</span> <span class="tlaGNC">           8 :     scanRange&lt;T&gt;(start: number, length: number, callback: () =&gt; T): T;</span></span>
<span id="L123"><span class="lineNum">     123</span> <span class="tlaGNC">           8 : </span></span>
<span id="L124"><span class="lineNum">     124</span> <span class="tlaGNC">           8 :     // Invokes the provided callback.  If the callback returns something falsy, then it restores</span></span>
<span id="L125"><span class="lineNum">     125</span> <span class="tlaGNC">           8 :     // the scanner to the state it was in immediately prior to invoking the callback.  If the</span></span>
<span id="L126"><span class="lineNum">     126</span> <span class="tlaGNC">           8 :     // callback returns something truthy, then the scanner state is not rolled back.  The result</span></span>
<span id="L127"><span class="lineNum">     127</span> <span class="tlaGNC">           8 :     // of invoking the callback is returned from this function.</span></span>
<span id="L128"><span class="lineNum">     128</span> <span class="tlaGNC">           8 :     tryScan&lt;T&gt;(callback: () =&gt; T): T;</span></span>
<span id="L129"><span class="lineNum">     129</span> <span class="tlaGNC">           8 : }</span></span>
<span id="L130"><span class="lineNum">     130</span> <span class="tlaGNC">           8 : </span></span>
<span id="L131"><span class="lineNum">     131</span> <span class="tlaGNC">           8 : /** @internal */</span></span>
<span id="L132"><span class="lineNum">     132</span> <span class="tlaGNC">           8 : export const textToKeywordObj: MapLike&lt;KeywordSyntaxKind&gt; = {</span></span>
<span id="L133"><span class="lineNum">     133</span> <span class="tlaGNC">           8 :     abstract: SyntaxKind.AbstractKeyword,</span></span>
<span id="L134"><span class="lineNum">     134</span> <span class="tlaGNC">           8 :     accessor: SyntaxKind.AccessorKeyword,</span></span>
<span id="L135"><span class="lineNum">     135</span> <span class="tlaGNC">           8 :     any: SyntaxKind.AnyKeyword,</span></span>
<span id="L136"><span class="lineNum">     136</span> <span class="tlaGNC">           8 :     as: SyntaxKind.AsKeyword,</span></span>
<span id="L137"><span class="lineNum">     137</span> <span class="tlaGNC">           8 :     asserts: SyntaxKind.AssertsKeyword,</span></span>
<span id="L138"><span class="lineNum">     138</span> <span class="tlaGNC">           8 :     assert: SyntaxKind.AssertKeyword,</span></span>
<span id="L139"><span class="lineNum">     139</span> <span class="tlaGNC">           8 :     bigint: SyntaxKind.BigIntKeyword,</span></span>
<span id="L140"><span class="lineNum">     140</span> <span class="tlaGNC">           8 :     boolean: SyntaxKind.BooleanKeyword,</span></span>
<span id="L141"><span class="lineNum">     141</span> <span class="tlaGNC">           8 :     break: SyntaxKind.BreakKeyword,</span></span>
<span id="L142"><span class="lineNum">     142</span> <span class="tlaGNC">           8 :     case: SyntaxKind.CaseKeyword,</span></span>
<span id="L143"><span class="lineNum">     143</span> <span class="tlaGNC">           8 :     catch: SyntaxKind.CatchKeyword,</span></span>
<span id="L144"><span class="lineNum">     144</span> <span class="tlaGNC">           8 :     class: SyntaxKind.ClassKeyword,</span></span>
<span id="L145"><span class="lineNum">     145</span> <span class="tlaGNC">           8 :     continue: SyntaxKind.ContinueKeyword,</span></span>
<span id="L146"><span class="lineNum">     146</span> <span class="tlaGNC">           8 :     const: SyntaxKind.ConstKeyword,</span></span>
<span id="L147"><span class="lineNum">     147</span> <span class="tlaGNC">           8 :     [&quot;&quot; + &quot;constructor&quot;]: SyntaxKind.ConstructorKeyword,</span></span>
<span id="L148"><span class="lineNum">     148</span> <span class="tlaGNC">           8 :     debugger: SyntaxKind.DebuggerKeyword,</span></span>
<span id="L149"><span class="lineNum">     149</span> <span class="tlaGNC">           8 :     declare: SyntaxKind.DeclareKeyword,</span></span>
<span id="L150"><span class="lineNum">     150</span> <span class="tlaGNC">           8 :     default: SyntaxKind.DefaultKeyword,</span></span>
<span id="L151"><span class="lineNum">     151</span> <span class="tlaGNC">           8 :     delete: SyntaxKind.DeleteKeyword,</span></span>
<span id="L152"><span class="lineNum">     152</span> <span class="tlaGNC">           8 :     do: SyntaxKind.DoKeyword,</span></span>
<span id="L153"><span class="lineNum">     153</span> <span class="tlaGNC">           8 :     else: SyntaxKind.ElseKeyword,</span></span>
<span id="L154"><span class="lineNum">     154</span> <span class="tlaGNC">           8 :     enum: SyntaxKind.EnumKeyword,</span></span>
<span id="L155"><span class="lineNum">     155</span> <span class="tlaGNC">           8 :     export: SyntaxKind.ExportKeyword,</span></span>
<span id="L156"><span class="lineNum">     156</span> <span class="tlaGNC">           8 :     extends: SyntaxKind.ExtendsKeyword,</span></span>
<span id="L157"><span class="lineNum">     157</span> <span class="tlaGNC">           8 :     false: SyntaxKind.FalseKeyword,</span></span>
<span id="L158"><span class="lineNum">     158</span> <span class="tlaGNC">           8 :     finally: SyntaxKind.FinallyKeyword,</span></span>
<span id="L159"><span class="lineNum">     159</span> <span class="tlaGNC">           8 :     for: SyntaxKind.ForKeyword,</span></span>
<span id="L160"><span class="lineNum">     160</span> <span class="tlaGNC">           8 :     from: SyntaxKind.FromKeyword,</span></span>
<span id="L161"><span class="lineNum">     161</span> <span class="tlaGNC">           8 :     function: SyntaxKind.FunctionKeyword,</span></span>
<span id="L162"><span class="lineNum">     162</span> <span class="tlaGNC">           8 :     get: SyntaxKind.GetKeyword,</span></span>
<span id="L163"><span class="lineNum">     163</span> <span class="tlaGNC">           8 :     if: SyntaxKind.IfKeyword,</span></span>
<span id="L164"><span class="lineNum">     164</span> <span class="tlaGNC">           8 :     implements: SyntaxKind.ImplementsKeyword,</span></span>
<span id="L165"><span class="lineNum">     165</span> <span class="tlaGNC">           8 :     import: SyntaxKind.ImportKeyword,</span></span>
<span id="L166"><span class="lineNum">     166</span> <span class="tlaGNC">           8 :     in: SyntaxKind.InKeyword,</span></span>
<span id="L167"><span class="lineNum">     167</span> <span class="tlaGNC">           8 :     infer: SyntaxKind.InferKeyword,</span></span>
<span id="L168"><span class="lineNum">     168</span> <span class="tlaGNC">           8 :     instanceof: SyntaxKind.InstanceOfKeyword,</span></span>
<span id="L169"><span class="lineNum">     169</span> <span class="tlaGNC">           8 :     interface: SyntaxKind.InterfaceKeyword,</span></span>
<span id="L170"><span class="lineNum">     170</span> <span class="tlaGNC">           8 :     intrinsic: SyntaxKind.IntrinsicKeyword,</span></span>
<span id="L171"><span class="lineNum">     171</span> <span class="tlaGNC">           8 :     is: SyntaxKind.IsKeyword,</span></span>
<span id="L172"><span class="lineNum">     172</span> <span class="tlaGNC">           8 :     keyof: SyntaxKind.KeyOfKeyword,</span></span>
<span id="L173"><span class="lineNum">     173</span> <span class="tlaGNC">           8 :     let: SyntaxKind.LetKeyword,</span></span>
<span id="L174"><span class="lineNum">     174</span> <span class="tlaGNC">           8 :     module: SyntaxKind.ModuleKeyword,</span></span>
<span id="L175"><span class="lineNum">     175</span> <span class="tlaGNC">           8 :     namespace: SyntaxKind.NamespaceKeyword,</span></span>
<span id="L176"><span class="lineNum">     176</span> <span class="tlaGNC">           8 :     never: SyntaxKind.NeverKeyword,</span></span>
<span id="L177"><span class="lineNum">     177</span> <span class="tlaGNC">           8 :     new: SyntaxKind.NewKeyword,</span></span>
<span id="L178"><span class="lineNum">     178</span> <span class="tlaGNC">           8 :     null: SyntaxKind.NullKeyword,</span></span>
<span id="L179"><span class="lineNum">     179</span> <span class="tlaGNC">           8 :     number: SyntaxKind.NumberKeyword,</span></span>
<span id="L180"><span class="lineNum">     180</span> <span class="tlaGNC">           8 :     object: SyntaxKind.ObjectKeyword,</span></span>
<span id="L181"><span class="lineNum">     181</span> <span class="tlaGNC">           8 :     package: SyntaxKind.PackageKeyword,</span></span>
<span id="L182"><span class="lineNum">     182</span> <span class="tlaGNC">           8 :     private: SyntaxKind.PrivateKeyword,</span></span>
<span id="L183"><span class="lineNum">     183</span> <span class="tlaGNC">           8 :     protected: SyntaxKind.ProtectedKeyword,</span></span>
<span id="L184"><span class="lineNum">     184</span> <span class="tlaGNC">           8 :     public: SyntaxKind.PublicKeyword,</span></span>
<span id="L185"><span class="lineNum">     185</span> <span class="tlaGNC">           8 :     override: SyntaxKind.OverrideKeyword,</span></span>
<span id="L186"><span class="lineNum">     186</span> <span class="tlaGNC">           8 :     out: SyntaxKind.OutKeyword,</span></span>
<span id="L187"><span class="lineNum">     187</span> <span class="tlaGNC">           8 :     readonly: SyntaxKind.ReadonlyKeyword,</span></span>
<span id="L188"><span class="lineNum">     188</span> <span class="tlaGNC">           8 :     require: SyntaxKind.RequireKeyword,</span></span>
<span id="L189"><span class="lineNum">     189</span> <span class="tlaGNC">           8 :     global: SyntaxKind.GlobalKeyword,</span></span>
<span id="L190"><span class="lineNum">     190</span> <span class="tlaGNC">           8 :     return: SyntaxKind.ReturnKeyword,</span></span>
<span id="L191"><span class="lineNum">     191</span> <span class="tlaGNC">           8 :     satisfies: SyntaxKind.SatisfiesKeyword,</span></span>
<span id="L192"><span class="lineNum">     192</span> <span class="tlaGNC">           8 :     set: SyntaxKind.SetKeyword,</span></span>
<span id="L193"><span class="lineNum">     193</span> <span class="tlaGNC">           8 :     static: SyntaxKind.StaticKeyword,</span></span>
<span id="L194"><span class="lineNum">     194</span> <span class="tlaGNC">           8 :     string: SyntaxKind.StringKeyword,</span></span>
<span id="L195"><span class="lineNum">     195</span> <span class="tlaGNC">           8 :     super: SyntaxKind.SuperKeyword,</span></span>
<span id="L196"><span class="lineNum">     196</span> <span class="tlaGNC">           8 :     switch: SyntaxKind.SwitchKeyword,</span></span>
<span id="L197"><span class="lineNum">     197</span> <span class="tlaGNC">           8 :     symbol: SyntaxKind.SymbolKeyword,</span></span>
<span id="L198"><span class="lineNum">     198</span> <span class="tlaGNC">           8 :     this: SyntaxKind.ThisKeyword,</span></span>
<span id="L199"><span class="lineNum">     199</span> <span class="tlaGNC">           8 :     throw: SyntaxKind.ThrowKeyword,</span></span>
<span id="L200"><span class="lineNum">     200</span> <span class="tlaGNC">           8 :     true: SyntaxKind.TrueKeyword,</span></span>
<span id="L201"><span class="lineNum">     201</span> <span class="tlaGNC">           8 :     try: SyntaxKind.TryKeyword,</span></span>
<span id="L202"><span class="lineNum">     202</span> <span class="tlaGNC">           8 :     type: SyntaxKind.TypeKeyword,</span></span>
<span id="L203"><span class="lineNum">     203</span> <span class="tlaGNC">           8 :     typeof: SyntaxKind.TypeOfKeyword,</span></span>
<span id="L204"><span class="lineNum">     204</span> <span class="tlaGNC">           8 :     undefined: SyntaxKind.UndefinedKeyword,</span></span>
<span id="L205"><span class="lineNum">     205</span> <span class="tlaGNC">           8 :     unique: SyntaxKind.UniqueKeyword,</span></span>
<span id="L206"><span class="lineNum">     206</span> <span class="tlaGNC">           8 :     unknown: SyntaxKind.UnknownKeyword,</span></span>
<span id="L207"><span class="lineNum">     207</span> <span class="tlaGNC">           8 :     using: SyntaxKind.UsingKeyword,</span></span>
<span id="L208"><span class="lineNum">     208</span> <span class="tlaGNC">           8 :     var: SyntaxKind.VarKeyword,</span></span>
<span id="L209"><span class="lineNum">     209</span> <span class="tlaGNC">           8 :     void: SyntaxKind.VoidKeyword,</span></span>
<span id="L210"><span class="lineNum">     210</span> <span class="tlaGNC">           8 :     while: SyntaxKind.WhileKeyword,</span></span>
<span id="L211"><span class="lineNum">     211</span> <span class="tlaGNC">           8 :     with: SyntaxKind.WithKeyword,</span></span>
<span id="L212"><span class="lineNum">     212</span> <span class="tlaGNC">           8 :     yield: SyntaxKind.YieldKeyword,</span></span>
<span id="L213"><span class="lineNum">     213</span> <span class="tlaGNC">           8 :     async: SyntaxKind.AsyncKeyword,</span></span>
<span id="L214"><span class="lineNum">     214</span> <span class="tlaGNC">           8 :     await: SyntaxKind.AwaitKeyword,</span></span>
<span id="L215"><span class="lineNum">     215</span> <span class="tlaGNC">           8 :     of: SyntaxKind.OfKeyword,</span></span>
<span id="L216"><span class="lineNum">     216</span> <span class="tlaGNC">           8 : };</span></span>
<span id="L217"><span class="lineNum">     217</span> <span class="tlaGNC">           8 : </span></span>
<span id="L218"><span class="lineNum">     218</span> <span class="tlaGNC">           8 : const textToKeyword = new Map(Object.entries(textToKeywordObj));</span></span>
<span id="L219"><span class="lineNum">     219</span> <span class="tlaGNC">           8 : </span></span>
<span id="L220"><span class="lineNum">     220</span> <span class="tlaGNC">           8 : const textToToken = new Map(Object.entries({</span></span>
<span id="L221"><span class="lineNum">     221</span> <span class="tlaGNC">           8 :     ...textToKeywordObj,</span></span>
<span id="L222"><span class="lineNum">     222</span> <span class="tlaGNC">           8 :     &quot;{&quot;: SyntaxKind.OpenBraceToken,</span></span>
<span id="L223"><span class="lineNum">     223</span> <span class="tlaGNC">           8 :     &quot;}&quot;: SyntaxKind.CloseBraceToken,</span></span>
<span id="L224"><span class="lineNum">     224</span> <span class="tlaGNC">           8 :     &quot;(&quot;: SyntaxKind.OpenParenToken,</span></span>
<span id="L225"><span class="lineNum">     225</span> <span class="tlaGNC">           8 :     &quot;)&quot;: SyntaxKind.CloseParenToken,</span></span>
<span id="L226"><span class="lineNum">     226</span> <span class="tlaGNC">           8 :     &quot;[&quot;: SyntaxKind.OpenBracketToken,</span></span>
<span id="L227"><span class="lineNum">     227</span> <span class="tlaGNC">           8 :     &quot;]&quot;: SyntaxKind.CloseBracketToken,</span></span>
<span id="L228"><span class="lineNum">     228</span> <span class="tlaGNC">           8 :     &quot;.&quot;: SyntaxKind.DotToken,</span></span>
<span id="L229"><span class="lineNum">     229</span> <span class="tlaGNC">           8 :     &quot;...&quot;: SyntaxKind.DotDotDotToken,</span></span>
<span id="L230"><span class="lineNum">     230</span> <span class="tlaGNC">           8 :     &quot;;&quot;: SyntaxKind.SemicolonToken,</span></span>
<span id="L231"><span class="lineNum">     231</span> <span class="tlaGNC">           8 :     &quot;,&quot;: SyntaxKind.CommaToken,</span></span>
<span id="L232"><span class="lineNum">     232</span> <span class="tlaGNC">           8 :     &quot;&lt;&quot;: SyntaxKind.LessThanToken,</span></span>
<span id="L233"><span class="lineNum">     233</span> <span class="tlaGNC">           8 :     &quot;&gt;&quot;: SyntaxKind.GreaterThanToken,</span></span>
<span id="L234"><span class="lineNum">     234</span> <span class="tlaGNC">           8 :     &quot;&lt;=&quot;: SyntaxKind.LessThanEqualsToken,</span></span>
<span id="L235"><span class="lineNum">     235</span> <span class="tlaGNC">           8 :     &quot;&gt;=&quot;: SyntaxKind.GreaterThanEqualsToken,</span></span>
<span id="L236"><span class="lineNum">     236</span> <span class="tlaGNC">           8 :     &quot;==&quot;: SyntaxKind.EqualsEqualsToken,</span></span>
<span id="L237"><span class="lineNum">     237</span> <span class="tlaGNC">           8 :     &quot;!=&quot;: SyntaxKind.ExclamationEqualsToken,</span></span>
<span id="L238"><span class="lineNum">     238</span> <span class="tlaGNC">           8 :     &quot;===&quot;: SyntaxKind.EqualsEqualsEqualsToken,</span></span>
<span id="L239"><span class="lineNum">     239</span> <span class="tlaGNC">           8 :     &quot;!==&quot;: SyntaxKind.ExclamationEqualsEqualsToken,</span></span>
<span id="L240"><span class="lineNum">     240</span> <span class="tlaGNC">           8 :     &quot;=&gt;&quot;: SyntaxKind.EqualsGreaterThanToken,</span></span>
<span id="L241"><span class="lineNum">     241</span> <span class="tlaGNC">           8 :     &quot;+&quot;: SyntaxKind.PlusToken,</span></span>
<span id="L242"><span class="lineNum">     242</span> <span class="tlaGNC">           8 :     &quot;-&quot;: SyntaxKind.MinusToken,</span></span>
<span id="L243"><span class="lineNum">     243</span> <span class="tlaGNC">           8 :     &quot;**&quot;: SyntaxKind.AsteriskAsteriskToken,</span></span>
<span id="L244"><span class="lineNum">     244</span> <span class="tlaGNC">           8 :     &quot;*&quot;: SyntaxKind.AsteriskToken,</span></span>
<span id="L245"><span class="lineNum">     245</span> <span class="tlaGNC">           8 :     &quot;/&quot;: SyntaxKind.SlashToken,</span></span>
<span id="L246"><span class="lineNum">     246</span> <span class="tlaGNC">           8 :     &quot;%&quot;: SyntaxKind.PercentToken,</span></span>
<span id="L247"><span class="lineNum">     247</span> <span class="tlaGNC">           8 :     &quot;++&quot;: SyntaxKind.PlusPlusToken,</span></span>
<span id="L248"><span class="lineNum">     248</span> <span class="tlaGNC">           8 :     &quot;--&quot;: SyntaxKind.MinusMinusToken,</span></span>
<span id="L249"><span class="lineNum">     249</span> <span class="tlaGNC">           8 :     &quot;&lt;&lt;&quot;: SyntaxKind.LessThanLessThanToken,</span></span>
<span id="L250"><span class="lineNum">     250</span> <span class="tlaGNC">           8 :     &quot;&lt;/&quot;: SyntaxKind.LessThanSlashToken,</span></span>
<span id="L251"><span class="lineNum">     251</span> <span class="tlaGNC">           8 :     &quot;&gt;&gt;&quot;: SyntaxKind.GreaterThanGreaterThanToken,</span></span>
<span id="L252"><span class="lineNum">     252</span> <span class="tlaGNC">           8 :     &quot;&gt;&gt;&gt;&quot;: SyntaxKind.GreaterThanGreaterThanGreaterThanToken,</span></span>
<span id="L253"><span class="lineNum">     253</span> <span class="tlaGNC">           8 :     &quot;&amp;&quot;: SyntaxKind.AmpersandToken,</span></span>
<span id="L254"><span class="lineNum">     254</span> <span class="tlaGNC">           8 :     &quot;|&quot;: SyntaxKind.BarToken,</span></span>
<span id="L255"><span class="lineNum">     255</span> <span class="tlaGNC">           8 :     &quot;^&quot;: SyntaxKind.CaretToken,</span></span>
<span id="L256"><span class="lineNum">     256</span> <span class="tlaGNC">           8 :     &quot;!&quot;: SyntaxKind.ExclamationToken,</span></span>
<span id="L257"><span class="lineNum">     257</span> <span class="tlaGNC">           8 :     &quot;~&quot;: SyntaxKind.TildeToken,</span></span>
<span id="L258"><span class="lineNum">     258</span> <span class="tlaGNC">           8 :     &quot;&amp;&amp;&quot;: SyntaxKind.AmpersandAmpersandToken,</span></span>
<span id="L259"><span class="lineNum">     259</span> <span class="tlaGNC">           8 :     &quot;||&quot;: SyntaxKind.BarBarToken,</span></span>
<span id="L260"><span class="lineNum">     260</span> <span class="tlaGNC">           8 :     &quot;?&quot;: SyntaxKind.QuestionToken,</span></span>
<span id="L261"><span class="lineNum">     261</span> <span class="tlaGNC">           8 :     &quot;??&quot;: SyntaxKind.QuestionQuestionToken,</span></span>
<span id="L262"><span class="lineNum">     262</span> <span class="tlaGNC">           8 :     &quot;?.&quot;: SyntaxKind.QuestionDotToken,</span></span>
<span id="L263"><span class="lineNum">     263</span> <span class="tlaGNC">           8 :     &quot;:&quot;: SyntaxKind.ColonToken,</span></span>
<span id="L264"><span class="lineNum">     264</span> <span class="tlaGNC">           8 :     &quot;=&quot;: SyntaxKind.EqualsToken,</span></span>
<span id="L265"><span class="lineNum">     265</span> <span class="tlaGNC">           8 :     &quot;+=&quot;: SyntaxKind.PlusEqualsToken,</span></span>
<span id="L266"><span class="lineNum">     266</span> <span class="tlaGNC">           8 :     &quot;-=&quot;: SyntaxKind.MinusEqualsToken,</span></span>
<span id="L267"><span class="lineNum">     267</span> <span class="tlaGNC">           8 :     &quot;*=&quot;: SyntaxKind.AsteriskEqualsToken,</span></span>
<span id="L268"><span class="lineNum">     268</span> <span class="tlaGNC">           8 :     &quot;**=&quot;: SyntaxKind.AsteriskAsteriskEqualsToken,</span></span>
<span id="L269"><span class="lineNum">     269</span> <span class="tlaGNC">           8 :     &quot;/=&quot;: SyntaxKind.SlashEqualsToken,</span></span>
<span id="L270"><span class="lineNum">     270</span> <span class="tlaGNC">           8 :     &quot;%=&quot;: SyntaxKind.PercentEqualsToken,</span></span>
<span id="L271"><span class="lineNum">     271</span> <span class="tlaGNC">           8 :     &quot;&lt;&lt;=&quot;: SyntaxKind.LessThanLessThanEqualsToken,</span></span>
<span id="L272"><span class="lineNum">     272</span> <span class="tlaGNC">           8 :     &quot;&gt;&gt;=&quot;: SyntaxKind.GreaterThanGreaterThanEqualsToken,</span></span>
<span id="L273"><span class="lineNum">     273</span> <span class="tlaGNC">           8 :     &quot;&gt;&gt;&gt;=&quot;: SyntaxKind.GreaterThanGreaterThanGreaterThanEqualsToken,</span></span>
<span id="L274"><span class="lineNum">     274</span> <span class="tlaGNC">           8 :     &quot;&amp;=&quot;: SyntaxKind.AmpersandEqualsToken,</span></span>
<span id="L275"><span class="lineNum">     275</span> <span class="tlaGNC">           8 :     &quot;|=&quot;: SyntaxKind.BarEqualsToken,</span></span>
<span id="L276"><span class="lineNum">     276</span> <span class="tlaGNC">           8 :     &quot;^=&quot;: SyntaxKind.CaretEqualsToken,</span></span>
<span id="L277"><span class="lineNum">     277</span> <span class="tlaGNC">           8 :     &quot;||=&quot;: SyntaxKind.BarBarEqualsToken,</span></span>
<span id="L278"><span class="lineNum">     278</span> <span class="tlaGNC">           8 :     &quot;&amp;&amp;=&quot;: SyntaxKind.AmpersandAmpersandEqualsToken,</span></span>
<span id="L279"><span class="lineNum">     279</span> <span class="tlaGNC">           8 :     &quot;??=&quot;: SyntaxKind.QuestionQuestionEqualsToken,</span></span>
<span id="L280"><span class="lineNum">     280</span> <span class="tlaGNC">           8 :     &quot;@&quot;: SyntaxKind.AtToken,</span></span>
<span id="L281"><span class="lineNum">     281</span> <span class="tlaGNC">           8 :     &quot;#&quot;: SyntaxKind.HashToken,</span></span>
<span id="L282"><span class="lineNum">     282</span> <span class="tlaGNC">           8 :     &quot;`&quot;: SyntaxKind.BacktickToken,</span></span>
<span id="L283"><span class="lineNum">     283</span> <span class="tlaGNC">           8 : }));</span></span>
<span id="L284"><span class="lineNum">     284</span> <span class="tlaGNC">           8 : </span></span>
<span id="L285"><span class="lineNum">     285</span> <span class="tlaGNC">           8 : const charCodeToRegExpFlag = new Map&lt;CharacterCodes, RegularExpressionFlags&gt;([</span></span>
<span id="L286"><span class="lineNum">     286</span> <span class="tlaGNC">           8 :     [CharacterCodes.d, RegularExpressionFlags.HasIndices],</span></span>
<span id="L287"><span class="lineNum">     287</span> <span class="tlaGNC">           8 :     [CharacterCodes.g, RegularExpressionFlags.Global],</span></span>
<span id="L288"><span class="lineNum">     288</span> <span class="tlaGNC">           8 :     [CharacterCodes.i, RegularExpressionFlags.IgnoreCase],</span></span>
<span id="L289"><span class="lineNum">     289</span> <span class="tlaGNC">           8 :     [CharacterCodes.m, RegularExpressionFlags.Multiline],</span></span>
<span id="L290"><span class="lineNum">     290</span> <span class="tlaGNC">           8 :     [CharacterCodes.s, RegularExpressionFlags.DotAll],</span></span>
<span id="L291"><span class="lineNum">     291</span> <span class="tlaGNC">           8 :     [CharacterCodes.u, RegularExpressionFlags.Unicode],</span></span>
<span id="L292"><span class="lineNum">     292</span> <span class="tlaGNC">           8 :     [CharacterCodes.v, RegularExpressionFlags.UnicodeSets],</span></span>
<span id="L293"><span class="lineNum">     293</span> <span class="tlaGNC">           8 :     [CharacterCodes.y, RegularExpressionFlags.Sticky],</span></span>
<span id="L294"><span class="lineNum">     294</span> <span class="tlaGNC">           8 : ]);</span></span>
<span id="L295"><span class="lineNum">     295</span> <span class="tlaGNC">           8 : </span></span>
<span id="L296"><span class="lineNum">     296</span> <span class="tlaGNC">           8 : const regExpFlagToFirstAvailableLanguageVersion = new Map&lt;RegularExpressionFlags, LanguageFeatureMinimumTarget&gt;([</span></span>
<span id="L297"><span class="lineNum">     297</span> <span class="tlaGNC">           8 :     [RegularExpressionFlags.HasIndices, LanguageFeatureMinimumTarget.RegularExpressionFlagsHasIndices],</span></span>
<span id="L298"><span class="lineNum">     298</span> <span class="tlaGNC">           8 :     [RegularExpressionFlags.DotAll, LanguageFeatureMinimumTarget.RegularExpressionFlagsDotAll],</span></span>
<span id="L299"><span class="lineNum">     299</span> <span class="tlaGNC">           8 :     [RegularExpressionFlags.Unicode, LanguageFeatureMinimumTarget.RegularExpressionFlagsUnicode],</span></span>
<span id="L300"><span class="lineNum">     300</span> <span class="tlaGNC">           8 :     [RegularExpressionFlags.UnicodeSets, LanguageFeatureMinimumTarget.RegularExpressionFlagsUnicodeSets],</span></span>
<span id="L301"><span class="lineNum">     301</span> <span class="tlaGNC">           8 :     [RegularExpressionFlags.Sticky, LanguageFeatureMinimumTarget.RegularExpressionFlagsSticky],</span></span>
<span id="L302"><span class="lineNum">     302</span> <span class="tlaGNC">           8 : ]);</span></span>
<span id="L303"><span class="lineNum">     303</span> <span class="tlaGNC">           8 : </span></span>
<span id="L304"><span class="lineNum">     304</span> <span class="tlaGNC">           8 : /*</span></span>
<span id="L305"><span class="lineNum">     305</span> <span class="tlaGNC">           8 :     As per ECMAScript Language Specification 5th Edition, Section 7.6: ISyntaxToken Names and Identifiers</span></span>
<span id="L306"><span class="lineNum">     306</span> <span class="tlaGNC">           8 :     IdentifierStart ::</span></span>
<span id="L307"><span class="lineNum">     307</span> <span class="tlaGNC">           8 :         Can contain Unicode 6.2 categories:</span></span>
<span id="L308"><span class="lineNum">     308</span> <span class="tlaGNC">           8 :         Uppercase letter (Lu),</span></span>
<span id="L309"><span class="lineNum">     309</span> <span class="tlaGNC">           8 :         Lowercase letter (Ll),</span></span>
<span id="L310"><span class="lineNum">     310</span> <span class="tlaGNC">           8 :         Titlecase letter (Lt),</span></span>
<span id="L311"><span class="lineNum">     311</span> <span class="tlaGNC">           8 :         Modifier letter (Lm),</span></span>
<span id="L312"><span class="lineNum">     312</span> <span class="tlaGNC">           8 :         Other letter (Lo), or</span></span>
<span id="L313"><span class="lineNum">     313</span> <span class="tlaGNC">           8 :         Letter number (Nl).</span></span>
<span id="L314"><span class="lineNum">     314</span> <span class="tlaGNC">           8 :     IdentifierPart ::</span></span>
<span id="L315"><span class="lineNum">     315</span> <span class="tlaGNC">           8 :         Can contain IdentifierStart + Unicode 6.2 categories:</span></span>
<span id="L316"><span class="lineNum">     316</span> <span class="tlaGNC">           8 :         Non-spacing mark (Mn),</span></span>
<span id="L317"><span class="lineNum">     317</span> <span class="tlaGNC">           8 :         Combining spacing mark (Mc),</span></span>
<span id="L318"><span class="lineNum">     318</span> <span class="tlaGNC">           8 :         Decimal number (Nd),</span></span>
<span id="L319"><span class="lineNum">     319</span> <span class="tlaGNC">           8 :         Connector punctuation (Pc),</span></span>
<span id="L320"><span class="lineNum">     320</span> <span class="tlaGNC">           8 :         &lt;ZWNJ&gt;, or</span></span>
<span id="L321"><span class="lineNum">     321</span> <span class="tlaGNC">           8 :         &lt;ZWJ&gt;.</span></span>
<span id="L322"><span class="lineNum">     322</span> <span class="tlaGNC">           8 : </span></span>
<span id="L323"><span class="lineNum">     323</span> <span class="tlaGNC">           8 :     Codepoint ranges for ES5 Identifiers are extracted from the Unicode 6.2 specification at:</span></span>
<span id="L324"><span class="lineNum">     324</span> <span class="tlaGNC">           8 :     http://www.unicode.org/Public/6.2.0/ucd/UnicodeData.txt</span></span>
<span id="L325"><span class="lineNum">     325</span> <span class="tlaGNC">           8 : */</span></span>
<span id="L326"><span class="lineNum">     326</span> <span class="tlaGNC">           8 : // dprint-ignore</span></span>
<span id="L327"><span class="lineNum">     327</span> <span class="tlaGNC">           8 : const unicodeES5IdentifierStart = [170, 170, 181, 181, 186, 186, 192, 214, 216, 246, 248, 705, 710, 721, 736, 740, 748, 748, 750, 750, 880, 884, 886, 887, 890, 893, 902, 902, 904, 906, 908, 908, 910, 929, 931, 1013, 1015, 1153, 1162, 1319, 1329, 1366, 1369, 1369, 1377, 1415, 1488, 1514, 1520, 1522, 1568, 1610, 1646, 1647, 1649, 1747, 1749, 1749, 1765, 1766, 1774, 1775, 1786, 1788, 1791, 1791, 1808, 1808, 1810, 1839, 1869, 1957, 1969, 1969, 1994, 2026, 2036, 2037, 2042, 2042, 2048, 2069, 2074, 2074, 2084, 2084, 2088, 2088, 2112, 2136, 2208, 2208, 2210, 2220, 2308, 2361, 2365, 2365, 2384, 2384, 2392, 2401, 2417, 2423, 2425, 2431, 2437, 2444, 2447, 2448, 2451, 2472, 2474, 2480, 2482, 2482, 2486, 2489, 2493, 2493, 2510, 2510, 2524, 2525, 2527, 2529, 2544, 2545, 2565, 2570, 2575, 2576, 2579, 2600, 2602, 2608, 2610, 2611, 2613, 2614, 2616, 2617, 2649, 2652, 2654, 2654, 2674, 2676, 2693, 2701, 2703, 2705, 2707, 2728, 2730, 2736, 2738, 2739, 2741, 2745, 2749, 2749, 2768, 2768, 2784, 2785, 2821, 2828, 2831, 2832, 2835, 2856, 2858, 2864, 2866, 2867, 2869, 2873, 2877, 2877, 2908, 2909, 2911, 2913, 2929, 2929, 2947, 2947, 2949, 2954, 2958, 2960, 2962, 2965, 2969, 2970, 2972, 2972, 2974, 2975, 2979, 2980, 2984, 2986, 2990, 3001, 3024, 3024, 3077, 3084, 3086, 3088, 3090, 3112, 3114, 3123, 3125, 3129, 3133, 3133, 3160, 3161, 3168, 3169, 3205, 3212, 3214, 3216, 3218, 3240, 3242, 3251, 3253, 3257, 3261, 3261, 3294, 3294, 3296, 3297, 3313, 3314, 3333, 3340, 3342, 3344, 3346, 3386, 3389, 3389, 3406, 3406, 3424, 3425, 3450, 3455, 3461, 3478, 3482, 3505, 3507, 3515, 3517, 3517, 3520, 3526, 3585, 3632, 3634, 3635, 3648, 3654, 3713, 3714, 3716, 3716, 3719, 3720, 3722, 3722, 3725, 3725, 3732, 3735, 3737, 3743, 3745, 3747, 3749, 3749, 3751, 3751, 3754, 3755, 3757, 3760, 3762, 3763, 3773, 3773, 3776, 3780, 3782, 3782, 3804, 3807, 3840, 3840, 3904, 3911, 3913, 3948, 3976, 3980, 4096, 4138, 4159, 4159, 4176, 4181, 4186, 4189, 4193, 4193, 4197, 4198, 4206, 4208, 4213, 4225, 4238, 4238, 4256, 4293, 4295, 4295, 4301, 4301, 4304, 4346, 4348, 4680, 4682, 4685, 4688, 4694, 4696, 4696, 4698, 4701, 4704, 4744, 4746, 4749, 4752, 4784, 4786, 4789, 4792, 4798, 4800, 4800, 4802, 4805, 4808, 4822, 4824, 4880, 4882, 4885, 4888, 4954, 4992, 5007, 5024, 5108, 5121, 5740, 5743, 5759, 5761, 5786, 5792, 5866, 5870, 5872, 5888, 5900, 5902, 5905, 5920, 5937, 5952, 5969, 5984, 5996, 5998, 6000, 6016, 6067, 6103, 6103, 6108, 6108, 6176, 6263, 6272, 6312, 6314, 6314, 6320, 6389, 6400, 6428, 6480, 6509, 6512, 6516, 6528, 6571, 6593, 6599, 6656, 6678, 6688, 6740, 6823, 6823, 6917, 6963, 6981, 6987, 7043, 7072, 7086, 7087, 7098, 7141, 7168, 7203, 7245, 7247, 7258, 7293, 7401, 7404, 7406, 7409, 7413, 7414, 7424, 7615, 7680, 7957, 7960, 7965, 7968, 8005, 8008, 8013, 8016, 8023, 8025, 8025, 8027, 8027, 8029, 8029, 8031, 8061, 8064, 8116, 8118, 8124, 8126, 8126, 8130, 8132, 8134, 8140, 8144, 8147, 8150, 8155, 8160, 8172, 8178, 8180, 8182, 8188, 8305, 8305, 8319, 8319, 8336, 8348, 8450, 8450, 8455, 8455, 8458, 8467, 8469, 8469, 8473, 8477, 8484, 8484, 8486, 8486, 8488, 8488, 8490, 8493, 8495, 8505, 8508, 8511, 8517, 8521, 8526, 8526, 8544, 8584, 11264, 11310, 11312, 11358, 11360, 11492, 11499, 11502, 11506, 11507, 11520, 11557, 11559, 11559, 11565, 11565, 11568, 11623, 11631, 11631, 11648, 11670, 11680, 11686, 11688, 11694, 11696, 11702, 11704, 11710, 11712, 11718, 11720, 11726, 11728, 11734, 11736, 11742, 11823, 11823, 12293, 12295, 12321, 12329, 12337, 12341, 12344, 12348, 12353, 12438, 12445, 12447, 12449, 12538, 12540, 12543, 12549, 12589, 12593, 12686, 12704, 12730, 12784, 12799, 13312, 19893, 19968, 40908, 40960, 42124, 42192, 42237, 42240, 42508, 42512, 42527, 42538, 42539, 42560, 42606, 42623, 42647, 42656, 42735, 42775, 42783, 42786, 42888, 42891, 42894, 42896, 42899, 42912, 42922, 43000, 43009, 43011, 43013, 43015, 43018, 43020, 43042, 43072, 43123, 43138, 43187, 43250, 43255, 43259, 43259, 43274, 43301, 43312, 43334, 43360, 43388, 43396, 43442, 43471, 43471, 43520, 43560, 43584, 43586, 43588, 43595, 43616, 43638, 43642, 43642, 43648, 43695, 43697, 43697, 43701, 43702, 43705, 43709, 43712, 43712, 43714, 43714, 43739, 43741, 43744, 43754, 43762, 43764, 43777, 43782, 43785, 43790, 43793, 43798, 43808, 43814, 43816, 43822, 43968, 44002, 44032, 55203, 55216, 55238, 55243, 55291, 63744, 64109, 64112, 64217, 64256, 64262, 64275, 64279, 64285, 64285, 64287, 64296, 64298, 64310, 64312, 64316, 64318, 64318, 64320, 64321, 64323, 64324, 64326, 64433, 64467, 64829, 64848, 64911, 64914, 64967, 65008, 65019, 65136, 65140, 65142, 65276, 65313, 65338, 65345, 65370, 65382, 65470, 65474, 65479, 65482, 65487, 65490, 65495, 65498, 65500 ];</span></span>
<span id="L328"><span class="lineNum">     328</span> <span class="tlaGNC">           8 : // dprint-ignore</span></span>
<span id="L329"><span class="lineNum">     329</span> <span class="tlaGNC">           8 : const unicodeES5IdentifierPart = [170, 170, 181, 181, 186, 186, 192, 214, 216, 246, 248, 705, 710, 721, 736, 740, 748, 748, 750, 750, 768, 884, 886, 887, 890, 893, 902, 902, 904, 906, 908, 908, 910, 929, 931, 1013, 1015, 1153, 1155, 1159, 1162, 1319, 1329, 1366, 1369, 1369, 1377, 1415, 1425, 1469, 1471, 1471, 1473, 1474, 1476, 1477, 1479, 1479, 1488, 1514, 1520, 1522, 1552, 1562, 1568, 1641, 1646, 1747, 1749, 1756, 1759, 1768, 1770, 1788, 1791, 1791, 1808, 1866, 1869, 1969, 1984, 2037, 2042, 2042, 2048, 2093, 2112, 2139, 2208, 2208, 2210, 2220, 2276, 2302, 2304, 2403, 2406, 2415, 2417, 2423, 2425, 2431, 2433, 2435, 2437, 2444, 2447, 2448, 2451, 2472, 2474, 2480, 2482, 2482, 2486, 2489, 2492, 2500, 2503, 2504, 2507, 2510, 2519, 2519, 2524, 2525, 2527, 2531, 2534, 2545, 2561, 2563, 2565, 2570, 2575, 2576, 2579, 2600, 2602, 2608, 2610, 2611, 2613, 2614, 2616, 2617, 2620, 2620, 2622, 2626, 2631, 2632, 2635, 2637, 2641, 2641, 2649, 2652, 2654, 2654, 2662, 2677, 2689, 2691, 2693, 2701, 2703, 2705, 2707, 2728, 2730, 2736, 2738, 2739, 2741, 2745, 2748, 2757, 2759, 2761, 2763, 2765, 2768, 2768, 2784, 2787, 2790, 2799, 2817, 2819, 2821, 2828, 2831, 2832, 2835, 2856, 2858, 2864, 2866, 2867, 2869, 2873, 2876, 2884, 2887, 2888, 2891, 2893, 2902, 2903, 2908, 2909, 2911, 2915, 2918, 2927, 2929, 2929, 2946, 2947, 2949, 2954, 2958, 2960, 2962, 2965, 2969, 2970, 2972, 2972, 2974, 2975, 2979, 2980, 2984, 2986, 2990, 3001, 3006, 3010, 3014, 3016, 3018, 3021, 3024, 3024, 3031, 3031, 3046, 3055, 3073, 3075, 3077, 3084, 3086, 3088, 3090, 3112, 3114, 3123, 3125, 3129, 3133, 3140, 3142, 3144, 3146, 3149, 3157, 3158, 3160, 3161, 3168, 3171, 3174, 3183, 3202, 3203, 3205, 3212, 3214, 3216, 3218, 3240, 3242, 3251, 3253, 3257, 3260, 3268, 3270, 3272, 3274, 3277, 3285, 3286, 3294, 3294, 3296, 3299, 3302, 3311, 3313, 3314, 3330, 3331, 3333, 3340, 3342, 3344, 3346, 3386, 3389, 3396, 3398, 3400, 3402, 3406, 3415, 3415, 3424, 3427, 3430, 3439, 3450, 3455, 3458, 3459, 3461, 3478, 3482, 3505, 3507, 3515, 3517, 3517, 3520, 3526, 3530, 3530, 3535, 3540, 3542, 3542, 3544, 3551, 3570, 3571, 3585, 3642, 3648, 3662, 3664, 3673, 3713, 3714, 3716, 3716, 3719, 3720, 3722, 3722, 3725, 3725, 3732, 3735, 3737, 3743, 3745, 3747, 3749, 3749, 3751, 3751, 3754, 3755, 3757, 3769, 3771, 3773, 3776, 3780, 3782, 3782, 3784, 3789, 3792, 3801, 3804, 3807, 3840, 3840, 3864, 3865, 3872, 3881, 3893, 3893, 3895, 3895, 3897, 3897, 3902, 3911, 3913, 3948, 3953, 3972, 3974, 3991, 3993, 4028, 4038, 4038, 4096, 4169, 4176, 4253, 4256, 4293, 4295, 4295, 4301, 4301, 4304, 4346, 4348, 4680, 4682, 4685, 4688, 4694, 4696, 4696, 4698, 4701, 4704, 4744, 4746, 4749, 4752, 4784, 4786, 4789, 4792, 4798, 4800, 4800, 4802, 4805, 4808, 4822, 4824, 4880, 4882, 4885, 4888, 4954, 4957, 4959, 4992, 5007, 5024, 5108, 5121, 5740, 5743, 5759, 5761, 5786, 5792, 5866, 5870, 5872, 5888, 5900, 5902, 5908, 5920, 5940, 5952, 5971, 5984, 5996, 5998, 6000, 6002, 6003, 6016, 6099, 6103, 6103, 6108, 6109, 6112, 6121, 6155, 6157, 6160, 6169, 6176, 6263, 6272, 6314, 6320, 6389, 6400, 6428, 6432, 6443, 6448, 6459, 6470, 6509, 6512, 6516, 6528, 6571, 6576, 6601, 6608, 6617, 6656, 6683, 6688, 6750, 6752, 6780, 6783, 6793, 6800, 6809, 6823, 6823, 6912, 6987, 6992, 7001, 7019, 7027, 7040, 7155, 7168, 7223, 7232, 7241, 7245, 7293, 7376, 7378, 7380, 7414, 7424, 7654, 7676, 7957, 7960, 7965, 7968, 8005, 8008, 8013, 8016, 8023, 8025, 8025, 8027, 8027, 8029, 8029, 8031, 8061, 8064, 8116, 8118, 8124, 8126, 8126, 8130, 8132, 8134, 8140, 8144, 8147, 8150, 8155, 8160, 8172, 8178, 8180, 8182, 8188, 8204, 8205, 8255, 8256, 8276, 8276, 8305, 8305, 8319, 8319, 8336, 8348, 8400, 8412, 8417, 8417, 8421, 8432, 8450, 8450, 8455, 8455, 8458, 8467, 8469, 8469, 8473, 8477, 8484, 8484, 8486, 8486, 8488, 8488, 8490, 8493, 8495, 8505, 8508, 8511, 8517, 8521, 8526, 8526, 8544, 8584, 11264, 11310, 11312, 11358, 11360, 11492, 11499, 11507, 11520, 11557, 11559, 11559, 11565, 11565, 11568, 11623, 11631, 11631, 11647, 11670, 11680, 11686, 11688, 11694, 11696, 11702, 11704, 11710, 11712, 11718, 11720, 11726, 11728, 11734, 11736, 11742, 11744, 11775, 11823, 11823, 12293, 12295, 12321, 12335, 12337, 12341, 12344, 12348, 12353, 12438, 12441, 12442, 12445, 12447, 12449, 12538, 12540, 12543, 12549, 12589, 12593, 12686, 12704, 12730, 12784, 12799, 13312, 19893, 19968, 40908, 40960, 42124, 42192, 42237, 42240, 42508, 42512, 42539, 42560, 42607, 42612, 42621, 42623, 42647, 42655, 42737, 42775, 42783, 42786, 42888, 42891, 42894, 42896, 42899, 42912, 42922, 43000, 43047, 43072, 43123, 43136, 43204, 43216, 43225, 43232, 43255, 43259, 43259, 43264, 43309, 43312, 43347, 43360, 43388, 43392, 43456, 43471, 43481, 43520, 43574, 43584, 43597, 43600, 43609, 43616, 43638, 43642, 43643, 43648, 43714, 43739, 43741, 43744, 43759, 43762, 43766, 43777, 43782, 43785, 43790, 43793, 43798, 43808, 43814, 43816, 43822, 43968, 44010, 44012, 44013, 44016, 44025, 44032, 55203, 55216, 55238, 55243, 55291, 63744, 64109, 64112, 64217, 64256, 64262, 64275, 64279, 64285, 64296, 64298, 64310, 64312, 64316, 64318, 64318, 64320, 64321, 64323, 64324, 64326, 64433, 64467, 64829, 64848, 64911, 64914, 64967, 65008, 65019, 65024, 65039, 65056, 65062, 65075, 65076, 65101, 65103, 65136, 65140, 65142, 65276, 65296, 65305, 65313, 65338, 65343, 65343, 65345, 65370, 65382, 65470, 65474, 65479, 65482, 65487, 65490, 65495, 65498, 65500 ];</span></span>
<span id="L330"><span class="lineNum">     330</span> <span class="tlaGNC">           8 : </span></span>
<span id="L331"><span class="lineNum">     331</span> <span class="tlaGNC">           8 : /**</span></span>
<span id="L332"><span class="lineNum">     332</span> <span class="tlaGNC">           8 :  * Generated by scripts/regenerate-unicode-identifier-parts.mjs on node v22.1.0 with unicode 15.1</span></span>
<span id="L333"><span class="lineNum">     333</span> <span class="tlaGNC">           8 :  * based on http://www.unicode.org/reports/tr31/ and https://www.ecma-international.org/ecma-262/6.0/#sec-names-and-keywords</span></span>
<span id="L334"><span class="lineNum">     334</span> <span class="tlaGNC">           8 :  * unicodeESNextIdentifierStart corresponds to the ID_Start and Other_ID_Start property, and</span></span>
<span id="L335"><span class="lineNum">     335</span> <span class="tlaGNC">           8 :  * unicodeESNextIdentifierPart corresponds to ID_Continue, Other_ID_Continue, plus ID_Start and Other_ID_Start</span></span>
<span id="L336"><span class="lineNum">     336</span> <span class="tlaGNC">           8 :  */</span></span>
<span id="L337"><span class="lineNum">     337</span> <span class="tlaGNC">           8 : // dprint-ignore</span></span>
<span id="L338"><span class="lineNum">     338</span> <span class="tlaGNC">           8 : const unicodeESNextIdentifierStart = [65, 90, 97, 122, 170, 170, 181, 181, 186, 186, 192, 214, 216, 246, 248, 705, 710, 721, 736, 740, 748, 748, 750, 750, 880, 884, 886, 887, 890, 893, 895, 895, 902, 902, 904, 906, 908, 908, 910, 929, 931, 1013, 1015, 1153, 1162, 1327, 1329, 1366, 1369, 1369, 1376, 1416, 1488, 1514, 1519, 1522, 1568, 1610, 1646, 1647, 1649, 1747, 1749, 1749, 1765, 1766, 1774, 1775, 1786, 1788, 1791, 1791, 1808, 1808, 1810, 1839, 1869, 1957, 1969, 1969, 1994, 2026, 2036, 2037, 2042, 2042, 2048, 2069, 2074, 2074, 2084, 2084, 2088, 2088, 2112, 2136, 2144, 2154, 2160, 2183, 2185, 2190, 2208, 2249, 2308, 2361, 2365, 2365, 2384, 2384, 2392, 2401, 2417, 2432, 2437, 2444, 2447, 2448, 2451, 2472, 2474, 2480, 2482, 2482, 2486, 2489, 2493, 2493, 2510, 2510, 2524, 2525, 2527, 2529, 2544, 2545, 2556, 2556, 2565, 2570, 2575, 2576, 2579, 2600, 2602, 2608, 2610, 2611, 2613, 2614, 2616, 2617, 2649, 2652, 2654, 2654, 2674, 2676, 2693, 2701, 2703, 2705, 2707, 2728, 2730, 2736, 2738, 2739, 2741, 2745, 2749, 2749, 2768, 2768, 2784, 2785, 2809, 2809, 2821, 2828, 2831, 2832, 2835, 2856, 2858, 2864, 2866, 2867, 2869, 2873, 2877, 2877, 2908, 2909, 2911, 2913, 2929, 2929, 2947, 2947, 2949, 2954, 2958, 2960, 2962, 2965, 2969, 2970, 2972, 2972, 2974, 2975, 2979, 2980, 2984, 2986, 2990, 3001, 3024, 3024, 3077, 3084, 3086, 3088, 3090, 3112, 3114, 3129, 3133, 3133, 3160, 3162, 3165, 3165, 3168, 3169, 3200, 3200, 3205, 3212, 3214, 3216, 3218, 3240, 3242, 3251, 3253, 3257, 3261, 3261, 3293, 3294, 3296, 3297, 3313, 3314, 3332, 3340, 3342, 3344, 3346, 3386, 3389, 3389, 3406, 3406, 3412, 3414, 3423, 3425, 3450, 3455, 3461, 3478, 3482, 3505, 3507, 3515, 3517, 3517, 3520, 3526, 3585, 3632, 3634, 3635, 3648, 3654, 3713, 3714, 3716, 3716, 3718, 3722, 3724, 3747, 3749, 3749, 3751, 3760, 3762, 3763, 3773, 3773, 3776, 3780, 3782, 3782, 3804, 3807, 3840, 3840, 3904, 3911, 3913, 3948, 3976, 3980, 4096, 4138, 4159, 4159, 4176, 4181, 4186, 4189, 4193, 4193, 4197, 4198, 4206, 4208, 4213, 4225, 4238, 4238, 4256, 4293, 4295, 4295, 4301, 4301, 4304, 4346, 4348, 4680, 4682, 4685, 4688, 4694, 4696, 4696, 4698, 4701, 4704, 4744, 4746, 4749, 4752, 4784, 4786, 4789, 4792, 4798, 4800, 4800, 4802, 4805, 4808, 4822, 4824, 4880, 4882, 4885, 4888, 4954, 4992, 5007, 5024, 5109, 5112, 5117, 5121, 5740, 5743, 5759, 5761, 5786, 5792, 5866, 5870, 5880, 5888, 5905, 5919, 5937, 5952, 5969, 5984, 5996, 5998, 6000, 6016, 6067, 6103, 6103, 6108, 6108, 6176, 6264, 6272, 6312, 6314, 6314, 6320, 6389, 6400, 6430, 6480, 6509, 6512, 6516, 6528, 6571, 6576, 6601, 6656, 6678, 6688, 6740, 6823, 6823, 6917, 6963, 6981, 6988, 7043, 7072, 7086, 7087, 7098, 7141, 7168, 7203, 7245, 7247, 7258, 7293, 7296, 7304, 7312, 7354, 7357, 7359, 7401, 7404, 7406, 7411, 7413, 7414, 7418, 7418, 7424, 7615, 7680, 7957, 7960, 7965, 7968, 8005, 8008, 8013, 8016, 8023, 8025, 8025, 8027, 8027, 8029, 8029, 8031, 8061, 8064, 8116, 8118, 8124, 8126, 8126, 8130, 8132, 8134, 8140, 8144, 8147, 8150, 8155, 8160, 8172, 8178, 8180, 8182, 8188, 8305, 8305, 8319, 8319, 8336, 8348, 8450, 8450, 8455, 8455, 8458, 8467, 8469, 8469, 8472, 8477, 8484, 8484, 8486, 8486, 8488, 8488, 8490, 8505, 8508, 8511, 8517, 8521, 8526, 8526, 8544, 8584, 11264, 11492, 11499, 11502, 11506, 11507, 11520, 11557, 11559, 11559, 11565, 11565, 11568, 11623, 11631, 11631, 11648, 11670, 11680, 11686, 11688, 11694, 11696, 11702, 11704, 11710, 11712, 11718, 11720, 11726, 11728, 11734, 11736, 11742, 12293, 12295, 12321, 12329, 12337, 12341, 12344, 12348, 12353, 12438, 12443, 12447, 12449, 12538, 12540, 12543, 12549, 12591, 12593, 12686, 12704, 12735, 12784, 12799, 13312, 19903, 19968, 42124, 42192, 42237, 42240, 42508, 42512, 42527, 42538, 42539, 42560, 42606, 42623, 42653, 42656, 42735, 42775, 42783, 42786, 42888, 42891, 42954, 42960, 42961, 42963, 42963, 42965, 42969, 42994, 43009, 43011, 43013, 43015, 43018, 43020, 43042, 43072, 43123, 43138, 43187, 43250, 43255, 43259, 43259, 43261, 43262, 43274, 43301, 43312, 43334, 43360, 43388, 43396, 43442, 43471, 43471, 43488, 43492, 43494, 43503, 43514, 43518, 43520, 43560, 43584, 43586, 43588, 43595, 43616, 43638, 43642, 43642, 43646, 43695, 43697, 43697, 43701, 43702, 43705, 43709, 43712, 43712, 43714, 43714, 43739, 43741, 43744, 43754, 43762, 43764, 43777, 43782, 43785, 43790, 43793, 43798, 43808, 43814, 43816, 43822, 43824, 43866, 43868, 43881, 43888, 44002, 44032, 55203, 55216, 55238, 55243, 55291, 63744, 64109, 64112, 64217, 64256, 64262, 64275, 64279, 64285, 64285, 64287, 64296, 64298, 64310, 64312, 64316, 64318, 64318, 64320, 64321, 64323, 64324, 64326, 64433, 64467, 64829, 64848, 64911, 64914, 64967, 65008, 65019, 65136, 65140, 65142, 65276, 65313, 65338, 65345, 65370, 65382, 65470, 65474, 65479, 65482, 65487, 65490, 65495, 65498, 65500, 65536, 65547, 65549, 65574, 65576, 65594, 65596, 65597, 65599, 65613, 65616, 65629, 65664, 65786, 65856, 65908, 66176, 66204, 66208, 66256, 66304, 66335, 66349, 66378, 66384, 66421, 66432, 66461, 66464, 66499, 66504, 66511, 66513, 66517, 66560, 66717, 66736, 66771, 66776, 66811, 66816, 66855, 66864, 66915, 66928, 66938, 66940, 66954, 66956, 66962, 66964, 66965, 66967, 66977, 66979, 66993, 66995, 67001, 67003, 67004, 67072, 67382, 67392, 67413, 67424, 67431, 67456, 67461, 67463, 67504, 67506, 67514, 67584, 67589, 67592, 67592, 67594, 67637, 67639, 67640, 67644, 67644, 67647, 67669, 67680, 67702, 67712, 67742, 67808, 67826, 67828, 67829, 67840, 67861, 67872, 67897, 67968, 68023, 68030, 68031, 68096, 68096, 68112, 68115, 68117, 68119, 68121, 68149, 68192, 68220, 68224, 68252, 68288, 68295, 68297, 68324, 68352, 68405, 68416, 68437, 68448, 68466, 68480, 68497, 68608, 68680, 68736, 68786, 68800, 68850, 68864, 68899, 69248, 69289, 69296, 69297, 69376, 69404, 69415, 69415, 69424, 69445, 69488, 69505, 69552, 69572, 69600, 69622, 69635, 69687, 69745, 69746, 69749, 69749, 69763, 69807, 69840, 69864, 69891, 69926, 69956, 69956, 69959, 69959, 69968, 70002, 70006, 70006, 70019, 70066, 70081, 70084, 70106, 70106, 70108, 70108, 70144, 70161, 70163, 70187, 70207, 70208, 70272, 70278, 70280, 70280, 70282, 70285, 70287, 70301, 70303, 70312, 70320, 70366, 70405, 70412, 70415, 70416, 70419, 70440, 70442, 70448, 70450, 70451, 70453, 70457, 70461, 70461, 70480, 70480, 70493, 70497, 70656, 70708, 70727, 70730, 70751, 70753, 70784, 70831, 70852, 70853, 70855, 70855, 71040, 71086, 71128, 71131, 71168, 71215, 71236, 71236, 71296, 71338, 71352, 71352, 71424, 71450, 71488, 71494, 71680, 71723, 71840, 71903, 71935, 71942, 71945, 71945, 71948, 71955, 71957, 71958, 71960, 71983, 71999, 71999, 72001, 72001, 72096, 72103, 72106, 72144, 72161, 72161, 72163, 72163, 72192, 72192, 72203, 72242, 72250, 72250, 72272, 72272, 72284, 72329, 72349, 72349, 72368, 72440, 72704, 72712, 72714, 72750, 72768, 72768, 72818, 72847, 72960, 72966, 72968, 72969, 72971, 73008, 73030, 73030, 73056, 73061, 73063, 73064, 73066, 73097, 73112, 73112, 73440, 73458, 73474, 73474, 73476, 73488, 73490, 73523, 73648, 73648, 73728, 74649, 74752, 74862, 74880, 75075, 77712, 77808, 77824, 78895, 78913, 78918, 82944, 83526, 92160, 92728, 92736, 92766, 92784, 92862, 92880, 92909, 92928, 92975, 92992, 92995, 93027, 93047, 93053, 93071, 93760, 93823, 93952, 94026, 94032, 94032, 94099, 94111, 94176, 94177, 94179, 94179, 94208, 100343, 100352, 101589, 101632, 101640, 110576, 110579, 110581, 110587, 110589, 110590, 110592, 110882, 110898, 110898, 110928, 110930, 110933, 110933, 110948, 110951, 110960, 111355, 113664, 113770, 113776, 113788, 113792, 113800, 113808, 113817, 119808, 119892, 119894, 119964, 119966, 119967, 119970, 119970, 119973, 119974, 119977, 119980, 119982, 119993, 119995, 119995, 119997, 120003, 120005, 120069, 120071, 120074, 120077, 120084, 120086, 120092, 120094, 120121, 120123, 120126, 120128, 120132, 120134, 120134, 120138, 120144, 120146, 120485, 120488, 120512, 120514, 120538, 120540, 120570, 120572, 120596, 120598, 120628, 120630, 120654, 120656, 120686, 120688, 120712, 120714, 120744, 120746, 120770, 120772, 120779, 122624, 122654, 122661, 122666, 122928, 122989, 123136, 123180, 123191, 123197, 123214, 123214, 123536, 123565, 123584, 123627, 124112, 124139, 124896, 124902, 124904, 124907, 124909, 124910, 124912, 124926, 124928, 125124, 125184, 125251, 125259, 125259, 126464, 126467, 126469, 126495, 126497, 126498, 126500, 126500, 126503, 126503, 126505, 126514, 126516, 126519, 126521, 126521, 126523, 126523, 126530, 126530, 126535, 126535, 126537, 126537, 126539, 126539, 126541, 126543, 126545, 126546, 126548, 126548, 126551, 126551, 126553, 126553, 126555, 126555, 126557, 126557, 126559, 126559, 126561, 126562, 126564, 126564, 126567, 126570, 126572, 126578, 126580, 126583, 126585, 126588, 126590, 126590, 126592, 126601, 126603, 126619, 126625, 126627, 126629, 126633, 126635, 126651, 131072, 173791, 173824, 177977, 177984, 178205, 178208, 183969, 183984, 191456, 191472, 192093, 194560, 195101, 196608, 201546, 201552, 205743];</span></span>
<span id="L339"><span class="lineNum">     339</span> <span class="tlaGNC">           8 : // dprint-ignore</span></span>
<span id="L340"><span class="lineNum">     340</span> <span class="tlaGNC">           8 : const unicodeESNextIdentifierPart = [48, 57, 65, 90, 95, 95, 97, 122, 170, 170, 181, 181, 183, 183, 186, 186, 192, 214, 216, 246, 248, 705, 710, 721, 736, 740, 748, 748, 750, 750, 768, 884, 886, 887, 890, 893, 895, 895, 902, 906, 908, 908, 910, 929, 931, 1013, 1015, 1153, 1155, 1159, 1162, 1327, 1329, 1366, 1369, 1369, 1376, 1416, 1425, 1469, 1471, 1471, 1473, 1474, 1476, 1477, 1479, 1479, 1488, 1514, 1519, 1522, 1552, 1562, 1568, 1641, 1646, 1747, 1749, 1756, 1759, 1768, 1770, 1788, 1791, 1791, 1808, 1866, 1869, 1969, 1984, 2037, 2042, 2042, 2045, 2045, 2048, 2093, 2112, 2139, 2144, 2154, 2160, 2183, 2185, 2190, 2200, 2273, 2275, 2403, 2406, 2415, 2417, 2435, 2437, 2444, 2447, 2448, 2451, 2472, 2474, 2480, 2482, 2482, 2486, 2489, 2492, 2500, 2503, 2504, 2507, 2510, 2519, 2519, 2524, 2525, 2527, 2531, 2534, 2545, 2556, 2556, 2558, 2558, 2561, 2563, 2565, 2570, 2575, 2576, 2579, 2600, 2602, 2608, 2610, 2611, 2613, 2614, 2616, 2617, 2620, 2620, 2622, 2626, 2631, 2632, 2635, 2637, 2641, 2641, 2649, 2652, 2654, 2654, 2662, 2677, 2689, 2691, 2693, 2701, 2703, 2705, 2707, 2728, 2730, 2736, 2738, 2739, 2741, 2745, 2748, 2757, 2759, 2761, 2763, 2765, 2768, 2768, 2784, 2787, 2790, 2799, 2809, 2815, 2817, 2819, 2821, 2828, 2831, 2832, 2835, 2856, 2858, 2864, 2866, 2867, 2869, 2873, 2876, 2884, 2887, 2888, 2891, 2893, 2901, 2903, 2908, 2909, 2911, 2915, 2918, 2927, 2929, 2929, 2946, 2947, 2949, 2954, 2958, 2960, 2962, 2965, 2969, 2970, 2972, 2972, 2974, 2975, 2979, 2980, 2984, 2986, 2990, 3001, 3006, 3010, 3014, 3016, 3018, 3021, 3024, 3024, 3031, 3031, 3046, 3055, 3072, 3084, 3086, 3088, 3090, 3112, 3114, 3129, 3132, 3140, 3142, 3144, 3146, 3149, 3157, 3158, 3160, 3162, 3165, 3165, 3168, 3171, 3174, 3183, 3200, 3203, 3205, 3212, 3214, 3216, 3218, 3240, 3242, 3251, 3253, 3257, 3260, 3268, 3270, 3272, 3274, 3277, 3285, 3286, 3293, 3294, 3296, 3299, 3302, 3311, 3313, 3315, 3328, 3340, 3342, 3344, 3346, 3396, 3398, 3400, 3402, 3406, 3412, 3415, 3423, 3427, 3430, 3439, 3450, 3455, 3457, 3459, 3461, 3478, 3482, 3505, 3507, 3515, 3517, 3517, 3520, 3526, 3530, 3530, 3535, 3540, 3542, 3542, 3544, 3551, 3558, 3567, 3570, 3571, 3585, 3642, 3648, 3662, 3664, 3673, 3713, 3714, 3716, 3716, 3718, 3722, 3724, 3747, 3749, 3749, 3751, 3773, 3776, 3780, 3782, 3782, 3784, 3790, 3792, 3801, 3804, 3807, 3840, 3840, 3864, 3865, 3872, 3881, 3893, 3893, 3895, 3895, 3897, 3897, 3902, 3911, 3913, 3948, 3953, 3972, 3974, 3991, 3993, 4028, 4038, 4038, 4096, 4169, 4176, 4253, 4256, 4293, 4295, 4295, 4301, 4301, 4304, 4346, 4348, 4680, 4682, 4685, 4688, 4694, 4696, 4696, 4698, 4701, 4704, 4744, 4746, 4749, 4752, 4784, 4786, 4789, 4792, 4798, 4800, 4800, 4802, 4805, 4808, 4822, 4824, 4880, 4882, 4885, 4888, 4954, 4957, 4959, 4969, 4977, 4992, 5007, 5024, 5109, 5112, 5117, 5121, 5740, 5743, 5759, 5761, 5786, 5792, 5866, 5870, 5880, 5888, 5909, 5919, 5940, 5952, 5971, 5984, 5996, 5998, 6000, 6002, 6003, 6016, 6099, 6103, 6103, 6108, 6109, 6112, 6121, 6155, 6157, 6159, 6169, 6176, 6264, 6272, 6314, 6320, 6389, 6400, 6430, 6432, 6443, 6448, 6459, 6470, 6509, 6512, 6516, 6528, 6571, 6576, 6601, 6608, 6618, 6656, 6683, 6688, 6750, 6752, 6780, 6783, 6793, 6800, 6809, 6823, 6823, 6832, 6845, 6847, 6862, 6912, 6988, 6992, 7001, 7019, 7027, 7040, 7155, 7168, 7223, 7232, 7241, 7245, 7293, 7296, 7304, 7312, 7354, 7357, 7359, 7376, 7378, 7380, 7418, 7424, 7957, 7960, 7965, 7968, 8005, 8008, 8013, 8016, 8023, 8025, 8025, 8027, 8027, 8029, 8029, 8031, 8061, 8064, 8116, 8118, 8124, 8126, 8126, 8130, 8132, 8134, 8140, 8144, 8147, 8150, 8155, 8160, 8172, 8178, 8180, 8182, 8188, 8204, 8205, 8255, 8256, 8276, 8276, 8305, 8305, 8319, 8319, 8336, 8348, 8400, 8412, 8417, 8417, 8421, 8432, 8450, 8450, 8455, 8455, 8458, 8467, 8469, 8469, 8472, 8477, 8484, 8484, 8486, 8486, 8488, 8488, 8490, 8505, 8508, 8511, 8517, 8521, 8526, 8526, 8544, 8584, 11264, 11492, 11499, 11507, 11520, 11557, 11559, 11559, 11565, 11565, 11568, 11623, 11631, 11631, 11647, 11670, 11680, 11686, 11688, 11694, 11696, 11702, 11704, 11710, 11712, 11718, 11720, 11726, 11728, 11734, 11736, 11742, 11744, 11775, 12293, 12295, 12321, 12335, 12337, 12341, 12344, 12348, 12353, 12438, 12441, 12447, 12449, 12543, 12549, 12591, 12593, 12686, 12704, 12735, 12784, 12799, 13312, 19903, 19968, 42124, 42192, 42237, 42240, 42508, 42512, 42539, 42560, 42607, 42612, 42621, 42623, 42737, 42775, 42783, 42786, 42888, 42891, 42954, 42960, 42961, 42963, 42963, 42965, 42969, 42994, 43047, 43052, 43052, 43072, 43123, 43136, 43205, 43216, 43225, 43232, 43255, 43259, 43259, 43261, 43309, 43312, 43347, 43360, 43388, 43392, 43456, 43471, 43481, 43488, 43518, 43520, 43574, 43584, 43597, 43600, 43609, 43616, 43638, 43642, 43714, 43739, 43741, 43744, 43759, 43762, 43766, 43777, 43782, 43785, 43790, 43793, 43798, 43808, 43814, 43816, 43822, 43824, 43866, 43868, 43881, 43888, 44010, 44012, 44013, 44016, 44025, 44032, 55203, 55216, 55238, 55243, 55291, 63744, 64109, 64112, 64217, 64256, 64262, 64275, 64279, 64285, 64296, 64298, 64310, 64312, 64316, 64318, 64318, 64320, 64321, 64323, 64324, 64326, 64433, 64467, 64829, 64848, 64911, 64914, 64967, 65008, 65019, 65024, 65039, 65056, 65071, 65075, 65076, 65101, 65103, 65136, 65140, 65142, 65276, 65296, 65305, 65313, 65338, 65343, 65343, 65345, 65370, 65381, 65470, 65474, 65479, 65482, 65487, 65490, 65495, 65498, 65500, 65536, 65547, 65549, 65574, 65576, 65594, 65596, 65597, 65599, 65613, 65616, 65629, 65664, 65786, 65856, 65908, 66045, 66045, 66176, 66204, 66208, 66256, 66272, 66272, 66304, 66335, 66349, 66378, 66384, 66426, 66432, 66461, 66464, 66499, 66504, 66511, 66513, 66517, 66560, 66717, 66720, 66729, 66736, 66771, 66776, 66811, 66816, 66855, 66864, 66915, 66928, 66938, 66940, 66954, 66956, 66962, 66964, 66965, 66967, 66977, 66979, 66993, 66995, 67001, 67003, 67004, 67072, 67382, 67392, 67413, 67424, 67431, 67456, 67461, 67463, 67504, 67506, 67514, 67584, 67589, 67592, 67592, 67594, 67637, 67639, 67640, 67644, 67644, 67647, 67669, 67680, 67702, 67712, 67742, 67808, 67826, 67828, 67829, 67840, 67861, 67872, 67897, 67968, 68023, 68030, 68031, 68096, 68099, 68101, 68102, 68108, 68115, 68117, 68119, 68121, 68149, 68152, 68154, 68159, 68159, 68192, 68220, 68224, 68252, 68288, 68295, 68297, 68326, 68352, 68405, 68416, 68437, 68448, 68466, 68480, 68497, 68608, 68680, 68736, 68786, 68800, 68850, 68864, 68903, 68912, 68921, 69248, 69289, 69291, 69292, 69296, 69297, 69373, 69404, 69415, 69415, 69424, 69456, 69488, 69509, 69552, 69572, 69600, 69622, 69632, 69702, 69734, 69749, 69759, 69818, 69826, 69826, 69840, 69864, 69872, 69881, 69888, 69940, 69942, 69951, 69956, 69959, 69968, 70003, 70006, 70006, 70016, 70084, 70089, 70092, 70094, 70106, 70108, 70108, 70144, 70161, 70163, 70199, 70206, 70209, 70272, 70278, 70280, 70280, 70282, 70285, 70287, 70301, 70303, 70312, 70320, 70378, 70384, 70393, 70400, 70403, 70405, 70412, 70415, 70416, 70419, 70440, 70442, 70448, 70450, 70451, 70453, 70457, 70459, 70468, 70471, 70472, 70475, 70477, 70480, 70480, 70487, 70487, 70493, 70499, 70502, 70508, 70512, 70516, 70656, 70730, 70736, 70745, 70750, 70753, 70784, 70853, 70855, 70855, 70864, 70873, 71040, 71093, 71096, 71104, 71128, 71133, 71168, 71232, 71236, 71236, 71248, 71257, 71296, 71352, 71360, 71369, 71424, 71450, 71453, 71467, 71472, 71481, 71488, 71494, 71680, 71738, 71840, 71913, 71935, 71942, 71945, 71945, 71948, 71955, 71957, 71958, 71960, 71989, 71991, 71992, 71995, 72003, 72016, 72025, 72096, 72103, 72106, 72151, 72154, 72161, 72163, 72164, 72192, 72254, 72263, 72263, 72272, 72345, 72349, 72349, 72368, 72440, 72704, 72712, 72714, 72758, 72760, 72768, 72784, 72793, 72818, 72847, 72850, 72871, 72873, 72886, 72960, 72966, 72968, 72969, 72971, 73014, 73018, 73018, 73020, 73021, 73023, 73031, 73040, 73049, 73056, 73061, 73063, 73064, 73066, 73102, 73104, 73105, 73107, 73112, 73120, 73129, 73440, 73462, 73472, 73488, 73490, 73530, 73534, 73538, 73552, 73561, 73648, 73648, 73728, 74649, 74752, 74862, 74880, 75075, 77712, 77808, 77824, 78895, 78912, 78933, 82944, 83526, 92160, 92728, 92736, 92766, 92768, 92777, 92784, 92862, 92864, 92873, 92880, 92909, 92912, 92916, 92928, 92982, 92992, 92995, 93008, 93017, 93027, 93047, 93053, 93071, 93760, 93823, 93952, 94026, 94031, 94087, 94095, 94111, 94176, 94177, 94179, 94180, 94192, 94193, 94208, 100343, 100352, 101589, 101632, 101640, 110576, 110579, 110581, 110587, 110589, 110590, 110592, 110882, 110898, 110898, 110928, 110930, 110933, 110933, 110948, 110951, 110960, 111355, 113664, 113770, 113776, 113788, 113792, 113800, 113808, 113817, 113821, 113822, 118528, 118573, 118576, 118598, 119141, 119145, 119149, 119154, 119163, 119170, 119173, 119179, 119210, 119213, 119362, 119364, 119808, 119892, 119894, 119964, 119966, 119967, 119970, 119970, 119973, 119974, 119977, 119980, 119982, 119993, 119995, 119995, 119997, 120003, 120005, 120069, 120071, 120074, 120077, 120084, 120086, 120092, 120094, 120121, 120123, 120126, 120128, 120132, 120134, 120134, 120138, 120144, 120146, 120485, 120488, 120512, 120514, 120538, 120540, 120570, 120572, 120596, 120598, 120628, 120630, 120654, 120656, 120686, 120688, 120712, 120714, 120744, 120746, 120770, 120772, 120779, 120782, 120831, 121344, 121398, 121403, 121452, 121461, 121461, 121476, 121476, 121499, 121503, 121505, 121519, 122624, 122654, 122661, 122666, 122880, 122886, 122888, 122904, 122907, 122913, 122915, 122916, 122918, 122922, 122928, 122989, 123023, 123023, 123136, 123180, 123184, 123197, 123200, 123209, 123214, 123214, 123536, 123566, 123584, 123641, 124112, 124153, 124896, 124902, 124904, 124907, 124909, 124910, 124912, 124926, 124928, 125124, 125136, 125142, 125184, 125259, 125264, 125273, 126464, 126467, 126469, 126495, 126497, 126498, 126500, 126500, 126503, 126503, 126505, 126514, 126516, 126519, 126521, 126521, 126523, 126523, 126530, 126530, 126535, 126535, 126537, 126537, 126539, 126539, 126541, 126543, 126545, 126546, 126548, 126548, 126551, 126551, 126553, 126553, 126555, 126555, 126557, 126557, 126559, 126559, 126561, 126562, 126564, 126564, 126567, 126570, 126572, 126578, 126580, 126583, 126585, 126588, 126590, 126590, 126592, 126601, 126603, 126619, 126625, 126627, 126629, 126633, 126635, 126651, 130032, 130041, 131072, 173791, 173824, 177977, 177984, 178205, 178208, 183969, 183984, 191456, 191472, 192093, 194560, 195101, 196608, 201546, 201552, 205743, 917760, 917999];</span></span>
<span id="L341"><span class="lineNum">     341</span> <span class="tlaGNC">           8 : </span></span>
<span id="L342"><span class="lineNum">     342</span> <span class="tlaGNC">           8 : /**</span></span>
<span id="L343"><span class="lineNum">     343</span> <span class="tlaGNC">           8 :  * Test for whether a single line comment with leading whitespace trimmed's text contains a directive.</span></span>
<span id="L344"><span class="lineNum">     344</span> <span class="tlaGNC">           8 :  */</span></span>
<span id="L345"><span class="lineNum">     345</span> <span class="tlaGNC">           8 : const commentDirectiveRegExSingleLine = /^\/\/\/?\s*@(ts-expect-error|ts-ignore)/;</span></span>
<span id="L346"><span class="lineNum">     346</span> <span class="tlaGNC">           8 : </span></span>
<span id="L347"><span class="lineNum">     347</span> <span class="tlaGNC">           8 : /**</span></span>
<span id="L348"><span class="lineNum">     348</span> <span class="tlaGNC">           8 :  * Test for whether a multi-line comment with leading whitespace trimmed's last line contains a directive.</span></span>
<span id="L349"><span class="lineNum">     349</span> <span class="tlaGNC">           8 :  */</span></span>
<span id="L350"><span class="lineNum">     350</span> <span class="tlaGNC">           8 : const commentDirectiveRegExMultiLine = /^(?:\/|\*)*\s*@(ts-expect-error|ts-ignore)/;</span></span>
<span id="L351"><span class="lineNum">     351</span> <span class="tlaGNC">           8 : </span></span>
<span id="L352"><span class="lineNum">     352</span> <span class="tlaGNC">           8 : const jsDocSeeOrLink = /@(?:see|link)/i;</span></span>
<span id="L353"><span class="lineNum">     353</span> <span class="tlaGNC">           8 : </span></span>
<span id="L354"><span class="lineNum">     354</span> <span class="tlaGNC">           8 : function lookupInUnicodeMap(code: number, map: readonly number[]): boolean {</span></span>
<span id="L355"><span class="lineNum">     355</span> <span class="tlaGNC">           8 :     // Bail out quickly if it couldn't possibly be in the map.</span></span>
<span id="L356"><span class="lineNum">     356</span> <span class="tlaGNC">           8 :     if (code &lt; map[0]) {</span></span>
<span id="L357"><span class="lineNum">     357</span> <span class="tlaGNC">           8 :         return false;</span></span>
<span id="L358"><span class="lineNum">     358</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L359"><span class="lineNum">     359</span> <span class="tlaGNC">           8 : </span></span>
<span id="L360"><span class="lineNum">     360</span> <span class="tlaGNC">           8 :     // Perform binary search in one of the Unicode range maps</span></span>
<span id="L361"><span class="lineNum">     361</span> <span class="tlaGNC">           8 :     let lo = 0;</span></span>
<span id="L362"><span class="lineNum">     362</span> <span class="tlaGNC">           8 :     let hi: number = map.length;</span></span>
<span id="L363"><span class="lineNum">     363</span> <span class="tlaGNC">           8 :     let mid: number;</span></span>
<span id="L364"><span class="lineNum">     364</span> <span class="tlaGNC">           8 : </span></span>
<span id="L365"><span class="lineNum">     365</span> <span class="tlaGNC">           8 :     while (lo + 1 &lt; hi) {</span></span>
<span id="L366"><span class="lineNum">     366</span> <span class="tlaGNC">           8 :         mid = lo + (hi - lo) / 2;</span></span>
<span id="L367"><span class="lineNum">     367</span> <span class="tlaGNC">           8 :         // mid has to be even to catch a range's beginning</span></span>
<span id="L368"><span class="lineNum">     368</span> <span class="tlaGNC">           8 :         mid -= mid % 2;</span></span>
<span id="L369"><span class="lineNum">     369</span> <span class="tlaGNC">           8 :         if (map[mid] &lt;= code &amp;&amp; code &lt;= map[mid + 1]) {</span></span>
<span id="L370"><span class="lineNum">     370</span> <span class="tlaGNC">           8 :             return true;</span></span>
<span id="L371"><span class="lineNum">     371</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L372"><span class="lineNum">     372</span> <span class="tlaGNC">           8 : </span></span>
<span id="L373"><span class="lineNum">     373</span> <span class="tlaGNC">           8 :         if (code &lt; map[mid]) {</span></span>
<span id="L374"><span class="lineNum">     374</span> <span class="tlaGNC">           8 :             hi = mid;</span></span>
<span id="L375"><span class="lineNum">     375</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L376"><span class="lineNum">     376</span> <span class="tlaGNC">           8 :         else {</span></span>
<span id="L377"><span class="lineNum">     377</span> <span class="tlaGNC">           8 :             lo = mid + 2;</span></span>
<span id="L378"><span class="lineNum">     378</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L379"><span class="lineNum">     379</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L380"><span class="lineNum">     380</span> <span class="tlaGNC">           8 : </span></span>
<span id="L381"><span class="lineNum">     381</span> <span class="tlaGNC">           8 :     return false;</span></span>
<span id="L382"><span class="lineNum">     382</span> <span class="tlaGNC">           8 : }</span></span>
<span id="L383"><span class="lineNum">     383</span> <span class="tlaGNC">           8 : </span></span>
<span id="L384"><span class="lineNum">     384</span> <span class="tlaGNC">           8 : /** @internal */</span></span>
<span id="L385"><span class="lineNum">     385</span> <span class="tlaGNC">           8 : export function isUnicodeIdentifierStart(code: number, languageVersion: ScriptTarget | undefined) {</span></span>
<span id="L386"><span class="lineNum">     386</span> <span class="tlaGNC">           8 :     return languageVersion! &gt;= ScriptTarget.ES2015 ?</span></span>
<span id="L387"><span class="lineNum">     387</span> <span class="tlaGNC">           8 :         lookupInUnicodeMap(code, unicodeESNextIdentifierStart) :</span></span>
<span id="L388"><span class="lineNum">     388</span> <span class="tlaGNC">           8 :         lookupInUnicodeMap(code, unicodeES5IdentifierStart);</span></span>
<span id="L389"><span class="lineNum">     389</span> <span class="tlaGNC">           8 : }</span></span>
<span id="L390"><span class="lineNum">     390</span> <span class="tlaGNC">           8 : </span></span>
<span id="L391"><span class="lineNum">     391</span> <span class="tlaGNC">           8 : function isUnicodeIdentifierPart(code: number, languageVersion: ScriptTarget | undefined) {</span></span>
<span id="L392"><span class="lineNum">     392</span> <span class="tlaGNC">           8 :     return languageVersion! &gt;= ScriptTarget.ES2015 ?</span></span>
<span id="L393"><span class="lineNum">     393</span> <span class="tlaGNC">           8 :         lookupInUnicodeMap(code, unicodeESNextIdentifierPart) :</span></span>
<span id="L394"><span class="lineNum">     394</span> <span class="tlaGNC">           8 :         lookupInUnicodeMap(code, unicodeES5IdentifierPart);</span></span>
<span id="L395"><span class="lineNum">     395</span> <span class="tlaGNC">           8 : }</span></span>
<span id="L396"><span class="lineNum">     396</span> <span class="tlaGNC">           8 : </span></span>
<span id="L397"><span class="lineNum">     397</span> <span class="tlaGNC">           8 : function makeReverseMap&lt;T&gt;(source: Map&lt;T, number&gt;): T[] {</span></span>
<span id="L398"><span class="lineNum">     398</span> <span class="tlaGNC">           8 :     const result: T[] = [];</span></span>
<span id="L399"><span class="lineNum">     399</span> <span class="tlaGNC">           8 :     source.forEach((value, name) =&gt; {</span></span>
<span id="L400"><span class="lineNum">     400</span> <span class="tlaGNC">           8 :         result[value] = name;</span></span>
<span id="L401"><span class="lineNum">     401</span> <span class="tlaGNC">           8 :     });</span></span>
<span id="L402"><span class="lineNum">     402</span> <span class="tlaGNC">           8 :     return result;</span></span>
<span id="L403"><span class="lineNum">     403</span> <span class="tlaGNC">           8 : }</span></span>
<span id="L404"><span class="lineNum">     404</span> <span class="tlaGNC">           8 : </span></span>
<span id="L405"><span class="lineNum">     405</span> <span class="tlaGNC">           8 : const tokenStrings = makeReverseMap(textToToken);</span></span>
<span id="L406"><span class="lineNum">     406</span> <span class="tlaGNC">           8 : </span></span>
<span id="L407"><span class="lineNum">     407</span> <span class="tlaGNC">           8 : /** @internal */</span></span>
<span id="L408"><span class="lineNum">     408</span> <span class="tlaGNC">           8 : export function tokenToString(t: PunctuationOrKeywordSyntaxKind): string;</span></span>
<span id="L409"><span class="lineNum">     409</span> <span class="tlaGNC">           8 : export function tokenToString(t: SyntaxKind): string | undefined;</span></span>
<span id="L410"><span class="lineNum">     410</span> <span class="tlaGNC">           8 : export function tokenToString(t: SyntaxKind): string | undefined {</span></span>
<span id="L411"><span class="lineNum">     411</span> <span class="tlaGNC">           8 :     return tokenStrings[t];</span></span>
<span id="L412"><span class="lineNum">     412</span> <span class="tlaGNC">           8 : }</span></span>
<span id="L413"><span class="lineNum">     413</span> <span class="tlaGNC">           8 : </span></span>
<span id="L414"><span class="lineNum">     414</span> <span class="tlaGNC">           8 : /** @internal */</span></span>
<span id="L415"><span class="lineNum">     415</span> <span class="tlaGNC">           8 : export function stringToToken(s: string): SyntaxKind | undefined {</span></span>
<span id="L416"><span class="lineNum">     416</span> <span class="tlaGNC">           8 :     return textToToken.get(s);</span></span>
<span id="L417"><span class="lineNum">     417</span> <span class="tlaGNC">           8 : }</span></span>
<span id="L418"><span class="lineNum">     418</span> <span class="tlaGNC">           8 : </span></span>
<span id="L419"><span class="lineNum">     419</span> <span class="tlaGNC">           8 : const regExpFlagCharCodes = makeReverseMap(charCodeToRegExpFlag);</span></span>
<span id="L420"><span class="lineNum">     420</span> <span class="tlaGNC">           8 : </span></span>
<span id="L421"><span class="lineNum">     421</span> <span class="tlaGNC">           8 : /** @internal */</span></span>
<span id="L422"><span class="lineNum">     422</span> <span class="tlaGNC">           8 : export function regularExpressionFlagToCharacterCode(f: RegularExpressionFlags): CharacterCodes | undefined {</span></span>
<span id="L423"><span class="lineNum">     423</span> <span class="tlaGNC">           8 :     return regExpFlagCharCodes[f];</span></span>
<span id="L424"><span class="lineNum">     424</span> <span class="tlaGNC">           8 : }</span></span>
<span id="L425"><span class="lineNum">     425</span> <span class="tlaGNC">           8 : </span></span>
<span id="L426"><span class="lineNum">     426</span> <span class="tlaGNC">           8 : /** @internal */</span></span>
<span id="L427"><span class="lineNum">     427</span> <span class="tlaGNC">           8 : export function characterCodeToRegularExpressionFlag(ch: CharacterCodes): RegularExpressionFlags | undefined {</span></span>
<span id="L428"><span class="lineNum">     428</span> <span class="tlaGNC">           8 :     return charCodeToRegExpFlag.get(ch);</span></span>
<span id="L429"><span class="lineNum">     429</span> <span class="tlaGNC">           8 : }</span></span>
<span id="L430"><span class="lineNum">     430</span> <span class="tlaGNC">           8 : </span></span>
<span id="L431"><span class="lineNum">     431</span> <span class="tlaGNC">           8 : /** @internal */</span></span>
<span id="L432"><span class="lineNum">     432</span> <span class="tlaGNC">           8 : export function computeLineStarts(text: string): number[] {</span></span>
<span id="L433"><span class="lineNum">     433</span> <span class="tlaGNC">           8 :     const result: number[] = [];</span></span>
<span id="L434"><span class="lineNum">     434</span> <span class="tlaGNC">           8 :     let pos = 0;</span></span>
<span id="L435"><span class="lineNum">     435</span> <span class="tlaGNC">           8 :     let lineStart = 0;</span></span>
<span id="L436"><span class="lineNum">     436</span> <span class="tlaGNC">           8 :     while (pos &lt; text.length) {</span></span>
<span id="L437"><span class="lineNum">     437</span> <span class="tlaGNC">           8 :         const ch = text.charCodeAt(pos);</span></span>
<span id="L438"><span class="lineNum">     438</span> <span class="tlaGNC">           8 :         pos++;</span></span>
<span id="L439"><span class="lineNum">     439</span> <span class="tlaGNC">           8 :         switch (ch) {</span></span>
<span id="L440"><span class="lineNum">     440</span> <span class="tlaGNC">           8 :             case CharacterCodes.carriageReturn:</span></span>
<span id="L441"><span class="lineNum">     441</span> <span class="tlaGNC">           8 :                 if (text.charCodeAt(pos) === CharacterCodes.lineFeed) {</span></span>
<span id="L442"><span class="lineNum">     442</span> <span class="tlaGNC">           8 :                     pos++;</span></span>
<span id="L443"><span class="lineNum">     443</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L444"><span class="lineNum">     444</span> <span class="tlaGNC">           8 :             // falls through</span></span>
<span id="L445"><span class="lineNum">     445</span> <span class="tlaGNC">           8 :             case CharacterCodes.lineFeed:</span></span>
<span id="L446"><span class="lineNum">     446</span> <span class="tlaGNC">           8 :                 result.push(lineStart);</span></span>
<span id="L447"><span class="lineNum">     447</span> <span class="tlaGNC">           8 :                 lineStart = pos;</span></span>
<span id="L448"><span class="lineNum">     448</span> <span class="tlaGNC">           8 :                 break;</span></span>
<span id="L449"><span class="lineNum">     449</span> <span class="tlaGNC">           8 :             default:</span></span>
<span id="L450"><span class="lineNum">     450</span> <span class="tlaGNC">           8 :                 if (ch &gt; CharacterCodes.maxAsciiCharacter &amp;&amp; isLineBreak(ch)) {</span></span>
<span id="L451"><span class="lineNum">     451</span> <span class="tlaGNC">           8 :                     result.push(lineStart);</span></span>
<span id="L452"><span class="lineNum">     452</span> <span class="tlaGNC">           8 :                     lineStart = pos;</span></span>
<span id="L453"><span class="lineNum">     453</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L454"><span class="lineNum">     454</span> <span class="tlaGNC">           8 :                 break;</span></span>
<span id="L455"><span class="lineNum">     455</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L456"><span class="lineNum">     456</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L457"><span class="lineNum">     457</span> <span class="tlaGNC">           8 :     result.push(lineStart);</span></span>
<span id="L458"><span class="lineNum">     458</span> <span class="tlaGNC">           8 :     return result;</span></span>
<span id="L459"><span class="lineNum">     459</span> <span class="tlaGNC">           8 : }</span></span>
<span id="L460"><span class="lineNum">     460</span> <span class="tlaGNC">           8 : </span></span>
<span id="L461"><span class="lineNum">     461</span> <span class="tlaGNC">           8 : export function getPositionOfLineAndCharacter(sourceFile: SourceFileLike, line: number, character: number): number;</span></span>
<span id="L462"><span class="lineNum">     462</span> <span class="tlaGNC">           8 : /** @internal */</span></span>
<span id="L463"><span class="lineNum">     463</span> <span class="tlaGNC">           8 : export function getPositionOfLineAndCharacter(sourceFile: SourceFileLike, line: number, character: number, allowEdits?: true): number; // eslint-disable-line @typescript-eslint/unified-signatures</span></span>
<span id="L464"><span class="lineNum">     464</span> <span class="tlaGNC">           8 : export function getPositionOfLineAndCharacter(sourceFile: SourceFileLike, line: number, character: number, allowEdits?: true): number {</span></span>
<span id="L465"><span class="lineNum">     465</span> <span class="tlaGNC">           8 :     return sourceFile.getPositionOfLineAndCharacter ?</span></span>
<span id="L466"><span class="lineNum">     466</span> <span class="tlaGNC">           8 :         sourceFile.getPositionOfLineAndCharacter(line, character, allowEdits) :</span></span>
<span id="L467"><span class="lineNum">     467</span> <span class="tlaGNC">           8 :         computePositionOfLineAndCharacter(getLineStarts(sourceFile), line, character, sourceFile.text, allowEdits);</span></span>
<span id="L468"><span class="lineNum">     468</span> <span class="tlaGNC">           8 : }</span></span>
<span id="L469"><span class="lineNum">     469</span> <span class="tlaGNC">           8 : </span></span>
<span id="L470"><span class="lineNum">     470</span> <span class="tlaGNC">           8 : /** @internal */</span></span>
<span id="L471"><span class="lineNum">     471</span> <span class="tlaGNC">           8 : export function computePositionOfLineAndCharacter(lineStarts: readonly number[], line: number, character: number, debugText?: string, allowEdits?: true): number {</span></span>
<span id="L472"><span class="lineNum">     472</span> <span class="tlaGNC">           8 :     if (line &lt; 0 || line &gt;= lineStarts.length) {</span></span>
<span id="L473"><span class="lineNum">     473</span> <span class="tlaGNC">           8 :         if (allowEdits) {</span></span>
<span id="L474"><span class="lineNum">     474</span> <span class="tlaGNC">           8 :             // Clamp line to nearest allowable value</span></span>
<span id="L475"><span class="lineNum">     475</span> <span class="tlaGNC">           8 :             line = line &lt; 0 ? 0 : line &gt;= lineStarts.length ? lineStarts.length - 1 : line;</span></span>
<span id="L476"><span class="lineNum">     476</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L477"><span class="lineNum">     477</span> <span class="tlaGNC">           8 :         else {</span></span>
<span id="L478"><span class="lineNum">     478</span> <span class="tlaGNC">           8 :             Debug.fail(`Bad line number. Line: ${line}, lineStarts.length: ${lineStarts.length} , line map is correct? ${debugText !== undefined ? arraysEqual(lineStarts, computeLineStarts(debugText)) : &quot;unknown&quot;}`);</span></span>
<span id="L479"><span class="lineNum">     479</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L480"><span class="lineNum">     480</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L481"><span class="lineNum">     481</span> <span class="tlaGNC">           8 : </span></span>
<span id="L482"><span class="lineNum">     482</span> <span class="tlaGNC">           8 :     const res = lineStarts[line] + character;</span></span>
<span id="L483"><span class="lineNum">     483</span> <span class="tlaGNC">           8 :     if (allowEdits) {</span></span>
<span id="L484"><span class="lineNum">     484</span> <span class="tlaGNC">           8 :         // Clamp to nearest allowable values to allow the underlying to be edited without crashing (accuracy is lost, instead)</span></span>
<span id="L485"><span class="lineNum">     485</span> <span class="tlaGNC">           8 :         // TODO: Somehow track edits between file as it was during the creation of sourcemap we have and the current file and</span></span>
<span id="L486"><span class="lineNum">     486</span> <span class="tlaGNC">           8 :         // apply them to the computed position to improve accuracy</span></span>
<span id="L487"><span class="lineNum">     487</span> <span class="tlaGNC">           8 :         return res &gt; lineStarts[line + 1] ? lineStarts[line + 1] : typeof debugText === &quot;string&quot; &amp;&amp; res &gt; debugText.length ? debugText.length : res;</span></span>
<span id="L488"><span class="lineNum">     488</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L489"><span class="lineNum">     489</span> <span class="tlaGNC">           8 :     if (line &lt; lineStarts.length - 1) {</span></span>
<span id="L490"><span class="lineNum">     490</span> <span class="tlaGNC">           8 :         Debug.assert(res &lt; lineStarts[line + 1]);</span></span>
<span id="L491"><span class="lineNum">     491</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L492"><span class="lineNum">     492</span> <span class="tlaGNC">           8 :     else if (debugText !== undefined) {</span></span>
<span id="L493"><span class="lineNum">     493</span> <span class="tlaGNC">           8 :         Debug.assert(res &lt;= debugText.length); // Allow single character overflow for trailing newline</span></span>
<span id="L494"><span class="lineNum">     494</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L495"><span class="lineNum">     495</span> <span class="tlaGNC">           8 :     return res;</span></span>
<span id="L496"><span class="lineNum">     496</span> <span class="tlaGNC">           8 : }</span></span>
<span id="L497"><span class="lineNum">     497</span> <span class="tlaGNC">           8 : </span></span>
<span id="L498"><span class="lineNum">     498</span> <span class="tlaGNC">           8 : /** @internal */</span></span>
<span id="L499"><span class="lineNum">     499</span> <span class="tlaGNC">           8 : export function getLineStarts(sourceFile: SourceFileLike): readonly number[] {</span></span>
<span id="L500"><span class="lineNum">     500</span> <span class="tlaGNC">           8 :     return sourceFile.lineMap || (sourceFile.lineMap = computeLineStarts(sourceFile.text));</span></span>
<span id="L501"><span class="lineNum">     501</span> <span class="tlaGNC">           8 : }</span></span>
<span id="L502"><span class="lineNum">     502</span> <span class="tlaGNC">           8 : </span></span>
<span id="L503"><span class="lineNum">     503</span> <span class="tlaGNC">           8 : /** @internal */</span></span>
<span id="L504"><span class="lineNum">     504</span> <span class="tlaGNC">           8 : export function computeLineAndCharacterOfPosition(lineStarts: readonly number[], position: number): LineAndCharacter {</span></span>
<span id="L505"><span class="lineNum">     505</span> <span class="tlaGNC">           8 :     const lineNumber = computeLineOfPosition(lineStarts, position);</span></span>
<span id="L506"><span class="lineNum">     506</span> <span class="tlaGNC">           8 :     return {</span></span>
<span id="L507"><span class="lineNum">     507</span> <span class="tlaGNC">           8 :         line: lineNumber,</span></span>
<span id="L508"><span class="lineNum">     508</span> <span class="tlaGNC">           8 :         character: position - lineStarts[lineNumber],</span></span>
<span id="L509"><span class="lineNum">     509</span> <span class="tlaGNC">           8 :     };</span></span>
<span id="L510"><span class="lineNum">     510</span> <span class="tlaGNC">           8 : }</span></span>
<span id="L511"><span class="lineNum">     511</span> <span class="tlaGNC">           8 : </span></span>
<span id="L512"><span class="lineNum">     512</span> <span class="tlaGNC">           8 : /**</span></span>
<span id="L513"><span class="lineNum">     513</span> <span class="tlaGNC">           8 :  * @internal</span></span>
<span id="L514"><span class="lineNum">     514</span> <span class="tlaGNC">           8 :  * We assume the first line starts at position 0 and 'position' is non-negative.</span></span>
<span id="L515"><span class="lineNum">     515</span> <span class="tlaGNC">           8 :  */</span></span>
<span id="L516"><span class="lineNum">     516</span> <span class="tlaGNC">           8 : export function computeLineOfPosition(lineStarts: readonly number[], position: number, lowerBound?: number) {</span></span>
<span id="L517"><span class="lineNum">     517</span> <span class="tlaGNC">           8 :     let lineNumber = binarySearch(lineStarts, position, identity, compareValues, lowerBound);</span></span>
<span id="L518"><span class="lineNum">     518</span> <span class="tlaGNC">           8 :     if (lineNumber &lt; 0) {</span></span>
<span id="L519"><span class="lineNum">     519</span> <span class="tlaGNC">           8 :         // If the actual position was not found,</span></span>
<span id="L520"><span class="lineNum">     520</span> <span class="tlaGNC">           8 :         // the binary search returns the 2's-complement of the next line start</span></span>
<span id="L521"><span class="lineNum">     521</span> <span class="tlaGNC">           8 :         // e.g. if the line starts at [5, 10, 23, 80] and the position requested was 20</span></span>
<span id="L522"><span class="lineNum">     522</span> <span class="tlaGNC">           8 :         // then the search will return -2.</span></span>
<span id="L523"><span class="lineNum">     523</span> <span class="tlaGNC">           8 :         //</span></span>
<span id="L524"><span class="lineNum">     524</span> <span class="tlaGNC">           8 :         // We want the index of the previous line start, so we subtract 1.</span></span>
<span id="L525"><span class="lineNum">     525</span> <span class="tlaGNC">           8 :         // Review 2's-complement if this is confusing.</span></span>
<span id="L526"><span class="lineNum">     526</span> <span class="tlaGNC">           8 :         lineNumber = ~lineNumber - 1;</span></span>
<span id="L527"><span class="lineNum">     527</span> <span class="tlaGNC">           8 :         Debug.assert(lineNumber !== -1, &quot;position cannot precede the beginning of the file&quot;);</span></span>
<span id="L528"><span class="lineNum">     528</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L529"><span class="lineNum">     529</span> <span class="tlaGNC">           8 :     return lineNumber;</span></span>
<span id="L530"><span class="lineNum">     530</span> <span class="tlaGNC">           8 : }</span></span>
<span id="L531"><span class="lineNum">     531</span> <span class="tlaGNC">           8 : </span></span>
<span id="L532"><span class="lineNum">     532</span> <span class="tlaGNC">           8 : /** @internal */</span></span>
<span id="L533"><span class="lineNum">     533</span> <span class="tlaGNC">           8 : export function getLinesBetweenPositions(sourceFile: SourceFileLike, pos1: number, pos2: number) {</span></span>
<span id="L534"><span class="lineNum">     534</span> <span class="tlaGNC">           8 :     if (pos1 === pos2) return 0;</span></span>
<span id="L535"><span class="lineNum">     535</span> <span class="tlaGNC">           8 :     const lineStarts = getLineStarts(sourceFile);</span></span>
<span id="L536"><span class="lineNum">     536</span> <span class="tlaGNC">           8 :     const lower = Math.min(pos1, pos2);</span></span>
<span id="L537"><span class="lineNum">     537</span> <span class="tlaGNC">           8 :     const isNegative = lower === pos2;</span></span>
<span id="L538"><span class="lineNum">     538</span> <span class="tlaGNC">           8 :     const upper = isNegative ? pos1 : pos2;</span></span>
<span id="L539"><span class="lineNum">     539</span> <span class="tlaGNC">           8 :     const lowerLine = computeLineOfPosition(lineStarts, lower);</span></span>
<span id="L540"><span class="lineNum">     540</span> <span class="tlaGNC">           8 :     const upperLine = computeLineOfPosition(lineStarts, upper, lowerLine);</span></span>
<span id="L541"><span class="lineNum">     541</span> <span class="tlaGNC">           8 :     return isNegative ? lowerLine - upperLine : upperLine - lowerLine;</span></span>
<span id="L542"><span class="lineNum">     542</span> <span class="tlaGNC">           8 : }</span></span>
<span id="L543"><span class="lineNum">     543</span> <span class="tlaGNC">           8 : </span></span>
<span id="L544"><span class="lineNum">     544</span> <span class="tlaGNC">           8 : export function getLineAndCharacterOfPosition(sourceFile: SourceFileLike, position: number): LineAndCharacter {</span></span>
<span id="L545"><span class="lineNum">     545</span> <span class="tlaGNC">           8 :     return computeLineAndCharacterOfPosition(getLineStarts(sourceFile), position);</span></span>
<span id="L546"><span class="lineNum">     546</span> <span class="tlaGNC">           8 : }</span></span>
<span id="L547"><span class="lineNum">     547</span> <span class="tlaGNC">           8 : </span></span>
<span id="L548"><span class="lineNum">     548</span> <span class="tlaGNC">           8 : export function isWhiteSpaceLike(ch: number): boolean {</span></span>
<span id="L549"><span class="lineNum">     549</span> <span class="tlaGNC">           8 :     return isWhiteSpaceSingleLine(ch) || isLineBreak(ch);</span></span>
<span id="L550"><span class="lineNum">     550</span> <span class="tlaGNC">           8 : }</span></span>
<span id="L551"><span class="lineNum">     551</span> <span class="tlaGNC">           8 : </span></span>
<span id="L552"><span class="lineNum">     552</span> <span class="tlaGNC">           8 : /** Does not include line breaks. For that, see isWhiteSpaceLike. */</span></span>
<span id="L553"><span class="lineNum">     553</span> <span class="tlaGNC">           8 : export function isWhiteSpaceSingleLine(ch: number): boolean {</span></span>
<span id="L554"><span class="lineNum">     554</span> <span class="tlaGNC">           8 :     // Note: nextLine is in the Zs space, and should be considered to be a whitespace.</span></span>
<span id="L555"><span class="lineNum">     555</span> <span class="tlaGNC">           8 :     // It is explicitly not a line-break as it isn't in the exact set specified by EcmaScript.</span></span>
<span id="L556"><span class="lineNum">     556</span> <span class="tlaGNC">           8 :     return ch === CharacterCodes.space ||</span></span>
<span id="L557"><span class="lineNum">     557</span> <span class="tlaGNC">           8 :         ch === CharacterCodes.tab ||</span></span>
<span id="L558"><span class="lineNum">     558</span> <span class="tlaGNC">           8 :         ch === CharacterCodes.verticalTab ||</span></span>
<span id="L559"><span class="lineNum">     559</span> <span class="tlaGNC">           8 :         ch === CharacterCodes.formFeed ||</span></span>
<span id="L560"><span class="lineNum">     560</span> <span class="tlaGNC">           8 :         ch === CharacterCodes.nonBreakingSpace ||</span></span>
<span id="L561"><span class="lineNum">     561</span> <span class="tlaGNC">           8 :         ch === CharacterCodes.nextLine ||</span></span>
<span id="L562"><span class="lineNum">     562</span> <span class="tlaGNC">           8 :         ch === CharacterCodes.ogham ||</span></span>
<span id="L563"><span class="lineNum">     563</span> <span class="tlaGNC">           8 :         ch &gt;= CharacterCodes.enQuad &amp;&amp; ch &lt;= CharacterCodes.zeroWidthSpace ||</span></span>
<span id="L564"><span class="lineNum">     564</span> <span class="tlaGNC">           8 :         ch === CharacterCodes.narrowNoBreakSpace ||</span></span>
<span id="L565"><span class="lineNum">     565</span> <span class="tlaGNC">           8 :         ch === CharacterCodes.mathematicalSpace ||</span></span>
<span id="L566"><span class="lineNum">     566</span> <span class="tlaGNC">           8 :         ch === CharacterCodes.ideographicSpace ||</span></span>
<span id="L567"><span class="lineNum">     567</span> <span class="tlaGNC">           8 :         ch === CharacterCodes.byteOrderMark;</span></span>
<span id="L568"><span class="lineNum">     568</span> <span class="tlaGNC">           8 : }</span></span>
<span id="L569"><span class="lineNum">     569</span> <span class="tlaGNC">           8 : </span></span>
<span id="L570"><span class="lineNum">     570</span> <span class="tlaGNC">           8 : export function isLineBreak(ch: number): boolean {</span></span>
<span id="L571"><span class="lineNum">     571</span> <span class="tlaGNC">           8 :     // ES5 7.3:</span></span>
<span id="L572"><span class="lineNum">     572</span> <span class="tlaGNC">           8 :     // The ECMAScript line terminator characters are listed in Table 3.</span></span>
<span id="L573"><span class="lineNum">     573</span> <span class="tlaGNC">           8 :     //     Table 3: Line Terminator Characters</span></span>
<span id="L574"><span class="lineNum">     574</span> <span class="tlaGNC">           8 :     //     Code Unit Value     Name                    Formal Name</span></span>
<span id="L575"><span class="lineNum">     575</span> <span class="tlaGNC">           8 :     //     \u000A              Line Feed               &lt;LF&gt;</span></span>
<span id="L576"><span class="lineNum">     576</span> <span class="tlaGNC">           8 :     //     \u000D              Carriage Return         &lt;CR&gt;</span></span>
<span id="L577"><span class="lineNum">     577</span> <span class="tlaGNC">           8 :     //     \u2028              Line separator          &lt;LS&gt;</span></span>
<span id="L578"><span class="lineNum">     578</span> <span class="tlaGNC">           8 :     //     \u2029              Paragraph separator     &lt;PS&gt;</span></span>
<span id="L579"><span class="lineNum">     579</span> <span class="tlaGNC">           8 :     // Only the characters in Table 3 are treated as line terminators. Other new line or line</span></span>
<span id="L580"><span class="lineNum">     580</span> <span class="tlaGNC">           8 :     // breaking characters are treated as white space but not as line terminators.</span></span>
<span id="L581"><span class="lineNum">     581</span> <span class="tlaGNC">           8 : </span></span>
<span id="L582"><span class="lineNum">     582</span> <span class="tlaGNC">           8 :     return ch === CharacterCodes.lineFeed ||</span></span>
<span id="L583"><span class="lineNum">     583</span> <span class="tlaGNC">           8 :         ch === CharacterCodes.carriageReturn ||</span></span>
<span id="L584"><span class="lineNum">     584</span> <span class="tlaGNC">           8 :         ch === CharacterCodes.lineSeparator ||</span></span>
<span id="L585"><span class="lineNum">     585</span> <span class="tlaGNC">           8 :         ch === CharacterCodes.paragraphSeparator;</span></span>
<span id="L586"><span class="lineNum">     586</span> <span class="tlaGNC">           8 : }</span></span>
<span id="L587"><span class="lineNum">     587</span> <span class="tlaGNC">           8 : </span></span>
<span id="L588"><span class="lineNum">     588</span> <span class="tlaGNC">           8 : function isDigit(ch: number): boolean {</span></span>
<span id="L589"><span class="lineNum">     589</span> <span class="tlaGNC">           8 :     return ch &gt;= CharacterCodes._0 &amp;&amp; ch &lt;= CharacterCodes._9;</span></span>
<span id="L590"><span class="lineNum">     590</span> <span class="tlaGNC">           8 : }</span></span>
<span id="L591"><span class="lineNum">     591</span> <span class="tlaGNC">           8 : </span></span>
<span id="L592"><span class="lineNum">     592</span> <span class="tlaGNC">           8 : function isHexDigit(ch: number): boolean {</span></span>
<span id="L593"><span class="lineNum">     593</span> <span class="tlaGNC">           8 :     return isDigit(ch) || ch &gt;= CharacterCodes.A &amp;&amp; ch &lt;= CharacterCodes.F || ch &gt;= CharacterCodes.a &amp;&amp; ch &lt;= CharacterCodes.f;</span></span>
<span id="L594"><span class="lineNum">     594</span> <span class="tlaGNC">           8 : }</span></span>
<span id="L595"><span class="lineNum">     595</span> <span class="tlaGNC">           8 : </span></span>
<span id="L596"><span class="lineNum">     596</span> <span class="tlaGNC">           8 : function isASCIILetter(ch: number): boolean {</span></span>
<span id="L597"><span class="lineNum">     597</span> <span class="tlaGNC">           8 :     return ch &gt;= CharacterCodes.A &amp;&amp; ch &lt;= CharacterCodes.Z || ch &gt;= CharacterCodes.a &amp;&amp; ch &lt;= CharacterCodes.z;</span></span>
<span id="L598"><span class="lineNum">     598</span> <span class="tlaGNC">           8 : }</span></span>
<span id="L599"><span class="lineNum">     599</span> <span class="tlaGNC">           8 : </span></span>
<span id="L600"><span class="lineNum">     600</span> <span class="tlaGNC">           8 : // Section 6.1.4</span></span>
<span id="L601"><span class="lineNum">     601</span> <span class="tlaGNC">           8 : function isWordCharacter(ch: number): boolean {</span></span>
<span id="L602"><span class="lineNum">     602</span> <span class="tlaGNC">           8 :     return isASCIILetter(ch) || isDigit(ch) || ch === CharacterCodes._;</span></span>
<span id="L603"><span class="lineNum">     603</span> <span class="tlaGNC">           8 : }</span></span>
<span id="L604"><span class="lineNum">     604</span> <span class="tlaGNC">           8 : </span></span>
<span id="L605"><span class="lineNum">     605</span> <span class="tlaGNC">           8 : /** @internal */</span></span>
<span id="L606"><span class="lineNum">     606</span> <span class="tlaGNC">           8 : export function isOctalDigit(ch: number): boolean {</span></span>
<span id="L607"><span class="lineNum">     607</span> <span class="tlaGNC">           8 :     return ch &gt;= CharacterCodes._0 &amp;&amp; ch &lt;= CharacterCodes._7;</span></span>
<span id="L608"><span class="lineNum">     608</span> <span class="tlaGNC">           8 : }</span></span>
<span id="L609"><span class="lineNum">     609</span> <span class="tlaGNC">           8 : </span></span>
<span id="L610"><span class="lineNum">     610</span> <span class="tlaGNC">           8 : export function couldStartTrivia(text: string, pos: number): boolean {</span></span>
<span id="L611"><span class="lineNum">     611</span> <span class="tlaGNC">           8 :     // Keep in sync with skipTrivia</span></span>
<span id="L612"><span class="lineNum">     612</span> <span class="tlaGNC">           8 :     const ch = text.charCodeAt(pos);</span></span>
<span id="L613"><span class="lineNum">     613</span> <span class="tlaGNC">           8 :     switch (ch) {</span></span>
<span id="L614"><span class="lineNum">     614</span> <span class="tlaGNC">           8 :         case CharacterCodes.carriageReturn:</span></span>
<span id="L615"><span class="lineNum">     615</span> <span class="tlaGNC">           8 :         case CharacterCodes.lineFeed:</span></span>
<span id="L616"><span class="lineNum">     616</span> <span class="tlaGNC">           8 :         case CharacterCodes.tab:</span></span>
<span id="L617"><span class="lineNum">     617</span> <span class="tlaGNC">           8 :         case CharacterCodes.verticalTab:</span></span>
<span id="L618"><span class="lineNum">     618</span> <span class="tlaGNC">           8 :         case CharacterCodes.formFeed:</span></span>
<span id="L619"><span class="lineNum">     619</span> <span class="tlaGNC">           8 :         case CharacterCodes.space:</span></span>
<span id="L620"><span class="lineNum">     620</span> <span class="tlaGNC">           8 :         case CharacterCodes.slash:</span></span>
<span id="L621"><span class="lineNum">     621</span> <span class="tlaGNC">           8 :         // starts of normal trivia</span></span>
<span id="L622"><span class="lineNum">     622</span> <span class="tlaGNC">           8 :         // falls through</span></span>
<span id="L623"><span class="lineNum">     623</span> <span class="tlaGNC">           8 :         case CharacterCodes.lessThan:</span></span>
<span id="L624"><span class="lineNum">     624</span> <span class="tlaGNC">           8 :         case CharacterCodes.bar:</span></span>
<span id="L625"><span class="lineNum">     625</span> <span class="tlaGNC">           8 :         case CharacterCodes.equals:</span></span>
<span id="L626"><span class="lineNum">     626</span> <span class="tlaGNC">           8 :         case CharacterCodes.greaterThan:</span></span>
<span id="L627"><span class="lineNum">     627</span> <span class="tlaGNC">           8 :             // Starts of conflict marker trivia</span></span>
<span id="L628"><span class="lineNum">     628</span> <span class="tlaGNC">           8 :             return true;</span></span>
<span id="L629"><span class="lineNum">     629</span> <span class="tlaGNC">           8 :         case CharacterCodes.hash:</span></span>
<span id="L630"><span class="lineNum">     630</span> <span class="tlaGNC">           8 :             // Only if its the beginning can we have #! trivia</span></span>
<span id="L631"><span class="lineNum">     631</span> <span class="tlaGNC">           8 :             return pos === 0;</span></span>
<span id="L632"><span class="lineNum">     632</span> <span class="tlaGNC">           8 :         default:</span></span>
<span id="L633"><span class="lineNum">     633</span> <span class="tlaGNC">           8 :             return ch &gt; CharacterCodes.maxAsciiCharacter;</span></span>
<span id="L634"><span class="lineNum">     634</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L635"><span class="lineNum">     635</span> <span class="tlaGNC">           8 : }</span></span>
<span id="L636"><span class="lineNum">     636</span> <span class="tlaGNC">           8 : </span></span>
<span id="L637"><span class="lineNum">     637</span> <span class="tlaGNC">           8 : /** @internal */</span></span>
<span id="L638"><span class="lineNum">     638</span> <span class="tlaGNC">           8 : export function skipTrivia(text: string, pos: number, stopAfterLineBreak?: boolean, stopAtComments?: boolean, inJSDoc?: boolean): number {</span></span>
<span id="L639"><span class="lineNum">     639</span> <span class="tlaGNC">           8 :     if (positionIsSynthesized(pos)) {</span></span>
<span id="L640"><span class="lineNum">     640</span> <span class="tlaGNC">           8 :         return pos;</span></span>
<span id="L641"><span class="lineNum">     641</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L642"><span class="lineNum">     642</span> <span class="tlaGNC">           8 : </span></span>
<span id="L643"><span class="lineNum">     643</span> <span class="tlaGNC">           8 :     let canConsumeStar = false;</span></span>
<span id="L644"><span class="lineNum">     644</span> <span class="tlaGNC">           8 :     // Keep in sync with couldStartTrivia</span></span>
<span id="L645"><span class="lineNum">     645</span> <span class="tlaGNC">           8 :     while (true) {</span></span>
<span id="L646"><span class="lineNum">     646</span> <span class="tlaGNC">           8 :         const ch = text.charCodeAt(pos);</span></span>
<span id="L647"><span class="lineNum">     647</span> <span class="tlaGNC">           8 :         switch (ch) {</span></span>
<span id="L648"><span class="lineNum">     648</span> <span class="tlaGNC">           8 :             case CharacterCodes.carriageReturn:</span></span>
<span id="L649"><span class="lineNum">     649</span> <span class="tlaGNC">           8 :                 if (text.charCodeAt(pos + 1) === CharacterCodes.lineFeed) {</span></span>
<span id="L650"><span class="lineNum">     650</span> <span class="tlaGNC">           8 :                     pos++;</span></span>
<span id="L651"><span class="lineNum">     651</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L652"><span class="lineNum">     652</span> <span class="tlaGNC">           8 :             // falls through</span></span>
<span id="L653"><span class="lineNum">     653</span> <span class="tlaGNC">           8 :             case CharacterCodes.lineFeed:</span></span>
<span id="L654"><span class="lineNum">     654</span> <span class="tlaGNC">           8 :                 pos++;</span></span>
<span id="L655"><span class="lineNum">     655</span> <span class="tlaGNC">           8 :                 if (stopAfterLineBreak) {</span></span>
<span id="L656"><span class="lineNum">     656</span> <span class="tlaGNC">           8 :                     return pos;</span></span>
<span id="L657"><span class="lineNum">     657</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L658"><span class="lineNum">     658</span> <span class="tlaGNC">           8 :                 canConsumeStar = !!inJSDoc;</span></span>
<span id="L659"><span class="lineNum">     659</span> <span class="tlaGNC">           8 :                 continue;</span></span>
<span id="L660"><span class="lineNum">     660</span> <span class="tlaGNC">           8 :             case CharacterCodes.tab:</span></span>
<span id="L661"><span class="lineNum">     661</span> <span class="tlaGNC">           8 :             case CharacterCodes.verticalTab:</span></span>
<span id="L662"><span class="lineNum">     662</span> <span class="tlaGNC">           8 :             case CharacterCodes.formFeed:</span></span>
<span id="L663"><span class="lineNum">     663</span> <span class="tlaGNC">           8 :             case CharacterCodes.space:</span></span>
<span id="L664"><span class="lineNum">     664</span> <span class="tlaGNC">           8 :                 pos++;</span></span>
<span id="L665"><span class="lineNum">     665</span> <span class="tlaGNC">           8 :                 continue;</span></span>
<span id="L666"><span class="lineNum">     666</span> <span class="tlaGNC">           8 :             case CharacterCodes.slash:</span></span>
<span id="L667"><span class="lineNum">     667</span> <span class="tlaGNC">           8 :                 if (stopAtComments) {</span></span>
<span id="L668"><span class="lineNum">     668</span> <span class="tlaGNC">           8 :                     break;</span></span>
<span id="L669"><span class="lineNum">     669</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L670"><span class="lineNum">     670</span> <span class="tlaGNC">           8 :                 if (text.charCodeAt(pos + 1) === CharacterCodes.slash) {</span></span>
<span id="L671"><span class="lineNum">     671</span> <span class="tlaGNC">           8 :                     pos += 2;</span></span>
<span id="L672"><span class="lineNum">     672</span> <span class="tlaGNC">           8 :                     while (pos &lt; text.length) {</span></span>
<span id="L673"><span class="lineNum">     673</span> <span class="tlaGNC">           8 :                         if (isLineBreak(text.charCodeAt(pos))) {</span></span>
<span id="L674"><span class="lineNum">     674</span> <span class="tlaGNC">           8 :                             break;</span></span>
<span id="L675"><span class="lineNum">     675</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L676"><span class="lineNum">     676</span> <span class="tlaGNC">           8 :                         pos++;</span></span>
<span id="L677"><span class="lineNum">     677</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L678"><span class="lineNum">     678</span> <span class="tlaGNC">           8 :                     canConsumeStar = false;</span></span>
<span id="L679"><span class="lineNum">     679</span> <span class="tlaGNC">           8 :                     continue;</span></span>
<span id="L680"><span class="lineNum">     680</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L681"><span class="lineNum">     681</span> <span class="tlaGNC">           8 :                 if (text.charCodeAt(pos + 1) === CharacterCodes.asterisk) {</span></span>
<span id="L682"><span class="lineNum">     682</span> <span class="tlaGNC">           8 :                     pos += 2;</span></span>
<span id="L683"><span class="lineNum">     683</span> <span class="tlaGNC">           8 :                     while (pos &lt; text.length) {</span></span>
<span id="L684"><span class="lineNum">     684</span> <span class="tlaGNC">           8 :                         if (text.charCodeAt(pos) === CharacterCodes.asterisk &amp;&amp; text.charCodeAt(pos + 1) === CharacterCodes.slash) {</span></span>
<span id="L685"><span class="lineNum">     685</span> <span class="tlaGNC">           8 :                             pos += 2;</span></span>
<span id="L686"><span class="lineNum">     686</span> <span class="tlaGNC">           8 :                             break;</span></span>
<span id="L687"><span class="lineNum">     687</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L688"><span class="lineNum">     688</span> <span class="tlaGNC">           8 :                         pos++;</span></span>
<span id="L689"><span class="lineNum">     689</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L690"><span class="lineNum">     690</span> <span class="tlaGNC">           8 :                     canConsumeStar = false;</span></span>
<span id="L691"><span class="lineNum">     691</span> <span class="tlaGNC">           8 :                     continue;</span></span>
<span id="L692"><span class="lineNum">     692</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L693"><span class="lineNum">     693</span> <span class="tlaGNC">           8 :                 break;</span></span>
<span id="L694"><span class="lineNum">     694</span> <span class="tlaGNC">           8 : </span></span>
<span id="L695"><span class="lineNum">     695</span> <span class="tlaGNC">           8 :             case CharacterCodes.lessThan:</span></span>
<span id="L696"><span class="lineNum">     696</span> <span class="tlaGNC">           8 :             case CharacterCodes.bar:</span></span>
<span id="L697"><span class="lineNum">     697</span> <span class="tlaGNC">           8 :             case CharacterCodes.equals:</span></span>
<span id="L698"><span class="lineNum">     698</span> <span class="tlaGNC">           8 :             case CharacterCodes.greaterThan:</span></span>
<span id="L699"><span class="lineNum">     699</span> <span class="tlaGNC">           8 :                 if (isConflictMarkerTrivia(text, pos)) {</span></span>
<span id="L700"><span class="lineNum">     700</span> <span class="tlaGNC">           8 :                     pos = scanConflictMarkerTrivia(text, pos);</span></span>
<span id="L701"><span class="lineNum">     701</span> <span class="tlaGNC">           8 :                     canConsumeStar = false;</span></span>
<span id="L702"><span class="lineNum">     702</span> <span class="tlaGNC">           8 :                     continue;</span></span>
<span id="L703"><span class="lineNum">     703</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L704"><span class="lineNum">     704</span> <span class="tlaGNC">           8 :                 break;</span></span>
<span id="L705"><span class="lineNum">     705</span> <span class="tlaGNC">           8 : </span></span>
<span id="L706"><span class="lineNum">     706</span> <span class="tlaGNC">           8 :             case CharacterCodes.hash:</span></span>
<span id="L707"><span class="lineNum">     707</span> <span class="tlaGNC">           8 :                 if (pos === 0 &amp;&amp; isShebangTrivia(text, pos)) {</span></span>
<span id="L708"><span class="lineNum">     708</span> <span class="tlaGNC">           8 :                     pos = scanShebangTrivia(text, pos);</span></span>
<span id="L709"><span class="lineNum">     709</span> <span class="tlaGNC">           8 :                     canConsumeStar = false;</span></span>
<span id="L710"><span class="lineNum">     710</span> <span class="tlaGNC">           8 :                     continue;</span></span>
<span id="L711"><span class="lineNum">     711</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L712"><span class="lineNum">     712</span> <span class="tlaGNC">           8 :                 break;</span></span>
<span id="L713"><span class="lineNum">     713</span> <span class="tlaGNC">           8 : </span></span>
<span id="L714"><span class="lineNum">     714</span> <span class="tlaGNC">           8 :             case CharacterCodes.asterisk:</span></span>
<span id="L715"><span class="lineNum">     715</span> <span class="tlaGNC">           8 :                 if (canConsumeStar) {</span></span>
<span id="L716"><span class="lineNum">     716</span> <span class="tlaGNC">           8 :                     pos++;</span></span>
<span id="L717"><span class="lineNum">     717</span> <span class="tlaGNC">           8 :                     canConsumeStar = false;</span></span>
<span id="L718"><span class="lineNum">     718</span> <span class="tlaGNC">           8 :                     continue;</span></span>
<span id="L719"><span class="lineNum">     719</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L720"><span class="lineNum">     720</span> <span class="tlaGNC">           8 :                 break;</span></span>
<span id="L721"><span class="lineNum">     721</span> <span class="tlaGNC">           8 : </span></span>
<span id="L722"><span class="lineNum">     722</span> <span class="tlaGNC">           8 :             default:</span></span>
<span id="L723"><span class="lineNum">     723</span> <span class="tlaGNC">           8 :                 if (ch &gt; CharacterCodes.maxAsciiCharacter &amp;&amp; (isWhiteSpaceLike(ch))) {</span></span>
<span id="L724"><span class="lineNum">     724</span> <span class="tlaGNC">           8 :                     pos++;</span></span>
<span id="L725"><span class="lineNum">     725</span> <span class="tlaGNC">           8 :                     continue;</span></span>
<span id="L726"><span class="lineNum">     726</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L727"><span class="lineNum">     727</span> <span class="tlaGNC">           8 :                 break;</span></span>
<span id="L728"><span class="lineNum">     728</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L729"><span class="lineNum">     729</span> <span class="tlaGNC">           8 :         return pos;</span></span>
<span id="L730"><span class="lineNum">     730</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L731"><span class="lineNum">     731</span> <span class="tlaGNC">           8 : }</span></span>
<span id="L732"><span class="lineNum">     732</span> <span class="tlaGNC">           8 : </span></span>
<span id="L733"><span class="lineNum">     733</span> <span class="tlaGNC">           8 : // All conflict markers consist of the same character repeated seven times.  If it is</span></span>
<span id="L734"><span class="lineNum">     734</span> <span class="tlaGNC">           8 : // a &lt;&lt;&lt;&lt;&lt;&lt;&lt; or &gt;&gt;&gt;&gt;&gt;&gt;&gt; marker then it is also followed by a space.</span></span>
<span id="L735"><span class="lineNum">     735</span> <span class="tlaGNC">           8 : const mergeConflictMarkerLength = &quot;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;.length;</span></span>
<span id="L736"><span class="lineNum">     736</span> <span class="tlaGNC">           8 : </span></span>
<span id="L737"><span class="lineNum">     737</span> <span class="tlaGNC">           8 : function isConflictMarkerTrivia(text: string, pos: number) {</span></span>
<span id="L738"><span class="lineNum">     738</span> <span class="tlaGNC">           8 :     Debug.assert(pos &gt;= 0);</span></span>
<span id="L739"><span class="lineNum">     739</span> <span class="tlaGNC">           8 : </span></span>
<span id="L740"><span class="lineNum">     740</span> <span class="tlaGNC">           8 :     // Conflict markers must be at the start of a line.</span></span>
<span id="L741"><span class="lineNum">     741</span> <span class="tlaGNC">           8 :     if (pos === 0 || isLineBreak(text.charCodeAt(pos - 1))) {</span></span>
<span id="L742"><span class="lineNum">     742</span> <span class="tlaGNC">           8 :         const ch = text.charCodeAt(pos);</span></span>
<span id="L743"><span class="lineNum">     743</span> <span class="tlaGNC">           8 : </span></span>
<span id="L744"><span class="lineNum">     744</span> <span class="tlaGNC">           8 :         if ((pos + mergeConflictMarkerLength) &lt; text.length) {</span></span>
<span id="L745"><span class="lineNum">     745</span> <span class="tlaGNC">           8 :             for (let i = 0; i &lt; mergeConflictMarkerLength; i++) {</span></span>
<span id="L746"><span class="lineNum">     746</span> <span class="tlaGNC">           8 :                 if (text.charCodeAt(pos + i) !== ch) {</span></span>
<span id="L747"><span class="lineNum">     747</span> <span class="tlaGNC">           8 :                     return false;</span></span>
<span id="L748"><span class="lineNum">     748</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L749"><span class="lineNum">     749</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L750"><span class="lineNum">     750</span> <span class="tlaGNC">           8 : </span></span>
<span id="L751"><span class="lineNum">     751</span> <span class="tlaGNC">           8 :             return ch === CharacterCodes.equals ||</span></span>
<span id="L752"><span class="lineNum">     752</span> <span class="tlaGNC">           8 :                 text.charCodeAt(pos + mergeConflictMarkerLength) === CharacterCodes.space;</span></span>
<span id="L753"><span class="lineNum">     753</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L754"><span class="lineNum">     754</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L755"><span class="lineNum">     755</span> <span class="tlaGNC">           8 : </span></span>
<span id="L756"><span class="lineNum">     756</span> <span class="tlaGNC">           8 :     return false;</span></span>
<span id="L757"><span class="lineNum">     757</span> <span class="tlaGNC">           8 : }</span></span>
<span id="L758"><span class="lineNum">     758</span> <span class="tlaGNC">           8 : </span></span>
<span id="L759"><span class="lineNum">     759</span> <span class="tlaGNC">           8 : function scanConflictMarkerTrivia(text: string, pos: number, error?: (diag: DiagnosticMessage, pos?: number, len?: number) =&gt; void) {</span></span>
<span id="L760"><span class="lineNum">     760</span> <span class="tlaGNC">           8 :     if (error) {</span></span>
<span id="L761"><span class="lineNum">     761</span> <span class="tlaGNC">           8 :         error(Diagnostics.Merge_conflict_marker_encountered, pos, mergeConflictMarkerLength);</span></span>
<span id="L762"><span class="lineNum">     762</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L763"><span class="lineNum">     763</span> <span class="tlaGNC">           8 : </span></span>
<span id="L764"><span class="lineNum">     764</span> <span class="tlaGNC">           8 :     const ch = text.charCodeAt(pos);</span></span>
<span id="L765"><span class="lineNum">     765</span> <span class="tlaGNC">           8 :     const len = text.length;</span></span>
<span id="L766"><span class="lineNum">     766</span> <span class="tlaGNC">           8 : </span></span>
<span id="L767"><span class="lineNum">     767</span> <span class="tlaGNC">           8 :     if (ch === CharacterCodes.lessThan || ch === CharacterCodes.greaterThan) {</span></span>
<span id="L768"><span class="lineNum">     768</span> <span class="tlaGNC">           8 :         while (pos &lt; len &amp;&amp; !isLineBreak(text.charCodeAt(pos))) {</span></span>
<span id="L769"><span class="lineNum">     769</span> <span class="tlaGNC">           8 :             pos++;</span></span>
<span id="L770"><span class="lineNum">     770</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L771"><span class="lineNum">     771</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L772"><span class="lineNum">     772</span> <span class="tlaGNC">           8 :     else {</span></span>
<span id="L773"><span class="lineNum">     773</span> <span class="tlaGNC">           8 :         Debug.assert(ch === CharacterCodes.bar || ch === CharacterCodes.equals);</span></span>
<span id="L774"><span class="lineNum">     774</span> <span class="tlaGNC">           8 :         // Consume everything from the start of a ||||||| or ======= marker to the start</span></span>
<span id="L775"><span class="lineNum">     775</span> <span class="tlaGNC">           8 :         // of the next ======= or &gt;&gt;&gt;&gt;&gt;&gt;&gt; marker.</span></span>
<span id="L776"><span class="lineNum">     776</span> <span class="tlaGNC">           8 :         while (pos &lt; len) {</span></span>
<span id="L777"><span class="lineNum">     777</span> <span class="tlaGNC">           8 :             const currentChar = text.charCodeAt(pos);</span></span>
<span id="L778"><span class="lineNum">     778</span> <span class="tlaGNC">           8 :             if ((currentChar === CharacterCodes.equals || currentChar === CharacterCodes.greaterThan) &amp;&amp; currentChar !== ch &amp;&amp; isConflictMarkerTrivia(text, pos)) {</span></span>
<span id="L779"><span class="lineNum">     779</span> <span class="tlaGNC">           8 :                 break;</span></span>
<span id="L780"><span class="lineNum">     780</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L781"><span class="lineNum">     781</span> <span class="tlaGNC">           8 : </span></span>
<span id="L782"><span class="lineNum">     782</span> <span class="tlaGNC">           8 :             pos++;</span></span>
<span id="L783"><span class="lineNum">     783</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L784"><span class="lineNum">     784</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L785"><span class="lineNum">     785</span> <span class="tlaGNC">           8 : </span></span>
<span id="L786"><span class="lineNum">     786</span> <span class="tlaGNC">           8 :     return pos;</span></span>
<span id="L787"><span class="lineNum">     787</span> <span class="tlaGNC">           8 : }</span></span>
<span id="L788"><span class="lineNum">     788</span> <span class="tlaGNC">           8 : </span></span>
<span id="L789"><span class="lineNum">     789</span> <span class="tlaGNC">           8 : const shebangTriviaRegex = /^#!.*/;</span></span>
<span id="L790"><span class="lineNum">     790</span> <span class="tlaGNC">           8 : </span></span>
<span id="L791"><span class="lineNum">     791</span> <span class="tlaGNC">           8 : /** @internal */</span></span>
<span id="L792"><span class="lineNum">     792</span> <span class="tlaGNC">           8 : export function isShebangTrivia(text: string, pos: number) {</span></span>
<span id="L793"><span class="lineNum">     793</span> <span class="tlaGNC">           8 :     // Shebangs check must only be done at the start of the file</span></span>
<span id="L794"><span class="lineNum">     794</span> <span class="tlaGNC">           8 :     Debug.assert(pos === 0);</span></span>
<span id="L795"><span class="lineNum">     795</span> <span class="tlaGNC">           8 :     return shebangTriviaRegex.test(text);</span></span>
<span id="L796"><span class="lineNum">     796</span> <span class="tlaGNC">           8 : }</span></span>
<span id="L797"><span class="lineNum">     797</span> <span class="tlaGNC">           8 : </span></span>
<span id="L798"><span class="lineNum">     798</span> <span class="tlaGNC">           8 : /** @internal */</span></span>
<span id="L799"><span class="lineNum">     799</span> <span class="tlaGNC">           8 : export function scanShebangTrivia(text: string, pos: number) {</span></span>
<span id="L800"><span class="lineNum">     800</span> <span class="tlaGNC">           8 :     const shebang = shebangTriviaRegex.exec(text)![0];</span></span>
<span id="L801"><span class="lineNum">     801</span> <span class="tlaGNC">           8 :     pos = pos + shebang.length;</span></span>
<span id="L802"><span class="lineNum">     802</span> <span class="tlaGNC">           8 :     return pos;</span></span>
<span id="L803"><span class="lineNum">     803</span> <span class="tlaGNC">           8 : }</span></span>
<span id="L804"><span class="lineNum">     804</span> <span class="tlaGNC">           8 : </span></span>
<span id="L805"><span class="lineNum">     805</span> <span class="tlaGNC">           8 : /**</span></span>
<span id="L806"><span class="lineNum">     806</span> <span class="tlaGNC">           8 :  * Invokes a callback for each comment range following the provided position.</span></span>
<span id="L807"><span class="lineNum">     807</span> <span class="tlaGNC">           8 :  *</span></span>
<span id="L808"><span class="lineNum">     808</span> <span class="tlaGNC">           8 :  * Single-line comment ranges include the leading double-slash characters but not the ending</span></span>
<span id="L809"><span class="lineNum">     809</span> <span class="tlaGNC">           8 :  * line break. Multi-line comment ranges include the leading slash-asterisk and trailing</span></span>
<span id="L810"><span class="lineNum">     810</span> <span class="tlaGNC">           8 :  * asterisk-slash characters.</span></span>
<span id="L811"><span class="lineNum">     811</span> <span class="tlaGNC">           8 :  *</span></span>
<span id="L812"><span class="lineNum">     812</span> <span class="tlaGNC">           8 :  * @param reduce If true, accumulates the result of calling the callback in a fashion similar</span></span>
<span id="L813"><span class="lineNum">     813</span> <span class="tlaGNC">           8 :  *      to reduceLeft. If false, iteration stops when the callback returns a truthy value.</span></span>
<span id="L814"><span class="lineNum">     814</span> <span class="tlaGNC">           8 :  * @param text The source text to scan.</span></span>
<span id="L815"><span class="lineNum">     815</span> <span class="tlaGNC">           8 :  * @param pos The position at which to start scanning.</span></span>
<span id="L816"><span class="lineNum">     816</span> <span class="tlaGNC">           8 :  * @param trailing If false, whitespace is skipped until the first line break and comments</span></span>
<span id="L817"><span class="lineNum">     817</span> <span class="tlaGNC">           8 :  *      between that location and the next token are returned. If true, comments occurring</span></span>
<span id="L818"><span class="lineNum">     818</span> <span class="tlaGNC">           8 :  *      between the given position and the next line break are returned.</span></span>
<span id="L819"><span class="lineNum">     819</span> <span class="tlaGNC">           8 :  * @param cb The callback to execute as each comment range is encountered.</span></span>
<span id="L820"><span class="lineNum">     820</span> <span class="tlaGNC">           8 :  * @param state A state value to pass to each iteration of the callback.</span></span>
<span id="L821"><span class="lineNum">     821</span> <span class="tlaGNC">           8 :  * @param initial An initial value to pass when accumulating results (when &quot;reduce&quot; is true).</span></span>
<span id="L822"><span class="lineNum">     822</span> <span class="tlaGNC">           8 :  * @returns If &quot;reduce&quot; is true, the accumulated value. If &quot;reduce&quot; is false, the first truthy</span></span>
<span id="L823"><span class="lineNum">     823</span> <span class="tlaGNC">           8 :  *      return value of the callback.</span></span>
<span id="L824"><span class="lineNum">     824</span> <span class="tlaGNC">           8 :  */</span></span>
<span id="L825"><span class="lineNum">     825</span> <span class="tlaGNC">           8 : function iterateCommentRanges&lt;T, U&gt;(reduce: boolean, text: string, pos: number, trailing: boolean, cb: (pos: number, end: number, kind: CommentKind, hasTrailingNewLine: boolean, state: T, memo: U | undefined) =&gt; U, state: T, initial?: U): U | undefined {</span></span>
<span id="L826"><span class="lineNum">     826</span> <span class="tlaGNC">           8 :     let pendingPos!: number;</span></span>
<span id="L827"><span class="lineNum">     827</span> <span class="tlaGNC">           8 :     let pendingEnd!: number;</span></span>
<span id="L828"><span class="lineNum">     828</span> <span class="tlaGNC">           8 :     let pendingKind!: CommentKind;</span></span>
<span id="L829"><span class="lineNum">     829</span> <span class="tlaGNC">           8 :     let pendingHasTrailingNewLine!: boolean;</span></span>
<span id="L830"><span class="lineNum">     830</span> <span class="tlaGNC">           8 :     let hasPendingCommentRange = false;</span></span>
<span id="L831"><span class="lineNum">     831</span> <span class="tlaGNC">           8 :     let collecting = trailing;</span></span>
<span id="L832"><span class="lineNum">     832</span> <span class="tlaGNC">           8 :     let accumulator = initial;</span></span>
<span id="L833"><span class="lineNum">     833</span> <span class="tlaGNC">           8 :     if (pos === 0) {</span></span>
<span id="L834"><span class="lineNum">     834</span> <span class="tlaGNC">           8 :         collecting = true;</span></span>
<span id="L835"><span class="lineNum">     835</span> <span class="tlaGNC">           8 :         const shebang = getShebang(text);</span></span>
<span id="L836"><span class="lineNum">     836</span> <span class="tlaGNC">           8 :         if (shebang) {</span></span>
<span id="L837"><span class="lineNum">     837</span> <span class="tlaGNC">           8 :             pos = shebang.length;</span></span>
<span id="L838"><span class="lineNum">     838</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L839"><span class="lineNum">     839</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L840"><span class="lineNum">     840</span> <span class="tlaGNC">           8 :     scan:</span></span>
<span id="L841"><span class="lineNum">     841</span> <span class="tlaGNC">           8 :     while (pos &gt;= 0 &amp;&amp; pos &lt; text.length) {</span></span>
<span id="L842"><span class="lineNum">     842</span> <span class="tlaGNC">           8 :         const ch = text.charCodeAt(pos);</span></span>
<span id="L843"><span class="lineNum">     843</span> <span class="tlaGNC">           8 :         switch (ch) {</span></span>
<span id="L844"><span class="lineNum">     844</span> <span class="tlaGNC">           8 :             case CharacterCodes.carriageReturn:</span></span>
<span id="L845"><span class="lineNum">     845</span> <span class="tlaGNC">           8 :                 if (text.charCodeAt(pos + 1) === CharacterCodes.lineFeed) {</span></span>
<span id="L846"><span class="lineNum">     846</span> <span class="tlaGNC">           8 :                     pos++;</span></span>
<span id="L847"><span class="lineNum">     847</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L848"><span class="lineNum">     848</span> <span class="tlaGNC">           8 :             // falls through</span></span>
<span id="L849"><span class="lineNum">     849</span> <span class="tlaGNC">           8 :             case CharacterCodes.lineFeed:</span></span>
<span id="L850"><span class="lineNum">     850</span> <span class="tlaGNC">           8 :                 pos++;</span></span>
<span id="L851"><span class="lineNum">     851</span> <span class="tlaGNC">           8 :                 if (trailing) {</span></span>
<span id="L852"><span class="lineNum">     852</span> <span class="tlaGNC">           8 :                     break scan;</span></span>
<span id="L853"><span class="lineNum">     853</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L854"><span class="lineNum">     854</span> <span class="tlaGNC">           8 : </span></span>
<span id="L855"><span class="lineNum">     855</span> <span class="tlaGNC">           8 :                 collecting = true;</span></span>
<span id="L856"><span class="lineNum">     856</span> <span class="tlaGNC">           8 :                 if (hasPendingCommentRange) {</span></span>
<span id="L857"><span class="lineNum">     857</span> <span class="tlaGNC">           8 :                     pendingHasTrailingNewLine = true;</span></span>
<span id="L858"><span class="lineNum">     858</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L859"><span class="lineNum">     859</span> <span class="tlaGNC">           8 : </span></span>
<span id="L860"><span class="lineNum">     860</span> <span class="tlaGNC">           8 :                 continue;</span></span>
<span id="L861"><span class="lineNum">     861</span> <span class="tlaGNC">           8 :             case CharacterCodes.tab:</span></span>
<span id="L862"><span class="lineNum">     862</span> <span class="tlaGNC">           8 :             case CharacterCodes.verticalTab:</span></span>
<span id="L863"><span class="lineNum">     863</span> <span class="tlaGNC">           8 :             case CharacterCodes.formFeed:</span></span>
<span id="L864"><span class="lineNum">     864</span> <span class="tlaGNC">           8 :             case CharacterCodes.space:</span></span>
<span id="L865"><span class="lineNum">     865</span> <span class="tlaGNC">           8 :                 pos++;</span></span>
<span id="L866"><span class="lineNum">     866</span> <span class="tlaGNC">           8 :                 continue;</span></span>
<span id="L867"><span class="lineNum">     867</span> <span class="tlaGNC">           8 :             case CharacterCodes.slash:</span></span>
<span id="L868"><span class="lineNum">     868</span> <span class="tlaGNC">           8 :                 const nextChar = text.charCodeAt(pos + 1);</span></span>
<span id="L869"><span class="lineNum">     869</span> <span class="tlaGNC">           8 :                 let hasTrailingNewLine = false;</span></span>
<span id="L870"><span class="lineNum">     870</span> <span class="tlaGNC">           8 :                 if (nextChar === CharacterCodes.slash || nextChar === CharacterCodes.asterisk) {</span></span>
<span id="L871"><span class="lineNum">     871</span> <span class="tlaGNC">           8 :                     const kind = nextChar === CharacterCodes.slash ? SyntaxKind.SingleLineCommentTrivia : SyntaxKind.MultiLineCommentTrivia;</span></span>
<span id="L872"><span class="lineNum">     872</span> <span class="tlaGNC">           8 :                     const startPos = pos;</span></span>
<span id="L873"><span class="lineNum">     873</span> <span class="tlaGNC">           8 :                     pos += 2;</span></span>
<span id="L874"><span class="lineNum">     874</span> <span class="tlaGNC">           8 :                     if (nextChar === CharacterCodes.slash) {</span></span>
<span id="L875"><span class="lineNum">     875</span> <span class="tlaGNC">           8 :                         while (pos &lt; text.length) {</span></span>
<span id="L876"><span class="lineNum">     876</span> <span class="tlaGNC">           8 :                             if (isLineBreak(text.charCodeAt(pos))) {</span></span>
<span id="L877"><span class="lineNum">     877</span> <span class="tlaGNC">           8 :                                 hasTrailingNewLine = true;</span></span>
<span id="L878"><span class="lineNum">     878</span> <span class="tlaGNC">           8 :                                 break;</span></span>
<span id="L879"><span class="lineNum">     879</span> <span class="tlaGNC">           8 :                             }</span></span>
<span id="L880"><span class="lineNum">     880</span> <span class="tlaGNC">           8 :                             pos++;</span></span>
<span id="L881"><span class="lineNum">     881</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L882"><span class="lineNum">     882</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L883"><span class="lineNum">     883</span> <span class="tlaGNC">           8 :                     else {</span></span>
<span id="L884"><span class="lineNum">     884</span> <span class="tlaGNC">           8 :                         while (pos &lt; text.length) {</span></span>
<span id="L885"><span class="lineNum">     885</span> <span class="tlaGNC">           8 :                             if (text.charCodeAt(pos) === CharacterCodes.asterisk &amp;&amp; text.charCodeAt(pos + 1) === CharacterCodes.slash) {</span></span>
<span id="L886"><span class="lineNum">     886</span> <span class="tlaGNC">           8 :                                 pos += 2;</span></span>
<span id="L887"><span class="lineNum">     887</span> <span class="tlaGNC">           8 :                                 break;</span></span>
<span id="L888"><span class="lineNum">     888</span> <span class="tlaGNC">           8 :                             }</span></span>
<span id="L889"><span class="lineNum">     889</span> <span class="tlaGNC">           8 :                             pos++;</span></span>
<span id="L890"><span class="lineNum">     890</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L891"><span class="lineNum">     891</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L892"><span class="lineNum">     892</span> <span class="tlaGNC">           8 : </span></span>
<span id="L893"><span class="lineNum">     893</span> <span class="tlaGNC">           8 :                     if (collecting) {</span></span>
<span id="L894"><span class="lineNum">     894</span> <span class="tlaGNC">           8 :                         if (hasPendingCommentRange) {</span></span>
<span id="L895"><span class="lineNum">     895</span> <span class="tlaGNC">           8 :                             accumulator = cb(pendingPos, pendingEnd, pendingKind, pendingHasTrailingNewLine, state, accumulator);</span></span>
<span id="L896"><span class="lineNum">     896</span> <span class="tlaGNC">           8 :                             if (!reduce &amp;&amp; accumulator) {</span></span>
<span id="L897"><span class="lineNum">     897</span> <span class="tlaGNC">           8 :                                 // If we are not reducing and we have a truthy result, return it.</span></span>
<span id="L898"><span class="lineNum">     898</span> <span class="tlaGNC">           8 :                                 return accumulator;</span></span>
<span id="L899"><span class="lineNum">     899</span> <span class="tlaGNC">           8 :                             }</span></span>
<span id="L900"><span class="lineNum">     900</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L901"><span class="lineNum">     901</span> <span class="tlaGNC">           8 : </span></span>
<span id="L902"><span class="lineNum">     902</span> <span class="tlaGNC">           8 :                         pendingPos = startPos;</span></span>
<span id="L903"><span class="lineNum">     903</span> <span class="tlaGNC">           8 :                         pendingEnd = pos;</span></span>
<span id="L904"><span class="lineNum">     904</span> <span class="tlaGNC">           8 :                         pendingKind = kind;</span></span>
<span id="L905"><span class="lineNum">     905</span> <span class="tlaGNC">           8 :                         pendingHasTrailingNewLine = hasTrailingNewLine;</span></span>
<span id="L906"><span class="lineNum">     906</span> <span class="tlaGNC">           8 :                         hasPendingCommentRange = true;</span></span>
<span id="L907"><span class="lineNum">     907</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L908"><span class="lineNum">     908</span> <span class="tlaGNC">           8 : </span></span>
<span id="L909"><span class="lineNum">     909</span> <span class="tlaGNC">           8 :                     continue;</span></span>
<span id="L910"><span class="lineNum">     910</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L911"><span class="lineNum">     911</span> <span class="tlaGNC">           8 :                 break scan;</span></span>
<span id="L912"><span class="lineNum">     912</span> <span class="tlaGNC">           8 :             default:</span></span>
<span id="L913"><span class="lineNum">     913</span> <span class="tlaGNC">           8 :                 if (ch &gt; CharacterCodes.maxAsciiCharacter &amp;&amp; (isWhiteSpaceLike(ch))) {</span></span>
<span id="L914"><span class="lineNum">     914</span> <span class="tlaGNC">           8 :                     if (hasPendingCommentRange &amp;&amp; isLineBreak(ch)) {</span></span>
<span id="L915"><span class="lineNum">     915</span> <span class="tlaGNC">           8 :                         pendingHasTrailingNewLine = true;</span></span>
<span id="L916"><span class="lineNum">     916</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L917"><span class="lineNum">     917</span> <span class="tlaGNC">           8 :                     pos++;</span></span>
<span id="L918"><span class="lineNum">     918</span> <span class="tlaGNC">           8 :                     continue;</span></span>
<span id="L919"><span class="lineNum">     919</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L920"><span class="lineNum">     920</span> <span class="tlaGNC">           8 :                 break scan;</span></span>
<span id="L921"><span class="lineNum">     921</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L922"><span class="lineNum">     922</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L923"><span class="lineNum">     923</span> <span class="tlaGNC">           8 : </span></span>
<span id="L924"><span class="lineNum">     924</span> <span class="tlaGNC">           8 :     if (hasPendingCommentRange) {</span></span>
<span id="L925"><span class="lineNum">     925</span> <span class="tlaGNC">           8 :         accumulator = cb(pendingPos, pendingEnd, pendingKind, pendingHasTrailingNewLine, state, accumulator);</span></span>
<span id="L926"><span class="lineNum">     926</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L927"><span class="lineNum">     927</span> <span class="tlaGNC">           8 : </span></span>
<span id="L928"><span class="lineNum">     928</span> <span class="tlaGNC">           8 :     return accumulator;</span></span>
<span id="L929"><span class="lineNum">     929</span> <span class="tlaGNC">           8 : }</span></span>
<span id="L930"><span class="lineNum">     930</span> <span class="tlaGNC">           8 : </span></span>
<span id="L931"><span class="lineNum">     931</span> <span class="tlaGNC">           8 : export function forEachLeadingCommentRange&lt;U&gt;(text: string, pos: number, cb: (pos: number, end: number, kind: CommentKind, hasTrailingNewLine: boolean) =&gt; U): U | undefined;</span></span>
<span id="L932"><span class="lineNum">     932</span> <span class="tlaGNC">           8 : export function forEachLeadingCommentRange&lt;T, U&gt;(text: string, pos: number, cb: (pos: number, end: number, kind: CommentKind, hasTrailingNewLine: boolean, state: T) =&gt; U, state: T): U | undefined;</span></span>
<span id="L933"><span class="lineNum">     933</span> <span class="tlaGNC">           8 : export function forEachLeadingCommentRange&lt;T, U&gt;(text: string, pos: number, cb: (pos: number, end: number, kind: CommentKind, hasTrailingNewLine: boolean, state: T) =&gt; U, state?: T): U | undefined {</span></span>
<span id="L934"><span class="lineNum">     934</span> <span class="tlaGNC">           8 :     return iterateCommentRanges(/*reduce*/ false, text, pos, /*trailing*/ false, cb, state!);</span></span>
<span id="L935"><span class="lineNum">     935</span> <span class="tlaGNC">           8 : }</span></span>
<span id="L936"><span class="lineNum">     936</span> <span class="tlaGNC">           8 : </span></span>
<span id="L937"><span class="lineNum">     937</span> <span class="tlaGNC">           8 : export function forEachTrailingCommentRange&lt;U&gt;(text: string, pos: number, cb: (pos: number, end: number, kind: CommentKind, hasTrailingNewLine: boolean) =&gt; U): U | undefined;</span></span>
<span id="L938"><span class="lineNum">     938</span> <span class="tlaGNC">           8 : export function forEachTrailingCommentRange&lt;T, U&gt;(text: string, pos: number, cb: (pos: number, end: number, kind: CommentKind, hasTrailingNewLine: boolean, state: T) =&gt; U, state: T): U | undefined;</span></span>
<span id="L939"><span class="lineNum">     939</span> <span class="tlaGNC">           8 : export function forEachTrailingCommentRange&lt;T, U&gt;(text: string, pos: number, cb: (pos: number, end: number, kind: CommentKind, hasTrailingNewLine: boolean, state: T) =&gt; U, state?: T): U | undefined {</span></span>
<span id="L940"><span class="lineNum">     940</span> <span class="tlaGNC">           8 :     return iterateCommentRanges(/*reduce*/ false, text, pos, /*trailing*/ true, cb, state!);</span></span>
<span id="L941"><span class="lineNum">     941</span> <span class="tlaGNC">           8 : }</span></span>
<span id="L942"><span class="lineNum">     942</span> <span class="tlaGNC">           8 : </span></span>
<span id="L943"><span class="lineNum">     943</span> <span class="tlaGNC">           8 : export function reduceEachLeadingCommentRange&lt;T, U&gt;(text: string, pos: number, cb: (pos: number, end: number, kind: CommentKind, hasTrailingNewLine: boolean, state: T) =&gt; U, state: T, initial: U) {</span></span>
<span id="L944"><span class="lineNum">     944</span> <span class="tlaGNC">           8 :     return iterateCommentRanges(/*reduce*/ true, text, pos, /*trailing*/ false, cb, state, initial);</span></span>
<span id="L945"><span class="lineNum">     945</span> <span class="tlaGNC">           8 : }</span></span>
<span id="L946"><span class="lineNum">     946</span> <span class="tlaGNC">           8 : </span></span>
<span id="L947"><span class="lineNum">     947</span> <span class="tlaGNC">           8 : export function reduceEachTrailingCommentRange&lt;T, U&gt;(text: string, pos: number, cb: (pos: number, end: number, kind: CommentKind, hasTrailingNewLine: boolean, state: T) =&gt; U, state: T, initial: U) {</span></span>
<span id="L948"><span class="lineNum">     948</span> <span class="tlaGNC">           8 :     return iterateCommentRanges(/*reduce*/ true, text, pos, /*trailing*/ true, cb, state, initial);</span></span>
<span id="L949"><span class="lineNum">     949</span> <span class="tlaGNC">           8 : }</span></span>
<span id="L950"><span class="lineNum">     950</span> <span class="tlaGNC">           8 : </span></span>
<span id="L951"><span class="lineNum">     951</span> <span class="tlaGNC">           8 : function appendCommentRange(pos: number, end: number, kind: CommentKind, hasTrailingNewLine: boolean, _state: any, comments: CommentRange[] = []) {</span></span>
<span id="L952"><span class="lineNum">     952</span> <span class="tlaGNC">           8 :     comments.push({ kind, pos, end, hasTrailingNewLine });</span></span>
<span id="L953"><span class="lineNum">     953</span> <span class="tlaGNC">           8 :     return comments;</span></span>
<span id="L954"><span class="lineNum">     954</span> <span class="tlaGNC">           8 : }</span></span>
<span id="L955"><span class="lineNum">     955</span> <span class="tlaGNC">           8 : </span></span>
<span id="L956"><span class="lineNum">     956</span> <span class="tlaGNC">           8 : export function getLeadingCommentRanges(text: string, pos: number): CommentRange[] | undefined {</span></span>
<span id="L957"><span class="lineNum">     957</span> <span class="tlaGNC">           8 :     return reduceEachLeadingCommentRange(text, pos, appendCommentRange, /*state*/ undefined, /*initial*/ undefined);</span></span>
<span id="L958"><span class="lineNum">     958</span> <span class="tlaGNC">           8 : }</span></span>
<span id="L959"><span class="lineNum">     959</span> <span class="tlaGNC">           8 : </span></span>
<span id="L960"><span class="lineNum">     960</span> <span class="tlaGNC">           8 : export function getTrailingCommentRanges(text: string, pos: number): CommentRange[] | undefined {</span></span>
<span id="L961"><span class="lineNum">     961</span> <span class="tlaGNC">           8 :     return reduceEachTrailingCommentRange(text, pos, appendCommentRange, /*state*/ undefined, /*initial*/ undefined);</span></span>
<span id="L962"><span class="lineNum">     962</span> <span class="tlaGNC">           8 : }</span></span>
<span id="L963"><span class="lineNum">     963</span> <span class="tlaGNC">           8 : </span></span>
<span id="L964"><span class="lineNum">     964</span> <span class="tlaGNC">           8 : /** Optionally, get the shebang */</span></span>
<span id="L965"><span class="lineNum">     965</span> <span class="tlaGNC">           8 : export function getShebang(text: string): string | undefined {</span></span>
<span id="L966"><span class="lineNum">     966</span> <span class="tlaGNC">           8 :     const match = shebangTriviaRegex.exec(text);</span></span>
<span id="L967"><span class="lineNum">     967</span> <span class="tlaGNC">           8 :     if (match) {</span></span>
<span id="L968"><span class="lineNum">     968</span> <span class="tlaGNC">           8 :         return match[0];</span></span>
<span id="L969"><span class="lineNum">     969</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L970"><span class="lineNum">     970</span> <span class="tlaGNC">           8 : }</span></span>
<span id="L971"><span class="lineNum">     971</span> <span class="tlaGNC">           8 : </span></span>
<span id="L972"><span class="lineNum">     972</span> <span class="tlaGNC">           8 : export function isIdentifierStart(ch: number, languageVersion: ScriptTarget | undefined): boolean {</span></span>
<span id="L973"><span class="lineNum">     973</span> <span class="tlaGNC">           8 :     return isASCIILetter(ch) || ch === CharacterCodes.$ || ch === CharacterCodes._ ||</span></span>
<span id="L974"><span class="lineNum">     974</span> <span class="tlaGNC">           8 :         ch &gt; CharacterCodes.maxAsciiCharacter &amp;&amp; isUnicodeIdentifierStart(ch, languageVersion);</span></span>
<span id="L975"><span class="lineNum">     975</span> <span class="tlaGNC">           8 : }</span></span>
<span id="L976"><span class="lineNum">     976</span> <span class="tlaGNC">           8 : </span></span>
<span id="L977"><span class="lineNum">     977</span> <span class="tlaGNC">           8 : export function isIdentifierPart(ch: number, languageVersion: ScriptTarget | undefined, identifierVariant?: LanguageVariant): boolean {</span></span>
<span id="L978"><span class="lineNum">     978</span> <span class="tlaGNC">           8 :     return isWordCharacter(ch) || ch === CharacterCodes.$ ||</span></span>
<span id="L979"><span class="lineNum">     979</span> <span class="tlaGNC">           8 :         // &quot;-&quot; and &quot;:&quot; are valid in JSX Identifiers</span></span>
<span id="L980"><span class="lineNum">     980</span> <span class="tlaGNC">           8 :         (identifierVariant === LanguageVariant.JSX ? (ch === CharacterCodes.minus || ch === CharacterCodes.colon) : false) ||</span></span>
<span id="L981"><span class="lineNum">     981</span> <span class="tlaGNC">           8 :         ch &gt; CharacterCodes.maxAsciiCharacter &amp;&amp; isUnicodeIdentifierPart(ch, languageVersion);</span></span>
<span id="L982"><span class="lineNum">     982</span> <span class="tlaGNC">           8 : }</span></span>
<span id="L983"><span class="lineNum">     983</span> <span class="tlaGNC">           8 : </span></span>
<span id="L984"><span class="lineNum">     984</span> <span class="tlaGNC">           8 : /** @internal */</span></span>
<span id="L985"><span class="lineNum">     985</span> <span class="tlaGNC">           8 : export function isIdentifierText(name: string, languageVersion: ScriptTarget | undefined, identifierVariant?: LanguageVariant): boolean {</span></span>
<span id="L986"><span class="lineNum">     986</span> <span class="tlaGNC">           8 :     let ch = codePointAt(name, 0);</span></span>
<span id="L987"><span class="lineNum">     987</span> <span class="tlaGNC">           8 :     if (!isIdentifierStart(ch, languageVersion)) {</span></span>
<span id="L988"><span class="lineNum">     988</span> <span class="tlaGNC">           8 :         return false;</span></span>
<span id="L989"><span class="lineNum">     989</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L990"><span class="lineNum">     990</span> <span class="tlaGNC">           8 : </span></span>
<span id="L991"><span class="lineNum">     991</span> <span class="tlaGNC">           8 :     for (let i = charSize(ch); i &lt; name.length; i += charSize(ch)) {</span></span>
<span id="L992"><span class="lineNum">     992</span> <span class="tlaGNC">           8 :         if (!isIdentifierPart(ch = codePointAt(name, i), languageVersion, identifierVariant)) {</span></span>
<span id="L993"><span class="lineNum">     993</span> <span class="tlaGNC">           8 :             return false;</span></span>
<span id="L994"><span class="lineNum">     994</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L995"><span class="lineNum">     995</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L996"><span class="lineNum">     996</span> <span class="tlaGNC">           8 : </span></span>
<span id="L997"><span class="lineNum">     997</span> <span class="tlaGNC">           8 :     return true;</span></span>
<span id="L998"><span class="lineNum">     998</span> <span class="tlaGNC">           8 : }</span></span>
<span id="L999"><span class="lineNum">     999</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1000"><span class="lineNum">    1000</span> <span class="tlaGNC">           8 : const enum EscapeSequenceScanningFlags {</span></span>
<span id="L1001"><span class="lineNum">    1001</span> <span class="tlaGNC">           8 :     String = 1 &lt;&lt; 0,</span></span>
<span id="L1002"><span class="lineNum">    1002</span> <span class="tlaGNC">           8 :     ReportErrors = 1 &lt;&lt; 1,</span></span>
<span id="L1003"><span class="lineNum">    1003</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1004"><span class="lineNum">    1004</span> <span class="tlaGNC">           8 :     RegularExpression = 1 &lt;&lt; 2,</span></span>
<span id="L1005"><span class="lineNum">    1005</span> <span class="tlaGNC">           8 :     AnnexB = 1 &lt;&lt; 3,</span></span>
<span id="L1006"><span class="lineNum">    1006</span> <span class="tlaGNC">           8 :     AnyUnicodeMode = 1 &lt;&lt; 4,</span></span>
<span id="L1007"><span class="lineNum">    1007</span> <span class="tlaGNC">           8 :     AtomEscape = 1 &lt;&lt; 5,</span></span>
<span id="L1008"><span class="lineNum">    1008</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1009"><span class="lineNum">    1009</span> <span class="tlaGNC">           8 :     ReportInvalidEscapeErrors = RegularExpression | ReportErrors,</span></span>
<span id="L1010"><span class="lineNum">    1010</span> <span class="tlaGNC">           8 :     ScanExtendedUnicodeEscape = String | AnyUnicodeMode,</span></span>
<span id="L1011"><span class="lineNum">    1011</span> <span class="tlaGNC">           8 : }</span></span>
<span id="L1012"><span class="lineNum">    1012</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1013"><span class="lineNum">    1013</span> <span class="tlaGNC">           8 : const enum ClassSetExpressionType {</span></span>
<span id="L1014"><span class="lineNum">    1014</span> <span class="tlaGNC">           8 :     Unknown,</span></span>
<span id="L1015"><span class="lineNum">    1015</span> <span class="tlaGNC">           8 :     ClassUnion,</span></span>
<span id="L1016"><span class="lineNum">    1016</span> <span class="tlaGNC">           8 :     ClassIntersection,</span></span>
<span id="L1017"><span class="lineNum">    1017</span> <span class="tlaGNC">           8 :     ClassSubtraction,</span></span>
<span id="L1018"><span class="lineNum">    1018</span> <span class="tlaGNC">           8 : }</span></span>
<span id="L1019"><span class="lineNum">    1019</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1020"><span class="lineNum">    1020</span> <span class="tlaGNC">           8 : // Creates a scanner over a (possibly unspecified) range of a piece of text.</span></span>
<span id="L1021"><span class="lineNum">    1021</span> <span class="tlaGNC">           8 : export function createScanner(languageVersion: ScriptTarget, skipTrivia: boolean, languageVariant = LanguageVariant.Standard, textInitial?: string, onError?: ErrorCallback, start?: number, length?: number): Scanner {</span></span>
<span id="L1022"><span class="lineNum">    1022</span> <span class="tlaGNC">           8 :     // Why var? It avoids TDZ checks in the runtime which can be costly.</span></span>
<span id="L1023"><span class="lineNum">    1023</span> <span class="tlaGNC">           8 :     // See: https://github.com/microsoft/TypeScript/issues/52924</span></span>
<span id="L1024"><span class="lineNum">    1024</span> <span class="tlaGNC">           8 :     /* eslint-disable no-var */</span></span>
<span id="L1025"><span class="lineNum">    1025</span> <span class="tlaGNC">           8 :     var text = textInitial!;</span></span>
<span id="L1026"><span class="lineNum">    1026</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1027"><span class="lineNum">    1027</span> <span class="tlaGNC">           8 :     // Current position (end position of text of current token)</span></span>
<span id="L1028"><span class="lineNum">    1028</span> <span class="tlaGNC">           8 :     var pos: number;</span></span>
<span id="L1029"><span class="lineNum">    1029</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1030"><span class="lineNum">    1030</span> <span class="tlaGNC">           8 :     // end of text</span></span>
<span id="L1031"><span class="lineNum">    1031</span> <span class="tlaGNC">           8 :     var end: number;</span></span>
<span id="L1032"><span class="lineNum">    1032</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1033"><span class="lineNum">    1033</span> <span class="tlaGNC">           8 :     // Start position of whitespace before current token</span></span>
<span id="L1034"><span class="lineNum">    1034</span> <span class="tlaGNC">           8 :     var fullStartPos: number;</span></span>
<span id="L1035"><span class="lineNum">    1035</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1036"><span class="lineNum">    1036</span> <span class="tlaGNC">           8 :     // Start position of text of current token</span></span>
<span id="L1037"><span class="lineNum">    1037</span> <span class="tlaGNC">           8 :     var tokenStart: number;</span></span>
<span id="L1038"><span class="lineNum">    1038</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1039"><span class="lineNum">    1039</span> <span class="tlaGNC">           8 :     var token: SyntaxKind;</span></span>
<span id="L1040"><span class="lineNum">    1040</span> <span class="tlaGNC">           8 :     var tokenValue!: string;</span></span>
<span id="L1041"><span class="lineNum">    1041</span> <span class="tlaGNC">           8 :     var tokenFlags: TokenFlags;</span></span>
<span id="L1042"><span class="lineNum">    1042</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1043"><span class="lineNum">    1043</span> <span class="tlaGNC">           8 :     var commentDirectives: CommentDirective[] | undefined;</span></span>
<span id="L1044"><span class="lineNum">    1044</span> <span class="tlaGNC">           8 :     var skipJsDocLeadingAsterisks = 0;</span></span>
<span id="L1045"><span class="lineNum">    1045</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1046"><span class="lineNum">    1046</span> <span class="tlaGNC">           8 :     var scriptKind = ScriptKind.Unknown;</span></span>
<span id="L1047"><span class="lineNum">    1047</span> <span class="tlaGNC">           8 :     var jsDocParsingMode = JSDocParsingMode.ParseAll;</span></span>
<span id="L1048"><span class="lineNum">    1048</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1049"><span class="lineNum">    1049</span> <span class="tlaGNC">           8 :     setText(text, start, length);</span></span>
<span id="L1050"><span class="lineNum">    1050</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1051"><span class="lineNum">    1051</span> <span class="tlaGNC">           8 :     var scanner: Scanner = {</span></span>
<span id="L1052"><span class="lineNum">    1052</span> <span class="tlaGNC">           8 :         getTokenFullStart: () =&gt; fullStartPos,</span></span>
<span id="L1053"><span class="lineNum">    1053</span> <span class="tlaGNC">           8 :         getStartPos: () =&gt; fullStartPos,</span></span>
<span id="L1054"><span class="lineNum">    1054</span> <span class="tlaGNC">           8 :         getTokenEnd: () =&gt; pos,</span></span>
<span id="L1055"><span class="lineNum">    1055</span> <span class="tlaGNC">           8 :         getTextPos: () =&gt; pos,</span></span>
<span id="L1056"><span class="lineNum">    1056</span> <span class="tlaGNC">           8 :         getToken: () =&gt; token,</span></span>
<span id="L1057"><span class="lineNum">    1057</span> <span class="tlaGNC">           8 :         getTokenStart: () =&gt; tokenStart,</span></span>
<span id="L1058"><span class="lineNum">    1058</span> <span class="tlaGNC">           8 :         getTokenPos: () =&gt; tokenStart,</span></span>
<span id="L1059"><span class="lineNum">    1059</span> <span class="tlaGNC">           8 :         getTokenText: () =&gt; text.substring(tokenStart, pos),</span></span>
<span id="L1060"><span class="lineNum">    1060</span> <span class="tlaGNC">           8 :         getTokenValue: () =&gt; tokenValue,</span></span>
<span id="L1061"><span class="lineNum">    1061</span> <span class="tlaGNC">           8 :         hasUnicodeEscape: () =&gt; (tokenFlags &amp; TokenFlags.UnicodeEscape) !== 0,</span></span>
<span id="L1062"><span class="lineNum">    1062</span> <span class="tlaGNC">           8 :         hasExtendedUnicodeEscape: () =&gt; (tokenFlags &amp; TokenFlags.ExtendedUnicodeEscape) !== 0,</span></span>
<span id="L1063"><span class="lineNum">    1063</span> <span class="tlaGNC">           8 :         hasPrecedingLineBreak: () =&gt; (tokenFlags &amp; TokenFlags.PrecedingLineBreak) !== 0,</span></span>
<span id="L1064"><span class="lineNum">    1064</span> <span class="tlaGNC">           8 :         hasPrecedingJSDocComment: () =&gt; (tokenFlags &amp; TokenFlags.PrecedingJSDocComment) !== 0,</span></span>
<span id="L1065"><span class="lineNum">    1065</span> <span class="tlaGNC">           8 :         isIdentifier: () =&gt; token === SyntaxKind.Identifier || token &gt; SyntaxKind.LastReservedWord,</span></span>
<span id="L1066"><span class="lineNum">    1066</span> <span class="tlaGNC">           8 :         isReservedWord: () =&gt; token &gt;= SyntaxKind.FirstReservedWord &amp;&amp; token &lt;= SyntaxKind.LastReservedWord,</span></span>
<span id="L1067"><span class="lineNum">    1067</span> <span class="tlaGNC">           8 :         isUnterminated: () =&gt; (tokenFlags &amp; TokenFlags.Unterminated) !== 0,</span></span>
<span id="L1068"><span class="lineNum">    1068</span> <span class="tlaGNC">           8 :         getCommentDirectives: () =&gt; commentDirectives,</span></span>
<span id="L1069"><span class="lineNum">    1069</span> <span class="tlaGNC">           8 :         getNumericLiteralFlags: () =&gt; tokenFlags &amp; TokenFlags.NumericLiteralFlags,</span></span>
<span id="L1070"><span class="lineNum">    1070</span> <span class="tlaGNC">           8 :         getTokenFlags: () =&gt; tokenFlags,</span></span>
<span id="L1071"><span class="lineNum">    1071</span> <span class="tlaGNC">           8 :         reScanGreaterToken,</span></span>
<span id="L1072"><span class="lineNum">    1072</span> <span class="tlaGNC">           8 :         reScanAsteriskEqualsToken,</span></span>
<span id="L1073"><span class="lineNum">    1073</span> <span class="tlaGNC">           8 :         reScanSlashToken,</span></span>
<span id="L1074"><span class="lineNum">    1074</span> <span class="tlaGNC">           8 :         reScanTemplateToken,</span></span>
<span id="L1075"><span class="lineNum">    1075</span> <span class="tlaGNC">           8 :         reScanTemplateHeadOrNoSubstitutionTemplate,</span></span>
<span id="L1076"><span class="lineNum">    1076</span> <span class="tlaGNC">           8 :         scanJsxIdentifier,</span></span>
<span id="L1077"><span class="lineNum">    1077</span> <span class="tlaGNC">           8 :         scanJsxAttributeValue,</span></span>
<span id="L1078"><span class="lineNum">    1078</span> <span class="tlaGNC">           8 :         reScanJsxAttributeValue,</span></span>
<span id="L1079"><span class="lineNum">    1079</span> <span class="tlaGNC">           8 :         reScanJsxToken,</span></span>
<span id="L1080"><span class="lineNum">    1080</span> <span class="tlaGNC">           8 :         reScanLessThanToken,</span></span>
<span id="L1081"><span class="lineNum">    1081</span> <span class="tlaGNC">           8 :         reScanHashToken,</span></span>
<span id="L1082"><span class="lineNum">    1082</span> <span class="tlaGNC">           8 :         reScanQuestionToken,</span></span>
<span id="L1083"><span class="lineNum">    1083</span> <span class="tlaGNC">           8 :         reScanInvalidIdentifier,</span></span>
<span id="L1084"><span class="lineNum">    1084</span> <span class="tlaGNC">           8 :         scanJsxToken,</span></span>
<span id="L1085"><span class="lineNum">    1085</span> <span class="tlaGNC">           8 :         scanJsDocToken,</span></span>
<span id="L1086"><span class="lineNum">    1086</span> <span class="tlaGNC">           8 :         scanJSDocCommentTextToken,</span></span>
<span id="L1087"><span class="lineNum">    1087</span> <span class="tlaGNC">           8 :         scan,</span></span>
<span id="L1088"><span class="lineNum">    1088</span> <span class="tlaGNC">           8 :         getText,</span></span>
<span id="L1089"><span class="lineNum">    1089</span> <span class="tlaGNC">           8 :         clearCommentDirectives,</span></span>
<span id="L1090"><span class="lineNum">    1090</span> <span class="tlaGNC">           8 :         setText,</span></span>
<span id="L1091"><span class="lineNum">    1091</span> <span class="tlaGNC">           8 :         setScriptTarget,</span></span>
<span id="L1092"><span class="lineNum">    1092</span> <span class="tlaGNC">           8 :         setLanguageVariant,</span></span>
<span id="L1093"><span class="lineNum">    1093</span> <span class="tlaGNC">           8 :         setScriptKind,</span></span>
<span id="L1094"><span class="lineNum">    1094</span> <span class="tlaGNC">           8 :         setJSDocParsingMode,</span></span>
<span id="L1095"><span class="lineNum">    1095</span> <span class="tlaGNC">           8 :         setOnError,</span></span>
<span id="L1096"><span class="lineNum">    1096</span> <span class="tlaGNC">           8 :         resetTokenState,</span></span>
<span id="L1097"><span class="lineNum">    1097</span> <span class="tlaGNC">           8 :         setTextPos: resetTokenState,</span></span>
<span id="L1098"><span class="lineNum">    1098</span> <span class="tlaGNC">           8 :         setSkipJsDocLeadingAsterisks,</span></span>
<span id="L1099"><span class="lineNum">    1099</span> <span class="tlaGNC">           8 :         tryScan,</span></span>
<span id="L1100"><span class="lineNum">    1100</span> <span class="tlaGNC">           8 :         lookAhead,</span></span>
<span id="L1101"><span class="lineNum">    1101</span> <span class="tlaGNC">           8 :         scanRange,</span></span>
<span id="L1102"><span class="lineNum">    1102</span> <span class="tlaGNC">           8 :     };</span></span>
<span id="L1103"><span class="lineNum">    1103</span> <span class="tlaGNC">           8 :     /* eslint-enable no-var */</span></span>
<span id="L1104"><span class="lineNum">    1104</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1105"><span class="lineNum">    1105</span> <span class="tlaGNC">           8 :     if (Debug.isDebugging) {</span></span>
<span id="L1106"><span class="lineNum">    1106</span> <span class="tlaGNC">           8 :         Object.defineProperty(scanner, &quot;__debugShowCurrentPositionInText&quot;, {</span></span>
<span id="L1107"><span class="lineNum">    1107</span> <span class="tlaGNC">           8 :             get: () =&gt; {</span></span>
<span id="L1108"><span class="lineNum">    1108</span> <span class="tlaGNC">           8 :                 const text = scanner.getText();</span></span>
<span id="L1109"><span class="lineNum">    1109</span> <span class="tlaGNC">           8 :                 return text.slice(0, scanner.getTokenFullStart()) + &quot;&quot; + text.slice(scanner.getTokenFullStart());</span></span>
<span id="L1110"><span class="lineNum">    1110</span> <span class="tlaGNC">           8 :             },</span></span>
<span id="L1111"><span class="lineNum">    1111</span> <span class="tlaGNC">           8 :         });</span></span>
<span id="L1112"><span class="lineNum">    1112</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L1113"><span class="lineNum">    1113</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1114"><span class="lineNum">    1114</span> <span class="tlaGNC">           8 :     return scanner;</span></span>
<span id="L1115"><span class="lineNum">    1115</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1116"><span class="lineNum">    1116</span> <span class="tlaGNC">           8 :     /**</span></span>
<span id="L1117"><span class="lineNum">    1117</span> <span class="tlaGNC">           8 :      * Returns the code point for the character at the given position within `text`. This</span></span>
<span id="L1118"><span class="lineNum">    1118</span> <span class="tlaGNC">           8 :      * should only be used when pos is guaranteed to be within the bounds of `text` as this</span></span>
<span id="L1119"><span class="lineNum">    1119</span> <span class="tlaGNC">           8 :      * function does not perform bounds checks.</span></span>
<span id="L1120"><span class="lineNum">    1120</span> <span class="tlaGNC">           8 :      */</span></span>
<span id="L1121"><span class="lineNum">    1121</span> <span class="tlaGNC">           8 :     function codePointUnchecked(pos: number) {</span></span>
<span id="L1122"><span class="lineNum">    1122</span> <span class="tlaGNC">           8 :         return codePointAt(text, pos);</span></span>
<span id="L1123"><span class="lineNum">    1123</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L1124"><span class="lineNum">    1124</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1125"><span class="lineNum">    1125</span> <span class="tlaGNC">           8 :     /**</span></span>
<span id="L1126"><span class="lineNum">    1126</span> <span class="tlaGNC">           8 :      * Returns the code point for the character at the given position within `text`. If</span></span>
<span id="L1127"><span class="lineNum">    1127</span> <span class="tlaGNC">           8 :      * `pos` is outside the bounds set for `text`, `CharacterCodes.EOF` is returned instead.</span></span>
<span id="L1128"><span class="lineNum">    1128</span> <span class="tlaGNC">           8 :      */</span></span>
<span id="L1129"><span class="lineNum">    1129</span> <span class="tlaGNC">           8 :     function codePointChecked(pos: number) {</span></span>
<span id="L1130"><span class="lineNum">    1130</span> <span class="tlaGNC">           8 :         return pos &gt;= 0 &amp;&amp; pos &lt; end ? codePointUnchecked(pos) : CharacterCodes.EOF;</span></span>
<span id="L1131"><span class="lineNum">    1131</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L1132"><span class="lineNum">    1132</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1133"><span class="lineNum">    1133</span> <span class="tlaGNC">           8 :     /**</span></span>
<span id="L1134"><span class="lineNum">    1134</span> <span class="tlaGNC">           8 :      * Returns the char code for the character at the given position within `text`. This</span></span>
<span id="L1135"><span class="lineNum">    1135</span> <span class="tlaGNC">           8 :      * should only be used when pos is guaranteed to be within the bounds of `text` as this</span></span>
<span id="L1136"><span class="lineNum">    1136</span> <span class="tlaGNC">           8 :      * function does not perform bounds checks.</span></span>
<span id="L1137"><span class="lineNum">    1137</span> <span class="tlaGNC">           8 :      */</span></span>
<span id="L1138"><span class="lineNum">    1138</span> <span class="tlaGNC">           8 :     function charCodeUnchecked(pos: number) {</span></span>
<span id="L1139"><span class="lineNum">    1139</span> <span class="tlaGNC">           8 :         return text.charCodeAt(pos);</span></span>
<span id="L1140"><span class="lineNum">    1140</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L1141"><span class="lineNum">    1141</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1142"><span class="lineNum">    1142</span> <span class="tlaGNC">           8 :     /**</span></span>
<span id="L1143"><span class="lineNum">    1143</span> <span class="tlaGNC">           8 :      * Returns the char code for the character at the given position within `text`. If</span></span>
<span id="L1144"><span class="lineNum">    1144</span> <span class="tlaGNC">           8 :      * `pos` is outside the bounds set for `text`, `CharacterCodes.EOF` is returned instead.</span></span>
<span id="L1145"><span class="lineNum">    1145</span> <span class="tlaGNC">           8 :      */</span></span>
<span id="L1146"><span class="lineNum">    1146</span> <span class="tlaGNC">           8 :     function charCodeChecked(pos: number) {</span></span>
<span id="L1147"><span class="lineNum">    1147</span> <span class="tlaGNC">           8 :         return pos &gt;= 0 &amp;&amp; pos &lt; end ? charCodeUnchecked(pos) : CharacterCodes.EOF;</span></span>
<span id="L1148"><span class="lineNum">    1148</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L1149"><span class="lineNum">    1149</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1150"><span class="lineNum">    1150</span> <span class="tlaGNC">           8 :     function error(message: DiagnosticMessage): void;</span></span>
<span id="L1151"><span class="lineNum">    1151</span> <span class="tlaGNC">           8 :     function error(message: DiagnosticMessage, errPos: number, length: number, arg0?: any): void;</span></span>
<span id="L1152"><span class="lineNum">    1152</span> <span class="tlaGNC">           8 :     function error(message: DiagnosticMessage, errPos: number = pos, length?: number, arg0?: any): void {</span></span>
<span id="L1153"><span class="lineNum">    1153</span> <span class="tlaGNC">           8 :         if (onError) {</span></span>
<span id="L1154"><span class="lineNum">    1154</span> <span class="tlaGNC">           8 :             const oldPos = pos;</span></span>
<span id="L1155"><span class="lineNum">    1155</span> <span class="tlaGNC">           8 :             pos = errPos;</span></span>
<span id="L1156"><span class="lineNum">    1156</span> <span class="tlaGNC">           8 :             onError(message, length || 0, arg0);</span></span>
<span id="L1157"><span class="lineNum">    1157</span> <span class="tlaGNC">           8 :             pos = oldPos;</span></span>
<span id="L1158"><span class="lineNum">    1158</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L1159"><span class="lineNum">    1159</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L1160"><span class="lineNum">    1160</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1161"><span class="lineNum">    1161</span> <span class="tlaGNC">           8 :     function scanNumberFragment(): string {</span></span>
<span id="L1162"><span class="lineNum">    1162</span> <span class="tlaGNC">           8 :         let start = pos;</span></span>
<span id="L1163"><span class="lineNum">    1163</span> <span class="tlaGNC">           8 :         let allowSeparator = false;</span></span>
<span id="L1164"><span class="lineNum">    1164</span> <span class="tlaGNC">           8 :         let isPreviousTokenSeparator = false;</span></span>
<span id="L1165"><span class="lineNum">    1165</span> <span class="tlaGNC">           8 :         let result = &quot;&quot;;</span></span>
<span id="L1166"><span class="lineNum">    1166</span> <span class="tlaGNC">           8 :         while (true) {</span></span>
<span id="L1167"><span class="lineNum">    1167</span> <span class="tlaGNC">           8 :             const ch = charCodeUnchecked(pos);</span></span>
<span id="L1168"><span class="lineNum">    1168</span> <span class="tlaGNC">           8 :             if (ch === CharacterCodes._) {</span></span>
<span id="L1169"><span class="lineNum">    1169</span> <span class="tlaGNC">           8 :                 tokenFlags |= TokenFlags.ContainsSeparator;</span></span>
<span id="L1170"><span class="lineNum">    1170</span> <span class="tlaGNC">           8 :                 if (allowSeparator) {</span></span>
<span id="L1171"><span class="lineNum">    1171</span> <span class="tlaGNC">           8 :                     allowSeparator = false;</span></span>
<span id="L1172"><span class="lineNum">    1172</span> <span class="tlaGNC">           8 :                     isPreviousTokenSeparator = true;</span></span>
<span id="L1173"><span class="lineNum">    1173</span> <span class="tlaGNC">           8 :                     result += text.substring(start, pos);</span></span>
<span id="L1174"><span class="lineNum">    1174</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L1175"><span class="lineNum">    1175</span> <span class="tlaGNC">           8 :                 else {</span></span>
<span id="L1176"><span class="lineNum">    1176</span> <span class="tlaGNC">           8 :                     tokenFlags |= TokenFlags.ContainsInvalidSeparator;</span></span>
<span id="L1177"><span class="lineNum">    1177</span> <span class="tlaGNC">           8 :                     if (isPreviousTokenSeparator) {</span></span>
<span id="L1178"><span class="lineNum">    1178</span> <span class="tlaGNC">           8 :                         error(Diagnostics.Multiple_consecutive_numeric_separators_are_not_permitted, pos, 1);</span></span>
<span id="L1179"><span class="lineNum">    1179</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L1180"><span class="lineNum">    1180</span> <span class="tlaGNC">           8 :                     else {</span></span>
<span id="L1181"><span class="lineNum">    1181</span> <span class="tlaGNC">           8 :                         error(Diagnostics.Numeric_separators_are_not_allowed_here, pos, 1);</span></span>
<span id="L1182"><span class="lineNum">    1182</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L1183"><span class="lineNum">    1183</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L1184"><span class="lineNum">    1184</span> <span class="tlaGNC">           8 :                 pos++;</span></span>
<span id="L1185"><span class="lineNum">    1185</span> <span class="tlaGNC">           8 :                 start = pos;</span></span>
<span id="L1186"><span class="lineNum">    1186</span> <span class="tlaGNC">           8 :                 continue;</span></span>
<span id="L1187"><span class="lineNum">    1187</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L1188"><span class="lineNum">    1188</span> <span class="tlaGNC">           8 :             if (isDigit(ch)) {</span></span>
<span id="L1189"><span class="lineNum">    1189</span> <span class="tlaGNC">           8 :                 allowSeparator = true;</span></span>
<span id="L1190"><span class="lineNum">    1190</span> <span class="tlaGNC">           8 :                 isPreviousTokenSeparator = false;</span></span>
<span id="L1191"><span class="lineNum">    1191</span> <span class="tlaGNC">           8 :                 pos++;</span></span>
<span id="L1192"><span class="lineNum">    1192</span> <span class="tlaGNC">           8 :                 continue;</span></span>
<span id="L1193"><span class="lineNum">    1193</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L1194"><span class="lineNum">    1194</span> <span class="tlaGNC">           8 :             break;</span></span>
<span id="L1195"><span class="lineNum">    1195</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L1196"><span class="lineNum">    1196</span> <span class="tlaGNC">           8 :         if (charCodeUnchecked(pos - 1) === CharacterCodes._) {</span></span>
<span id="L1197"><span class="lineNum">    1197</span> <span class="tlaGNC">           8 :             tokenFlags |= TokenFlags.ContainsInvalidSeparator;</span></span>
<span id="L1198"><span class="lineNum">    1198</span> <span class="tlaGNC">           8 :             error(Diagnostics.Numeric_separators_are_not_allowed_here, pos - 1, 1);</span></span>
<span id="L1199"><span class="lineNum">    1199</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L1200"><span class="lineNum">    1200</span> <span class="tlaGNC">           8 :         return result + text.substring(start, pos);</span></span>
<span id="L1201"><span class="lineNum">    1201</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L1202"><span class="lineNum">    1202</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1203"><span class="lineNum">    1203</span> <span class="tlaGNC">           8 :     // Extract from Section 12.9.3</span></span>
<span id="L1204"><span class="lineNum">    1204</span> <span class="tlaGNC">           8 :     // NumericLiteral ::=</span></span>
<span id="L1205"><span class="lineNum">    1205</span> <span class="tlaGNC">           8 :     //     | DecimalLiteral</span></span>
<span id="L1206"><span class="lineNum">    1206</span> <span class="tlaGNC">           8 :     //     | DecimalBigIntegerLiteral</span></span>
<span id="L1207"><span class="lineNum">    1207</span> <span class="tlaGNC">           8 :     //     | NonDecimalIntegerLiteral 'n'?</span></span>
<span id="L1208"><span class="lineNum">    1208</span> <span class="tlaGNC">           8 :     //     | LegacyOctalIntegerLiteral</span></span>
<span id="L1209"><span class="lineNum">    1209</span> <span class="tlaGNC">           8 :     // DecimalBigIntegerLiteral ::=</span></span>
<span id="L1210"><span class="lineNum">    1210</span> <span class="tlaGNC">           8 :     //     | '0n'</span></span>
<span id="L1211"><span class="lineNum">    1211</span> <span class="tlaGNC">           8 :     //     | [1-9] DecimalDigits? 'n'</span></span>
<span id="L1212"><span class="lineNum">    1212</span> <span class="tlaGNC">           8 :     //     | [1-9] '_' DecimalDigits 'n'</span></span>
<span id="L1213"><span class="lineNum">    1213</span> <span class="tlaGNC">           8 :     // DecimalLiteral ::=</span></span>
<span id="L1214"><span class="lineNum">    1214</span> <span class="tlaGNC">           8 :     //     | DecimalIntegerLiteral '.' DecimalDigits? ExponentPart?</span></span>
<span id="L1215"><span class="lineNum">    1215</span> <span class="tlaGNC">           8 :     //     | '.' DecimalDigits ExponentPart?</span></span>
<span id="L1216"><span class="lineNum">    1216</span> <span class="tlaGNC">           8 :     //     | DecimalIntegerLiteral ExponentPart?</span></span>
<span id="L1217"><span class="lineNum">    1217</span> <span class="tlaGNC">           8 :     // DecimalIntegerLiteral ::=</span></span>
<span id="L1218"><span class="lineNum">    1218</span> <span class="tlaGNC">           8 :     //     | '0'</span></span>
<span id="L1219"><span class="lineNum">    1219</span> <span class="tlaGNC">           8 :     //     | [1-9] '_'? DecimalDigits</span></span>
<span id="L1220"><span class="lineNum">    1220</span> <span class="tlaGNC">           8 :     //     | NonOctalDecimalIntegerLiteral</span></span>
<span id="L1221"><span class="lineNum">    1221</span> <span class="tlaGNC">           8 :     // LegacyOctalIntegerLiteral ::= '0' [0-7]+</span></span>
<span id="L1222"><span class="lineNum">    1222</span> <span class="tlaGNC">           8 :     // NonOctalDecimalIntegerLiteral ::= '0' [0-7]* [89] [0-9]*</span></span>
<span id="L1223"><span class="lineNum">    1223</span> <span class="tlaGNC">           8 :     function scanNumber(): SyntaxKind {</span></span>
<span id="L1224"><span class="lineNum">    1224</span> <span class="tlaGNC">           8 :         let start = pos;</span></span>
<span id="L1225"><span class="lineNum">    1225</span> <span class="tlaGNC">           8 :         let mainFragment: string;</span></span>
<span id="L1226"><span class="lineNum">    1226</span> <span class="tlaGNC">           8 :         if (charCodeUnchecked(pos) === CharacterCodes._0) {</span></span>
<span id="L1227"><span class="lineNum">    1227</span> <span class="tlaGNC">           8 :             pos++;</span></span>
<span id="L1228"><span class="lineNum">    1228</span> <span class="tlaGNC">           8 :             if (charCodeUnchecked(pos) === CharacterCodes._) {</span></span>
<span id="L1229"><span class="lineNum">    1229</span> <span class="tlaGNC">           8 :                 tokenFlags |= TokenFlags.ContainsSeparator | TokenFlags.ContainsInvalidSeparator;</span></span>
<span id="L1230"><span class="lineNum">    1230</span> <span class="tlaGNC">           8 :                 error(Diagnostics.Numeric_separators_are_not_allowed_here, pos, 1);</span></span>
<span id="L1231"><span class="lineNum">    1231</span> <span class="tlaGNC">           8 :                 // treat it as a normal number literal</span></span>
<span id="L1232"><span class="lineNum">    1232</span> <span class="tlaGNC">           8 :                 pos--;</span></span>
<span id="L1233"><span class="lineNum">    1233</span> <span class="tlaGNC">           8 :                 mainFragment = scanNumberFragment();</span></span>
<span id="L1234"><span class="lineNum">    1234</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L1235"><span class="lineNum">    1235</span> <span class="tlaGNC">           8 :             // Separators are not allowed in the below cases</span></span>
<span id="L1236"><span class="lineNum">    1236</span> <span class="tlaGNC">           8 :             else if (!scanDigits()) {</span></span>
<span id="L1237"><span class="lineNum">    1237</span> <span class="tlaGNC">           8 :                 // NonOctalDecimalIntegerLiteral, emit error later</span></span>
<span id="L1238"><span class="lineNum">    1238</span> <span class="tlaGNC">           8 :                 // Separators in decimal and exponent parts are still allowed according to the spec</span></span>
<span id="L1239"><span class="lineNum">    1239</span> <span class="tlaGNC">           8 :                 tokenFlags |= TokenFlags.ContainsLeadingZero;</span></span>
<span id="L1240"><span class="lineNum">    1240</span> <span class="tlaGNC">           8 :                 mainFragment = &quot;&quot; + +tokenValue;</span></span>
<span id="L1241"><span class="lineNum">    1241</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L1242"><span class="lineNum">    1242</span> <span class="tlaGNC">           8 :             else if (!tokenValue) {</span></span>
<span id="L1243"><span class="lineNum">    1243</span> <span class="tlaGNC">           8 :                 // a single zero</span></span>
<span id="L1244"><span class="lineNum">    1244</span> <span class="tlaGNC">           8 :                 mainFragment = &quot;0&quot;;</span></span>
<span id="L1245"><span class="lineNum">    1245</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L1246"><span class="lineNum">    1246</span> <span class="tlaGNC">           8 :             else {</span></span>
<span id="L1247"><span class="lineNum">    1247</span> <span class="tlaGNC">           8 :                 // LegacyOctalIntegerLiteral</span></span>
<span id="L1248"><span class="lineNum">    1248</span> <span class="tlaGNC">           8 :                 tokenValue = &quot;&quot; + parseInt(tokenValue, 8);</span></span>
<span id="L1249"><span class="lineNum">    1249</span> <span class="tlaGNC">           8 :                 tokenFlags |= TokenFlags.Octal;</span></span>
<span id="L1250"><span class="lineNum">    1250</span> <span class="tlaGNC">           8 :                 const withMinus = token === SyntaxKind.MinusToken;</span></span>
<span id="L1251"><span class="lineNum">    1251</span> <span class="tlaGNC">           8 :                 const literal = (withMinus ? &quot;-&quot; : &quot;&quot;) + &quot;0o&quot; + (+tokenValue).toString(8);</span></span>
<span id="L1252"><span class="lineNum">    1252</span> <span class="tlaGNC">           8 :                 if (withMinus) start--;</span></span>
<span id="L1253"><span class="lineNum">    1253</span> <span class="tlaGNC">           8 :                 error(Diagnostics.Octal_literals_are_not_allowed_Use_the_syntax_0, start, pos - start, literal);</span></span>
<span id="L1254"><span class="lineNum">    1254</span> <span class="tlaGNC">           8 :                 return SyntaxKind.NumericLiteral;</span></span>
<span id="L1255"><span class="lineNum">    1255</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L1256"><span class="lineNum">    1256</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L1257"><span class="lineNum">    1257</span> <span class="tlaGNC">           8 :         else {</span></span>
<span id="L1258"><span class="lineNum">    1258</span> <span class="tlaGNC">           8 :             mainFragment = scanNumberFragment();</span></span>
<span id="L1259"><span class="lineNum">    1259</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L1260"><span class="lineNum">    1260</span> <span class="tlaGNC">           8 :         let decimalFragment: string | undefined;</span></span>
<span id="L1261"><span class="lineNum">    1261</span> <span class="tlaGNC">           8 :         let scientificFragment: string | undefined;</span></span>
<span id="L1262"><span class="lineNum">    1262</span> <span class="tlaGNC">           8 :         if (charCodeUnchecked(pos) === CharacterCodes.dot) {</span></span>
<span id="L1263"><span class="lineNum">    1263</span> <span class="tlaGNC">           8 :             pos++;</span></span>
<span id="L1264"><span class="lineNum">    1264</span> <span class="tlaGNC">           8 :             decimalFragment = scanNumberFragment();</span></span>
<span id="L1265"><span class="lineNum">    1265</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L1266"><span class="lineNum">    1266</span> <span class="tlaGNC">           8 :         let end = pos;</span></span>
<span id="L1267"><span class="lineNum">    1267</span> <span class="tlaGNC">           8 :         if (charCodeUnchecked(pos) === CharacterCodes.E || charCodeUnchecked(pos) === CharacterCodes.e) {</span></span>
<span id="L1268"><span class="lineNum">    1268</span> <span class="tlaGNC">           8 :             pos++;</span></span>
<span id="L1269"><span class="lineNum">    1269</span> <span class="tlaGNC">           8 :             tokenFlags |= TokenFlags.Scientific;</span></span>
<span id="L1270"><span class="lineNum">    1270</span> <span class="tlaGNC">           8 :             if (charCodeUnchecked(pos) === CharacterCodes.plus || charCodeUnchecked(pos) === CharacterCodes.minus) pos++;</span></span>
<span id="L1271"><span class="lineNum">    1271</span> <span class="tlaGNC">           8 :             const preNumericPart = pos;</span></span>
<span id="L1272"><span class="lineNum">    1272</span> <span class="tlaGNC">           8 :             const finalFragment = scanNumberFragment();</span></span>
<span id="L1273"><span class="lineNum">    1273</span> <span class="tlaGNC">           8 :             if (!finalFragment) {</span></span>
<span id="L1274"><span class="lineNum">    1274</span> <span class="tlaGNC">           8 :                 error(Diagnostics.Digit_expected);</span></span>
<span id="L1275"><span class="lineNum">    1275</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L1276"><span class="lineNum">    1276</span> <span class="tlaGNC">           8 :             else {</span></span>
<span id="L1277"><span class="lineNum">    1277</span> <span class="tlaGNC">           8 :                 scientificFragment = text.substring(end, preNumericPart) + finalFragment;</span></span>
<span id="L1278"><span class="lineNum">    1278</span> <span class="tlaGNC">           8 :                 end = pos;</span></span>
<span id="L1279"><span class="lineNum">    1279</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L1280"><span class="lineNum">    1280</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L1281"><span class="lineNum">    1281</span> <span class="tlaGNC">           8 :         let result: string;</span></span>
<span id="L1282"><span class="lineNum">    1282</span> <span class="tlaGNC">           8 :         if (tokenFlags &amp; TokenFlags.ContainsSeparator) {</span></span>
<span id="L1283"><span class="lineNum">    1283</span> <span class="tlaGNC">           8 :             result = mainFragment;</span></span>
<span id="L1284"><span class="lineNum">    1284</span> <span class="tlaGNC">           8 :             if (decimalFragment) {</span></span>
<span id="L1285"><span class="lineNum">    1285</span> <span class="tlaGNC">           8 :                 result += &quot;.&quot; + decimalFragment;</span></span>
<span id="L1286"><span class="lineNum">    1286</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L1287"><span class="lineNum">    1287</span> <span class="tlaGNC">           8 :             if (scientificFragment) {</span></span>
<span id="L1288"><span class="lineNum">    1288</span> <span class="tlaGNC">           8 :                 result += scientificFragment;</span></span>
<span id="L1289"><span class="lineNum">    1289</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L1290"><span class="lineNum">    1290</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L1291"><span class="lineNum">    1291</span> <span class="tlaGNC">           8 :         else {</span></span>
<span id="L1292"><span class="lineNum">    1292</span> <span class="tlaGNC">           8 :             result = text.substring(start, end); // No need to use all the fragments; no _ removal needed</span></span>
<span id="L1293"><span class="lineNum">    1293</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L1294"><span class="lineNum">    1294</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1295"><span class="lineNum">    1295</span> <span class="tlaGNC">           8 :         if (tokenFlags &amp; TokenFlags.ContainsLeadingZero) {</span></span>
<span id="L1296"><span class="lineNum">    1296</span> <span class="tlaGNC">           8 :             error(Diagnostics.Decimals_with_leading_zeros_are_not_allowed, start, end - start);</span></span>
<span id="L1297"><span class="lineNum">    1297</span> <span class="tlaGNC">           8 :             // if a literal has a leading zero, it must not be bigint</span></span>
<span id="L1298"><span class="lineNum">    1298</span> <span class="tlaGNC">           8 :             tokenValue = &quot;&quot; + +result;</span></span>
<span id="L1299"><span class="lineNum">    1299</span> <span class="tlaGNC">           8 :             return SyntaxKind.NumericLiteral;</span></span>
<span id="L1300"><span class="lineNum">    1300</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L1301"><span class="lineNum">    1301</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1302"><span class="lineNum">    1302</span> <span class="tlaGNC">           8 :         if (decimalFragment !== undefined || tokenFlags &amp; TokenFlags.Scientific) {</span></span>
<span id="L1303"><span class="lineNum">    1303</span> <span class="tlaGNC">           8 :             checkForIdentifierStartAfterNumericLiteral(start, decimalFragment === undefined &amp;&amp; !!(tokenFlags &amp; TokenFlags.Scientific));</span></span>
<span id="L1304"><span class="lineNum">    1304</span> <span class="tlaGNC">           8 :             // if value is not an integer, it can be safely coerced to a number</span></span>
<span id="L1305"><span class="lineNum">    1305</span> <span class="tlaGNC">           8 :             tokenValue = &quot;&quot; + +result;</span></span>
<span id="L1306"><span class="lineNum">    1306</span> <span class="tlaGNC">           8 :             return SyntaxKind.NumericLiteral;</span></span>
<span id="L1307"><span class="lineNum">    1307</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L1308"><span class="lineNum">    1308</span> <span class="tlaGNC">           8 :         else {</span></span>
<span id="L1309"><span class="lineNum">    1309</span> <span class="tlaGNC">           8 :             tokenValue = result;</span></span>
<span id="L1310"><span class="lineNum">    1310</span> <span class="tlaGNC">           8 :             const type = checkBigIntSuffix(); // if value is an integer, check whether it is a bigint</span></span>
<span id="L1311"><span class="lineNum">    1311</span> <span class="tlaGNC">           8 :             checkForIdentifierStartAfterNumericLiteral(start);</span></span>
<span id="L1312"><span class="lineNum">    1312</span> <span class="tlaGNC">           8 :             return type;</span></span>
<span id="L1313"><span class="lineNum">    1313</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L1314"><span class="lineNum">    1314</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L1315"><span class="lineNum">    1315</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1316"><span class="lineNum">    1316</span> <span class="tlaGNC">           8 :     function checkForIdentifierStartAfterNumericLiteral(numericStart: number, isScientific?: boolean) {</span></span>
<span id="L1317"><span class="lineNum">    1317</span> <span class="tlaGNC">           8 :         if (!isIdentifierStart(codePointUnchecked(pos), languageVersion)) {</span></span>
<span id="L1318"><span class="lineNum">    1318</span> <span class="tlaGNC">           8 :             return;</span></span>
<span id="L1319"><span class="lineNum">    1319</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L1320"><span class="lineNum">    1320</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1321"><span class="lineNum">    1321</span> <span class="tlaGNC">           8 :         const identifierStart = pos;</span></span>
<span id="L1322"><span class="lineNum">    1322</span> <span class="tlaGNC">           8 :         const { length } = scanIdentifierParts();</span></span>
<span id="L1323"><span class="lineNum">    1323</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1324"><span class="lineNum">    1324</span> <span class="tlaGNC">           8 :         if (length === 1 &amp;&amp; text[identifierStart] === &quot;n&quot;) {</span></span>
<span id="L1325"><span class="lineNum">    1325</span> <span class="tlaGNC">           8 :             if (isScientific) {</span></span>
<span id="L1326"><span class="lineNum">    1326</span> <span class="tlaGNC">           8 :                 error(Diagnostics.A_bigint_literal_cannot_use_exponential_notation, numericStart, identifierStart - numericStart + 1);</span></span>
<span id="L1327"><span class="lineNum">    1327</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L1328"><span class="lineNum">    1328</span> <span class="tlaGNC">           8 :             else {</span></span>
<span id="L1329"><span class="lineNum">    1329</span> <span class="tlaGNC">           8 :                 error(Diagnostics.A_bigint_literal_must_be_an_integer, numericStart, identifierStart - numericStart + 1);</span></span>
<span id="L1330"><span class="lineNum">    1330</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L1331"><span class="lineNum">    1331</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L1332"><span class="lineNum">    1332</span> <span class="tlaGNC">           8 :         else {</span></span>
<span id="L1333"><span class="lineNum">    1333</span> <span class="tlaGNC">           8 :             error(Diagnostics.An_identifier_or_keyword_cannot_immediately_follow_a_numeric_literal, identifierStart, length);</span></span>
<span id="L1334"><span class="lineNum">    1334</span> <span class="tlaGNC">           8 :             pos = identifierStart;</span></span>
<span id="L1335"><span class="lineNum">    1335</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L1336"><span class="lineNum">    1336</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L1337"><span class="lineNum">    1337</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1338"><span class="lineNum">    1338</span> <span class="tlaGNC">           8 :     function scanDigits(): boolean {</span></span>
<span id="L1339"><span class="lineNum">    1339</span> <span class="tlaGNC">           8 :         const start = pos;</span></span>
<span id="L1340"><span class="lineNum">    1340</span> <span class="tlaGNC">           8 :         let isOctal = true;</span></span>
<span id="L1341"><span class="lineNum">    1341</span> <span class="tlaGNC">           8 :         while (isDigit(charCodeChecked(pos))) {</span></span>
<span id="L1342"><span class="lineNum">    1342</span> <span class="tlaGNC">           8 :             if (!isOctalDigit(charCodeUnchecked(pos))) {</span></span>
<span id="L1343"><span class="lineNum">    1343</span> <span class="tlaGNC">           8 :                 isOctal = false;</span></span>
<span id="L1344"><span class="lineNum">    1344</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L1345"><span class="lineNum">    1345</span> <span class="tlaGNC">           8 :             pos++;</span></span>
<span id="L1346"><span class="lineNum">    1346</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L1347"><span class="lineNum">    1347</span> <span class="tlaGNC">           8 :         tokenValue = text.substring(start, pos);</span></span>
<span id="L1348"><span class="lineNum">    1348</span> <span class="tlaGNC">           8 :         return isOctal;</span></span>
<span id="L1349"><span class="lineNum">    1349</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L1350"><span class="lineNum">    1350</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1351"><span class="lineNum">    1351</span> <span class="tlaGNC">           8 :     /**</span></span>
<span id="L1352"><span class="lineNum">    1352</span> <span class="tlaGNC">           8 :      * Scans the given number of hexadecimal digits in the text,</span></span>
<span id="L1353"><span class="lineNum">    1353</span> <span class="tlaGNC">           8 :      * returning -1 if the given number is unavailable.</span></span>
<span id="L1354"><span class="lineNum">    1354</span> <span class="tlaGNC">           8 :      */</span></span>
<span id="L1355"><span class="lineNum">    1355</span> <span class="tlaGNC">           8 :     function scanExactNumberOfHexDigits(count: number, canHaveSeparators: boolean): number {</span></span>
<span id="L1356"><span class="lineNum">    1356</span> <span class="tlaGNC">           8 :         const valueString = scanHexDigits(/*minCount*/ count, /*scanAsManyAsPossible*/ false, canHaveSeparators);</span></span>
<span id="L1357"><span class="lineNum">    1357</span> <span class="tlaGNC">           8 :         return valueString ? parseInt(valueString, 16) : -1;</span></span>
<span id="L1358"><span class="lineNum">    1358</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L1359"><span class="lineNum">    1359</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1360"><span class="lineNum">    1360</span> <span class="tlaGNC">           8 :     /**</span></span>
<span id="L1361"><span class="lineNum">    1361</span> <span class="tlaGNC">           8 :      * Scans as many hexadecimal digits as are available in the text,</span></span>
<span id="L1362"><span class="lineNum">    1362</span> <span class="tlaGNC">           8 :      * returning &quot;&quot; if the given number of digits was unavailable.</span></span>
<span id="L1363"><span class="lineNum">    1363</span> <span class="tlaGNC">           8 :      */</span></span>
<span id="L1364"><span class="lineNum">    1364</span> <span class="tlaGNC">           8 :     function scanMinimumNumberOfHexDigits(count: number, canHaveSeparators: boolean): string {</span></span>
<span id="L1365"><span class="lineNum">    1365</span> <span class="tlaGNC">           8 :         return scanHexDigits(/*minCount*/ count, /*scanAsManyAsPossible*/ true, canHaveSeparators);</span></span>
<span id="L1366"><span class="lineNum">    1366</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L1367"><span class="lineNum">    1367</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1368"><span class="lineNum">    1368</span> <span class="tlaGNC">           8 :     function scanHexDigits(minCount: number, scanAsManyAsPossible: boolean, canHaveSeparators: boolean): string {</span></span>
<span id="L1369"><span class="lineNum">    1369</span> <span class="tlaGNC">           8 :         let valueChars: number[] = [];</span></span>
<span id="L1370"><span class="lineNum">    1370</span> <span class="tlaGNC">           8 :         let allowSeparator = false;</span></span>
<span id="L1371"><span class="lineNum">    1371</span> <span class="tlaGNC">           8 :         let isPreviousTokenSeparator = false;</span></span>
<span id="L1372"><span class="lineNum">    1372</span> <span class="tlaGNC">           8 :         while (valueChars.length &lt; minCount || scanAsManyAsPossible) {</span></span>
<span id="L1373"><span class="lineNum">    1373</span> <span class="tlaGNC">           8 :             let ch = charCodeUnchecked(pos);</span></span>
<span id="L1374"><span class="lineNum">    1374</span> <span class="tlaGNC">           8 :             if (canHaveSeparators &amp;&amp; ch === CharacterCodes._) {</span></span>
<span id="L1375"><span class="lineNum">    1375</span> <span class="tlaGNC">           8 :                 tokenFlags |= TokenFlags.ContainsSeparator;</span></span>
<span id="L1376"><span class="lineNum">    1376</span> <span class="tlaGNC">           8 :                 if (allowSeparator) {</span></span>
<span id="L1377"><span class="lineNum">    1377</span> <span class="tlaGNC">           8 :                     allowSeparator = false;</span></span>
<span id="L1378"><span class="lineNum">    1378</span> <span class="tlaGNC">           8 :                     isPreviousTokenSeparator = true;</span></span>
<span id="L1379"><span class="lineNum">    1379</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L1380"><span class="lineNum">    1380</span> <span class="tlaGNC">           8 :                 else if (isPreviousTokenSeparator) {</span></span>
<span id="L1381"><span class="lineNum">    1381</span> <span class="tlaGNC">           8 :                     error(Diagnostics.Multiple_consecutive_numeric_separators_are_not_permitted, pos, 1);</span></span>
<span id="L1382"><span class="lineNum">    1382</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L1383"><span class="lineNum">    1383</span> <span class="tlaGNC">           8 :                 else {</span></span>
<span id="L1384"><span class="lineNum">    1384</span> <span class="tlaGNC">           8 :                     error(Diagnostics.Numeric_separators_are_not_allowed_here, pos, 1);</span></span>
<span id="L1385"><span class="lineNum">    1385</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L1386"><span class="lineNum">    1386</span> <span class="tlaGNC">           8 :                 pos++;</span></span>
<span id="L1387"><span class="lineNum">    1387</span> <span class="tlaGNC">           8 :                 continue;</span></span>
<span id="L1388"><span class="lineNum">    1388</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L1389"><span class="lineNum">    1389</span> <span class="tlaGNC">           8 :             allowSeparator = canHaveSeparators;</span></span>
<span id="L1390"><span class="lineNum">    1390</span> <span class="tlaGNC">           8 :             if (ch &gt;= CharacterCodes.A &amp;&amp; ch &lt;= CharacterCodes.F) {</span></span>
<span id="L1391"><span class="lineNum">    1391</span> <span class="tlaGNC">           8 :                 ch += CharacterCodes.a - CharacterCodes.A; // standardize hex literals to lowercase</span></span>
<span id="L1392"><span class="lineNum">    1392</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L1393"><span class="lineNum">    1393</span> <span class="tlaGNC">           8 :             else if (</span></span>
<span id="L1394"><span class="lineNum">    1394</span> <span class="tlaGNC">           8 :                 !((ch &gt;= CharacterCodes._0 &amp;&amp; ch &lt;= CharacterCodes._9) ||</span></span>
<span id="L1395"><span class="lineNum">    1395</span> <span class="tlaGNC">           8 :                     (ch &gt;= CharacterCodes.a &amp;&amp; ch &lt;= CharacterCodes.f))</span></span>
<span id="L1396"><span class="lineNum">    1396</span> <span class="tlaGNC">           8 :             ) {</span></span>
<span id="L1397"><span class="lineNum">    1397</span> <span class="tlaGNC">           8 :                 break;</span></span>
<span id="L1398"><span class="lineNum">    1398</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L1399"><span class="lineNum">    1399</span> <span class="tlaGNC">           8 :             valueChars.push(ch);</span></span>
<span id="L1400"><span class="lineNum">    1400</span> <span class="tlaGNC">           8 :             pos++;</span></span>
<span id="L1401"><span class="lineNum">    1401</span> <span class="tlaGNC">           8 :             isPreviousTokenSeparator = false;</span></span>
<span id="L1402"><span class="lineNum">    1402</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L1403"><span class="lineNum">    1403</span> <span class="tlaGNC">           8 :         if (valueChars.length &lt; minCount) {</span></span>
<span id="L1404"><span class="lineNum">    1404</span> <span class="tlaGNC">           8 :             valueChars = [];</span></span>
<span id="L1405"><span class="lineNum">    1405</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L1406"><span class="lineNum">    1406</span> <span class="tlaGNC">           8 :         if (charCodeUnchecked(pos - 1) === CharacterCodes._) {</span></span>
<span id="L1407"><span class="lineNum">    1407</span> <span class="tlaGNC">           8 :             error(Diagnostics.Numeric_separators_are_not_allowed_here, pos - 1, 1);</span></span>
<span id="L1408"><span class="lineNum">    1408</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L1409"><span class="lineNum">    1409</span> <span class="tlaGNC">           8 :         return String.fromCharCode(...valueChars);</span></span>
<span id="L1410"><span class="lineNum">    1410</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L1411"><span class="lineNum">    1411</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1412"><span class="lineNum">    1412</span> <span class="tlaGNC">           8 :     function scanString(jsxAttributeString = false): string {</span></span>
<span id="L1413"><span class="lineNum">    1413</span> <span class="tlaGNC">           8 :         const quote = charCodeUnchecked(pos);</span></span>
<span id="L1414"><span class="lineNum">    1414</span> <span class="tlaGNC">           8 :         pos++;</span></span>
<span id="L1415"><span class="lineNum">    1415</span> <span class="tlaGNC">           8 :         let result = &quot;&quot;;</span></span>
<span id="L1416"><span class="lineNum">    1416</span> <span class="tlaGNC">           8 :         let start = pos;</span></span>
<span id="L1417"><span class="lineNum">    1417</span> <span class="tlaGNC">           8 :         while (true) {</span></span>
<span id="L1418"><span class="lineNum">    1418</span> <span class="tlaGNC">           8 :             if (pos &gt;= end) {</span></span>
<span id="L1419"><span class="lineNum">    1419</span> <span class="tlaGNC">           8 :                 result += text.substring(start, pos);</span></span>
<span id="L1420"><span class="lineNum">    1420</span> <span class="tlaGNC">           8 :                 tokenFlags |= TokenFlags.Unterminated;</span></span>
<span id="L1421"><span class="lineNum">    1421</span> <span class="tlaGNC">           8 :                 error(Diagnostics.Unterminated_string_literal);</span></span>
<span id="L1422"><span class="lineNum">    1422</span> <span class="tlaGNC">           8 :                 break;</span></span>
<span id="L1423"><span class="lineNum">    1423</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L1424"><span class="lineNum">    1424</span> <span class="tlaGNC">           8 :             const ch = charCodeUnchecked(pos);</span></span>
<span id="L1425"><span class="lineNum">    1425</span> <span class="tlaGNC">           8 :             if (ch === quote) {</span></span>
<span id="L1426"><span class="lineNum">    1426</span> <span class="tlaGNC">           8 :                 result += text.substring(start, pos);</span></span>
<span id="L1427"><span class="lineNum">    1427</span> <span class="tlaGNC">           8 :                 pos++;</span></span>
<span id="L1428"><span class="lineNum">    1428</span> <span class="tlaGNC">           8 :                 break;</span></span>
<span id="L1429"><span class="lineNum">    1429</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L1430"><span class="lineNum">    1430</span> <span class="tlaGNC">           8 :             if (ch === CharacterCodes.backslash &amp;&amp; !jsxAttributeString) {</span></span>
<span id="L1431"><span class="lineNum">    1431</span> <span class="tlaGNC">           8 :                 result += text.substring(start, pos);</span></span>
<span id="L1432"><span class="lineNum">    1432</span> <span class="tlaGNC">           8 :                 result += scanEscapeSequence(EscapeSequenceScanningFlags.String | EscapeSequenceScanningFlags.ReportErrors);</span></span>
<span id="L1433"><span class="lineNum">    1433</span> <span class="tlaGNC">           8 :                 start = pos;</span></span>
<span id="L1434"><span class="lineNum">    1434</span> <span class="tlaGNC">           8 :                 continue;</span></span>
<span id="L1435"><span class="lineNum">    1435</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L1436"><span class="lineNum">    1436</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1437"><span class="lineNum">    1437</span> <span class="tlaGNC">           8 :             if ((ch === CharacterCodes.lineFeed || ch === CharacterCodes.carriageReturn) &amp;&amp; !jsxAttributeString) {</span></span>
<span id="L1438"><span class="lineNum">    1438</span> <span class="tlaGNC">           8 :                 result += text.substring(start, pos);</span></span>
<span id="L1439"><span class="lineNum">    1439</span> <span class="tlaGNC">           8 :                 tokenFlags |= TokenFlags.Unterminated;</span></span>
<span id="L1440"><span class="lineNum">    1440</span> <span class="tlaGNC">           8 :                 error(Diagnostics.Unterminated_string_literal);</span></span>
<span id="L1441"><span class="lineNum">    1441</span> <span class="tlaGNC">           8 :                 break;</span></span>
<span id="L1442"><span class="lineNum">    1442</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L1443"><span class="lineNum">    1443</span> <span class="tlaGNC">           8 :             pos++;</span></span>
<span id="L1444"><span class="lineNum">    1444</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L1445"><span class="lineNum">    1445</span> <span class="tlaGNC">           8 :         return result;</span></span>
<span id="L1446"><span class="lineNum">    1446</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L1447"><span class="lineNum">    1447</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1448"><span class="lineNum">    1448</span> <span class="tlaGNC">           8 :     /**</span></span>
<span id="L1449"><span class="lineNum">    1449</span> <span class="tlaGNC">           8 :      * Sets the current 'tokenValue' and returns a NoSubstitutionTemplateLiteral or</span></span>
<span id="L1450"><span class="lineNum">    1450</span> <span class="tlaGNC">           8 :      * a literal component of a TemplateExpression.</span></span>
<span id="L1451"><span class="lineNum">    1451</span> <span class="tlaGNC">           8 :      */</span></span>
<span id="L1452"><span class="lineNum">    1452</span> <span class="tlaGNC">           8 :     function scanTemplateAndSetTokenValue(shouldEmitInvalidEscapeError: boolean): SyntaxKind {</span></span>
<span id="L1453"><span class="lineNum">    1453</span> <span class="tlaGNC">           8 :         const startedWithBacktick = charCodeUnchecked(pos) === CharacterCodes.backtick;</span></span>
<span id="L1454"><span class="lineNum">    1454</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1455"><span class="lineNum">    1455</span> <span class="tlaGNC">           8 :         pos++;</span></span>
<span id="L1456"><span class="lineNum">    1456</span> <span class="tlaGNC">           8 :         let start = pos;</span></span>
<span id="L1457"><span class="lineNum">    1457</span> <span class="tlaGNC">           8 :         let contents = &quot;&quot;;</span></span>
<span id="L1458"><span class="lineNum">    1458</span> <span class="tlaGNC">           8 :         let resultingToken: SyntaxKind;</span></span>
<span id="L1459"><span class="lineNum">    1459</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1460"><span class="lineNum">    1460</span> <span class="tlaGNC">           8 :         while (true) {</span></span>
<span id="L1461"><span class="lineNum">    1461</span> <span class="tlaGNC">           8 :             if (pos &gt;= end) {</span></span>
<span id="L1462"><span class="lineNum">    1462</span> <span class="tlaGNC">           8 :                 contents += text.substring(start, pos);</span></span>
<span id="L1463"><span class="lineNum">    1463</span> <span class="tlaGNC">           8 :                 tokenFlags |= TokenFlags.Unterminated;</span></span>
<span id="L1464"><span class="lineNum">    1464</span> <span class="tlaGNC">           8 :                 error(Diagnostics.Unterminated_template_literal);</span></span>
<span id="L1465"><span class="lineNum">    1465</span> <span class="tlaGNC">           8 :                 resultingToken = startedWithBacktick ? SyntaxKind.NoSubstitutionTemplateLiteral : SyntaxKind.TemplateTail;</span></span>
<span id="L1466"><span class="lineNum">    1466</span> <span class="tlaGNC">           8 :                 break;</span></span>
<span id="L1467"><span class="lineNum">    1467</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L1468"><span class="lineNum">    1468</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1469"><span class="lineNum">    1469</span> <span class="tlaGNC">           8 :             const currChar = charCodeUnchecked(pos);</span></span>
<span id="L1470"><span class="lineNum">    1470</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1471"><span class="lineNum">    1471</span> <span class="tlaGNC">           8 :             // '`'</span></span>
<span id="L1472"><span class="lineNum">    1472</span> <span class="tlaGNC">           8 :             if (currChar === CharacterCodes.backtick) {</span></span>
<span id="L1473"><span class="lineNum">    1473</span> <span class="tlaGNC">           8 :                 contents += text.substring(start, pos);</span></span>
<span id="L1474"><span class="lineNum">    1474</span> <span class="tlaGNC">           8 :                 pos++;</span></span>
<span id="L1475"><span class="lineNum">    1475</span> <span class="tlaGNC">           8 :                 resultingToken = startedWithBacktick ? SyntaxKind.NoSubstitutionTemplateLiteral : SyntaxKind.TemplateTail;</span></span>
<span id="L1476"><span class="lineNum">    1476</span> <span class="tlaGNC">           8 :                 break;</span></span>
<span id="L1477"><span class="lineNum">    1477</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L1478"><span class="lineNum">    1478</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1479"><span class="lineNum">    1479</span> <span class="tlaGNC">           8 :             // '${'</span></span>
<span id="L1480"><span class="lineNum">    1480</span> <span class="tlaGNC">           8 :             if (currChar === CharacterCodes.$ &amp;&amp; pos + 1 &lt; end &amp;&amp; charCodeUnchecked(pos + 1) === CharacterCodes.openBrace) {</span></span>
<span id="L1481"><span class="lineNum">    1481</span> <span class="tlaGNC">           8 :                 contents += text.substring(start, pos);</span></span>
<span id="L1482"><span class="lineNum">    1482</span> <span class="tlaGNC">           8 :                 pos += 2;</span></span>
<span id="L1483"><span class="lineNum">    1483</span> <span class="tlaGNC">           8 :                 resultingToken = startedWithBacktick ? SyntaxKind.TemplateHead : SyntaxKind.TemplateMiddle;</span></span>
<span id="L1484"><span class="lineNum">    1484</span> <span class="tlaGNC">           8 :                 break;</span></span>
<span id="L1485"><span class="lineNum">    1485</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L1486"><span class="lineNum">    1486</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1487"><span class="lineNum">    1487</span> <span class="tlaGNC">           8 :             // Escape character</span></span>
<span id="L1488"><span class="lineNum">    1488</span> <span class="tlaGNC">           8 :             if (currChar === CharacterCodes.backslash) {</span></span>
<span id="L1489"><span class="lineNum">    1489</span> <span class="tlaGNC">           8 :                 contents += text.substring(start, pos);</span></span>
<span id="L1490"><span class="lineNum">    1490</span> <span class="tlaGNC">           8 :                 contents += scanEscapeSequence(EscapeSequenceScanningFlags.String | (shouldEmitInvalidEscapeError ? EscapeSequenceScanningFlags.ReportErrors : 0));</span></span>
<span id="L1491"><span class="lineNum">    1491</span> <span class="tlaGNC">           8 :                 start = pos;</span></span>
<span id="L1492"><span class="lineNum">    1492</span> <span class="tlaGNC">           8 :                 continue;</span></span>
<span id="L1493"><span class="lineNum">    1493</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L1494"><span class="lineNum">    1494</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1495"><span class="lineNum">    1495</span> <span class="tlaGNC">           8 :             // Speculated ECMAScript 6 Spec 11.8.6.1:</span></span>
<span id="L1496"><span class="lineNum">    1496</span> <span class="tlaGNC">           8 :             // &lt;CR&gt;&lt;LF&gt; and &lt;CR&gt; LineTerminatorSequences are normalized to &lt;LF&gt; for Template Values</span></span>
<span id="L1497"><span class="lineNum">    1497</span> <span class="tlaGNC">           8 :             if (currChar === CharacterCodes.carriageReturn) {</span></span>
<span id="L1498"><span class="lineNum">    1498</span> <span class="tlaGNC">           8 :                 contents += text.substring(start, pos);</span></span>
<span id="L1499"><span class="lineNum">    1499</span> <span class="tlaGNC">           8 :                 pos++;</span></span>
<span id="L1500"><span class="lineNum">    1500</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1501"><span class="lineNum">    1501</span> <span class="tlaGNC">           8 :                 if (pos &lt; end &amp;&amp; charCodeUnchecked(pos) === CharacterCodes.lineFeed) {</span></span>
<span id="L1502"><span class="lineNum">    1502</span> <span class="tlaGNC">           8 :                     pos++;</span></span>
<span id="L1503"><span class="lineNum">    1503</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L1504"><span class="lineNum">    1504</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1505"><span class="lineNum">    1505</span> <span class="tlaGNC">           8 :                 contents += &quot;\n&quot;;</span></span>
<span id="L1506"><span class="lineNum">    1506</span> <span class="tlaGNC">           8 :                 start = pos;</span></span>
<span id="L1507"><span class="lineNum">    1507</span> <span class="tlaGNC">           8 :                 continue;</span></span>
<span id="L1508"><span class="lineNum">    1508</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L1509"><span class="lineNum">    1509</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1510"><span class="lineNum">    1510</span> <span class="tlaGNC">           8 :             pos++;</span></span>
<span id="L1511"><span class="lineNum">    1511</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L1512"><span class="lineNum">    1512</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1513"><span class="lineNum">    1513</span> <span class="tlaGNC">           8 :         Debug.assert(resultingToken !== undefined);</span></span>
<span id="L1514"><span class="lineNum">    1514</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1515"><span class="lineNum">    1515</span> <span class="tlaGNC">           8 :         tokenValue = contents;</span></span>
<span id="L1516"><span class="lineNum">    1516</span> <span class="tlaGNC">           8 :         return resultingToken;</span></span>
<span id="L1517"><span class="lineNum">    1517</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L1518"><span class="lineNum">    1518</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1519"><span class="lineNum">    1519</span> <span class="tlaGNC">           8 :     // Extract from Section A.1</span></span>
<span id="L1520"><span class="lineNum">    1520</span> <span class="tlaGNC">           8 :     // EscapeSequence ::=</span></span>
<span id="L1521"><span class="lineNum">    1521</span> <span class="tlaGNC">           8 :     //     | CharacterEscapeSequence</span></span>
<span id="L1522"><span class="lineNum">    1522</span> <span class="tlaGNC">           8 :     //     | 0 (?![0-9])</span></span>
<span id="L1523"><span class="lineNum">    1523</span> <span class="tlaGNC">           8 :     //     | LegacyOctalEscapeSequence</span></span>
<span id="L1524"><span class="lineNum">    1524</span> <span class="tlaGNC">           8 :     //     | NonOctalDecimalEscapeSequence</span></span>
<span id="L1525"><span class="lineNum">    1525</span> <span class="tlaGNC">           8 :     //     | HexEscapeSequence</span></span>
<span id="L1526"><span class="lineNum">    1526</span> <span class="tlaGNC">           8 :     //     | UnicodeEscapeSequence</span></span>
<span id="L1527"><span class="lineNum">    1527</span> <span class="tlaGNC">           8 :     // LegacyOctalEscapeSequence ::=</span></span>
<span id="L1528"><span class="lineNum">    1528</span> <span class="tlaGNC">           8 :     //     | '0' (?=[89])</span></span>
<span id="L1529"><span class="lineNum">    1529</span> <span class="tlaGNC">           8 :     //     | [1-7] (?![0-7])</span></span>
<span id="L1530"><span class="lineNum">    1530</span> <span class="tlaGNC">           8 :     //     | [0-3] [0-7] [0-7]?</span></span>
<span id="L1531"><span class="lineNum">    1531</span> <span class="tlaGNC">           8 :     //     | [4-7] [0-7]</span></span>
<span id="L1532"><span class="lineNum">    1532</span> <span class="tlaGNC">           8 :     // NonOctalDecimalEscapeSequence ::= [89]</span></span>
<span id="L1533"><span class="lineNum">    1533</span> <span class="tlaGNC">           8 :     function scanEscapeSequence(flags: EscapeSequenceScanningFlags): string {</span></span>
<span id="L1534"><span class="lineNum">    1534</span> <span class="tlaGNC">           8 :         const start = pos;</span></span>
<span id="L1535"><span class="lineNum">    1535</span> <span class="tlaGNC">           8 :         pos++;</span></span>
<span id="L1536"><span class="lineNum">    1536</span> <span class="tlaGNC">           8 :         if (pos &gt;= end) {</span></span>
<span id="L1537"><span class="lineNum">    1537</span> <span class="tlaGNC">           8 :             error(Diagnostics.Unexpected_end_of_text);</span></span>
<span id="L1538"><span class="lineNum">    1538</span> <span class="tlaGNC">           8 :             return &quot;&quot;;</span></span>
<span id="L1539"><span class="lineNum">    1539</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L1540"><span class="lineNum">    1540</span> <span class="tlaGNC">           8 :         const ch = charCodeUnchecked(pos);</span></span>
<span id="L1541"><span class="lineNum">    1541</span> <span class="tlaGNC">           8 :         pos++;</span></span>
<span id="L1542"><span class="lineNum">    1542</span> <span class="tlaGNC">           8 :         switch (ch) {</span></span>
<span id="L1543"><span class="lineNum">    1543</span> <span class="tlaGNC">           8 :             case CharacterCodes._0:</span></span>
<span id="L1544"><span class="lineNum">    1544</span> <span class="tlaGNC">           8 :                 // Although '0' preceding any digit is treated as LegacyOctalEscapeSequence,</span></span>
<span id="L1545"><span class="lineNum">    1545</span> <span class="tlaGNC">           8 :                 // '\08' should separately be interpreted as '\0' + '8'.</span></span>
<span id="L1546"><span class="lineNum">    1546</span> <span class="tlaGNC">           8 :                 if (pos &gt;= end || !isDigit(charCodeUnchecked(pos))) {</span></span>
<span id="L1547"><span class="lineNum">    1547</span> <span class="tlaGNC">           8 :                     return &quot;\0&quot;;</span></span>
<span id="L1548"><span class="lineNum">    1548</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L1549"><span class="lineNum">    1549</span> <span class="tlaGNC">           8 :             // '\01', '\011'</span></span>
<span id="L1550"><span class="lineNum">    1550</span> <span class="tlaGNC">           8 :             // falls through</span></span>
<span id="L1551"><span class="lineNum">    1551</span> <span class="tlaGNC">           8 :             case CharacterCodes._1:</span></span>
<span id="L1552"><span class="lineNum">    1552</span> <span class="tlaGNC">           8 :             case CharacterCodes._2:</span></span>
<span id="L1553"><span class="lineNum">    1553</span> <span class="tlaGNC">           8 :             case CharacterCodes._3:</span></span>
<span id="L1554"><span class="lineNum">    1554</span> <span class="tlaGNC">           8 :                 // '\1', '\17', '\177'</span></span>
<span id="L1555"><span class="lineNum">    1555</span> <span class="tlaGNC">           8 :                 if (pos &lt; end &amp;&amp; isOctalDigit(charCodeUnchecked(pos))) {</span></span>
<span id="L1556"><span class="lineNum">    1556</span> <span class="tlaGNC">           8 :                     pos++;</span></span>
<span id="L1557"><span class="lineNum">    1557</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L1558"><span class="lineNum">    1558</span> <span class="tlaGNC">           8 :             // '\17', '\177'</span></span>
<span id="L1559"><span class="lineNum">    1559</span> <span class="tlaGNC">           8 :             // falls through</span></span>
<span id="L1560"><span class="lineNum">    1560</span> <span class="tlaGNC">           8 :             case CharacterCodes._4:</span></span>
<span id="L1561"><span class="lineNum">    1561</span> <span class="tlaGNC">           8 :             case CharacterCodes._5:</span></span>
<span id="L1562"><span class="lineNum">    1562</span> <span class="tlaGNC">           8 :             case CharacterCodes._6:</span></span>
<span id="L1563"><span class="lineNum">    1563</span> <span class="tlaGNC">           8 :             case CharacterCodes._7:</span></span>
<span id="L1564"><span class="lineNum">    1564</span> <span class="tlaGNC">           8 :                 // '\4', '\47' but not '\477'</span></span>
<span id="L1565"><span class="lineNum">    1565</span> <span class="tlaGNC">           8 :                 if (pos &lt; end &amp;&amp; isOctalDigit(charCodeUnchecked(pos))) {</span></span>
<span id="L1566"><span class="lineNum">    1566</span> <span class="tlaGNC">           8 :                     pos++;</span></span>
<span id="L1567"><span class="lineNum">    1567</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L1568"><span class="lineNum">    1568</span> <span class="tlaGNC">           8 :                 // '\47'</span></span>
<span id="L1569"><span class="lineNum">    1569</span> <span class="tlaGNC">           8 :                 tokenFlags |= TokenFlags.ContainsInvalidEscape;</span></span>
<span id="L1570"><span class="lineNum">    1570</span> <span class="tlaGNC">           8 :                 if (flags &amp; EscapeSequenceScanningFlags.ReportInvalidEscapeErrors) {</span></span>
<span id="L1571"><span class="lineNum">    1571</span> <span class="tlaGNC">           8 :                     const code = parseInt(text.substring(start + 1, pos), 8);</span></span>
<span id="L1572"><span class="lineNum">    1572</span> <span class="tlaGNC">           8 :                     if (flags &amp; EscapeSequenceScanningFlags.RegularExpression &amp;&amp; !(flags &amp; EscapeSequenceScanningFlags.AtomEscape) &amp;&amp; ch !== CharacterCodes._0) {</span></span>
<span id="L1573"><span class="lineNum">    1573</span> <span class="tlaGNC">           8 :                         error(Diagnostics.Octal_escape_sequences_and_backreferences_are_not_allowed_in_a_character_class_If_this_was_intended_as_an_escape_sequence_use_the_syntax_0_instead, start, pos - start, &quot;\\x&quot; + code.toString(16).padStart(2, &quot;0&quot;));</span></span>
<span id="L1574"><span class="lineNum">    1574</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L1575"><span class="lineNum">    1575</span> <span class="tlaGNC">           8 :                     else {</span></span>
<span id="L1576"><span class="lineNum">    1576</span> <span class="tlaGNC">           8 :                         error(Diagnostics.Octal_escape_sequences_are_not_allowed_Use_the_syntax_0, start, pos - start, &quot;\\x&quot; + code.toString(16).padStart(2, &quot;0&quot;));</span></span>
<span id="L1577"><span class="lineNum">    1577</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L1578"><span class="lineNum">    1578</span> <span class="tlaGNC">           8 :                     return String.fromCharCode(code);</span></span>
<span id="L1579"><span class="lineNum">    1579</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L1580"><span class="lineNum">    1580</span> <span class="tlaGNC">           8 :                 return text.substring(start, pos);</span></span>
<span id="L1581"><span class="lineNum">    1581</span> <span class="tlaGNC">           8 :             case CharacterCodes._8:</span></span>
<span id="L1582"><span class="lineNum">    1582</span> <span class="tlaGNC">           8 :             case CharacterCodes._9:</span></span>
<span id="L1583"><span class="lineNum">    1583</span> <span class="tlaGNC">           8 :                 // the invalid '\8' and '\9'</span></span>
<span id="L1584"><span class="lineNum">    1584</span> <span class="tlaGNC">           8 :                 tokenFlags |= TokenFlags.ContainsInvalidEscape;</span></span>
<span id="L1585"><span class="lineNum">    1585</span> <span class="tlaGNC">           8 :                 if (flags &amp; EscapeSequenceScanningFlags.ReportInvalidEscapeErrors) {</span></span>
<span id="L1586"><span class="lineNum">    1586</span> <span class="tlaGNC">           8 :                     if (flags &amp; EscapeSequenceScanningFlags.RegularExpression &amp;&amp; !(flags &amp; EscapeSequenceScanningFlags.AtomEscape)) {</span></span>
<span id="L1587"><span class="lineNum">    1587</span> <span class="tlaGNC">           8 :                         error(Diagnostics.Decimal_escape_sequences_and_backreferences_are_not_allowed_in_a_character_class, start, pos - start);</span></span>
<span id="L1588"><span class="lineNum">    1588</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L1589"><span class="lineNum">    1589</span> <span class="tlaGNC">           8 :                     else {</span></span>
<span id="L1590"><span class="lineNum">    1590</span> <span class="tlaGNC">           8 :                         error(Diagnostics.Escape_sequence_0_is_not_allowed, start, pos - start, text.substring(start, pos));</span></span>
<span id="L1591"><span class="lineNum">    1591</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L1592"><span class="lineNum">    1592</span> <span class="tlaGNC">           8 :                     return String.fromCharCode(ch);</span></span>
<span id="L1593"><span class="lineNum">    1593</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L1594"><span class="lineNum">    1594</span> <span class="tlaGNC">           8 :                 return text.substring(start, pos);</span></span>
<span id="L1595"><span class="lineNum">    1595</span> <span class="tlaGNC">           8 :             case CharacterCodes.b:</span></span>
<span id="L1596"><span class="lineNum">    1596</span> <span class="tlaGNC">           8 :                 return &quot;\b&quot;;</span></span>
<span id="L1597"><span class="lineNum">    1597</span> <span class="tlaGNC">           8 :             case CharacterCodes.t:</span></span>
<span id="L1598"><span class="lineNum">    1598</span> <span class="tlaGNC">           8 :                 return &quot;\t&quot;;</span></span>
<span id="L1599"><span class="lineNum">    1599</span> <span class="tlaGNC">           8 :             case CharacterCodes.n:</span></span>
<span id="L1600"><span class="lineNum">    1600</span> <span class="tlaGNC">           8 :                 return &quot;\n&quot;;</span></span>
<span id="L1601"><span class="lineNum">    1601</span> <span class="tlaGNC">           8 :             case CharacterCodes.v:</span></span>
<span id="L1602"><span class="lineNum">    1602</span> <span class="tlaGNC">           8 :                 return &quot;\v&quot;;</span></span>
<span id="L1603"><span class="lineNum">    1603</span> <span class="tlaGNC">           8 :             case CharacterCodes.f:</span></span>
<span id="L1604"><span class="lineNum">    1604</span> <span class="tlaGNC">           8 :                 return &quot;\f&quot;;</span></span>
<span id="L1605"><span class="lineNum">    1605</span> <span class="tlaGNC">           8 :             case CharacterCodes.r:</span></span>
<span id="L1606"><span class="lineNum">    1606</span> <span class="tlaGNC">           8 :                 return &quot;\r&quot;;</span></span>
<span id="L1607"><span class="lineNum">    1607</span> <span class="tlaGNC">           8 :             case CharacterCodes.singleQuote:</span></span>
<span id="L1608"><span class="lineNum">    1608</span> <span class="tlaGNC">           8 :                 return &quot;'&quot;;</span></span>
<span id="L1609"><span class="lineNum">    1609</span> <span class="tlaGNC">           8 :             case CharacterCodes.doubleQuote:</span></span>
<span id="L1610"><span class="lineNum">    1610</span> <span class="tlaGNC">           8 :                 return '&quot;';</span></span>
<span id="L1611"><span class="lineNum">    1611</span> <span class="tlaGNC">           8 :             case CharacterCodes.u:</span></span>
<span id="L1612"><span class="lineNum">    1612</span> <span class="tlaGNC">           8 :                 if (</span></span>
<span id="L1613"><span class="lineNum">    1613</span> <span class="tlaGNC">           8 :                     flags &amp; EscapeSequenceScanningFlags.ScanExtendedUnicodeEscape &amp;&amp;</span></span>
<span id="L1614"><span class="lineNum">    1614</span> <span class="tlaGNC">           8 :                     pos &lt; end &amp;&amp; charCodeUnchecked(pos) === CharacterCodes.openBrace</span></span>
<span id="L1615"><span class="lineNum">    1615</span> <span class="tlaGNC">           8 :                 ) {</span></span>
<span id="L1616"><span class="lineNum">    1616</span> <span class="tlaGNC">           8 :                     // '\u{DDDDDD}'</span></span>
<span id="L1617"><span class="lineNum">    1617</span> <span class="tlaGNC">           8 :                     pos -= 2;</span></span>
<span id="L1618"><span class="lineNum">    1618</span> <span class="tlaGNC">           8 :                     return scanExtendedUnicodeEscape(!!(flags &amp; EscapeSequenceScanningFlags.ReportInvalidEscapeErrors));</span></span>
<span id="L1619"><span class="lineNum">    1619</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L1620"><span class="lineNum">    1620</span> <span class="tlaGNC">           8 :                 // '\uDDDD'</span></span>
<span id="L1621"><span class="lineNum">    1621</span> <span class="tlaGNC">           8 :                 for (; pos &lt; start + 6; pos++) {</span></span>
<span id="L1622"><span class="lineNum">    1622</span> <span class="tlaGNC">           8 :                     if (!(pos &lt; end &amp;&amp; isHexDigit(charCodeUnchecked(pos)))) {</span></span>
<span id="L1623"><span class="lineNum">    1623</span> <span class="tlaGNC">           8 :                         tokenFlags |= TokenFlags.ContainsInvalidEscape;</span></span>
<span id="L1624"><span class="lineNum">    1624</span> <span class="tlaGNC">           8 :                         if (flags &amp; EscapeSequenceScanningFlags.ReportInvalidEscapeErrors) {</span></span>
<span id="L1625"><span class="lineNum">    1625</span> <span class="tlaGNC">           8 :                             error(Diagnostics.Hexadecimal_digit_expected);</span></span>
<span id="L1626"><span class="lineNum">    1626</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L1627"><span class="lineNum">    1627</span> <span class="tlaGNC">           8 :                         return text.substring(start, pos);</span></span>
<span id="L1628"><span class="lineNum">    1628</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L1629"><span class="lineNum">    1629</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L1630"><span class="lineNum">    1630</span> <span class="tlaGNC">           8 :                 tokenFlags |= TokenFlags.UnicodeEscape;</span></span>
<span id="L1631"><span class="lineNum">    1631</span> <span class="tlaGNC">           8 :                 const escapedValue = parseInt(text.substring(start + 2, pos), 16);</span></span>
<span id="L1632"><span class="lineNum">    1632</span> <span class="tlaGNC">           8 :                 const escapedValueString = String.fromCharCode(escapedValue);</span></span>
<span id="L1633"><span class="lineNum">    1633</span> <span class="tlaGNC">           8 :                 if (</span></span>
<span id="L1634"><span class="lineNum">    1634</span> <span class="tlaGNC">           8 :                     flags &amp; EscapeSequenceScanningFlags.AnyUnicodeMode &amp;&amp; escapedValue &gt;= 0xD800 &amp;&amp; escapedValue &lt;= 0xDBFF &amp;&amp;</span></span>
<span id="L1635"><span class="lineNum">    1635</span> <span class="tlaGNC">           8 :                     pos + 6 &lt; end &amp;&amp; text.substring(pos, pos + 2) === &quot;\\u&quot; &amp;&amp; charCodeUnchecked(pos + 2) !== CharacterCodes.openBrace</span></span>
<span id="L1636"><span class="lineNum">    1636</span> <span class="tlaGNC">           8 :                 ) {</span></span>
<span id="L1637"><span class="lineNum">    1637</span> <span class="tlaGNC">           8 :                     // For regular expressions in any Unicode mode, \u HexLeadSurrogate \u HexTrailSurrogate is treated as a single character</span></span>
<span id="L1638"><span class="lineNum">    1638</span> <span class="tlaGNC">           8 :                     // for the purpose of determining whether a character class range is out of order</span></span>
<span id="L1639"><span class="lineNum">    1639</span> <span class="tlaGNC">           8 :                     // https://tc39.es/ecma262/#prod-RegExpUnicodeEscapeSequence</span></span>
<span id="L1640"><span class="lineNum">    1640</span> <span class="tlaGNC">           8 :                     const nextStart = pos;</span></span>
<span id="L1641"><span class="lineNum">    1641</span> <span class="tlaGNC">           8 :                     let nextPos = pos + 2;</span></span>
<span id="L1642"><span class="lineNum">    1642</span> <span class="tlaGNC">           8 :                     for (; nextPos &lt; nextStart + 6; nextPos++) {</span></span>
<span id="L1643"><span class="lineNum">    1643</span> <span class="tlaGNC">           8 :                         if (!isHexDigit(charCodeUnchecked(pos))) {</span></span>
<span id="L1644"><span class="lineNum">    1644</span> <span class="tlaGNC">           8 :                             // leave the error to the next call</span></span>
<span id="L1645"><span class="lineNum">    1645</span> <span class="tlaGNC">           8 :                             return escapedValueString;</span></span>
<span id="L1646"><span class="lineNum">    1646</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L1647"><span class="lineNum">    1647</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L1648"><span class="lineNum">    1648</span> <span class="tlaGNC">           8 :                     const nextEscapedValue = parseInt(text.substring(nextStart + 2, nextPos), 16);</span></span>
<span id="L1649"><span class="lineNum">    1649</span> <span class="tlaGNC">           8 :                     if (nextEscapedValue &gt;= 0xDC00 &amp;&amp; nextEscapedValue &lt;= 0xDFFF) {</span></span>
<span id="L1650"><span class="lineNum">    1650</span> <span class="tlaGNC">           8 :                         pos = nextPos;</span></span>
<span id="L1651"><span class="lineNum">    1651</span> <span class="tlaGNC">           8 :                         return escapedValueString + String.fromCharCode(nextEscapedValue);</span></span>
<span id="L1652"><span class="lineNum">    1652</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L1653"><span class="lineNum">    1653</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L1654"><span class="lineNum">    1654</span> <span class="tlaGNC">           8 :                 return escapedValueString;</span></span>
<span id="L1655"><span class="lineNum">    1655</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1656"><span class="lineNum">    1656</span> <span class="tlaGNC">           8 :             case CharacterCodes.x:</span></span>
<span id="L1657"><span class="lineNum">    1657</span> <span class="tlaGNC">           8 :                 // '\xDD'</span></span>
<span id="L1658"><span class="lineNum">    1658</span> <span class="tlaGNC">           8 :                 for (; pos &lt; start + 4; pos++) {</span></span>
<span id="L1659"><span class="lineNum">    1659</span> <span class="tlaGNC">           8 :                     if (!(pos &lt; end &amp;&amp; isHexDigit(charCodeUnchecked(pos)))) {</span></span>
<span id="L1660"><span class="lineNum">    1660</span> <span class="tlaGNC">           8 :                         tokenFlags |= TokenFlags.ContainsInvalidEscape;</span></span>
<span id="L1661"><span class="lineNum">    1661</span> <span class="tlaGNC">           8 :                         if (flags &amp; EscapeSequenceScanningFlags.ReportInvalidEscapeErrors) {</span></span>
<span id="L1662"><span class="lineNum">    1662</span> <span class="tlaGNC">           8 :                             error(Diagnostics.Hexadecimal_digit_expected);</span></span>
<span id="L1663"><span class="lineNum">    1663</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L1664"><span class="lineNum">    1664</span> <span class="tlaGNC">           8 :                         return text.substring(start, pos);</span></span>
<span id="L1665"><span class="lineNum">    1665</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L1666"><span class="lineNum">    1666</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L1667"><span class="lineNum">    1667</span> <span class="tlaGNC">           8 :                 tokenFlags |= TokenFlags.HexEscape;</span></span>
<span id="L1668"><span class="lineNum">    1668</span> <span class="tlaGNC">           8 :                 return String.fromCharCode(parseInt(text.substring(start + 2, pos), 16));</span></span>
<span id="L1669"><span class="lineNum">    1669</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1670"><span class="lineNum">    1670</span> <span class="tlaGNC">           8 :             // when encountering a LineContinuation (i.e. a backslash and a line terminator sequence),</span></span>
<span id="L1671"><span class="lineNum">    1671</span> <span class="tlaGNC">           8 :             // the line terminator is interpreted to be &quot;the empty code unit sequence&quot;.</span></span>
<span id="L1672"><span class="lineNum">    1672</span> <span class="tlaGNC">           8 :             case CharacterCodes.carriageReturn:</span></span>
<span id="L1673"><span class="lineNum">    1673</span> <span class="tlaGNC">           8 :                 if (pos &lt; end &amp;&amp; charCodeUnchecked(pos) === CharacterCodes.lineFeed) {</span></span>
<span id="L1674"><span class="lineNum">    1674</span> <span class="tlaGNC">           8 :                     pos++;</span></span>
<span id="L1675"><span class="lineNum">    1675</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L1676"><span class="lineNum">    1676</span> <span class="tlaGNC">           8 :             // falls through</span></span>
<span id="L1677"><span class="lineNum">    1677</span> <span class="tlaGNC">           8 :             case CharacterCodes.lineFeed:</span></span>
<span id="L1678"><span class="lineNum">    1678</span> <span class="tlaGNC">           8 :             case CharacterCodes.lineSeparator:</span></span>
<span id="L1679"><span class="lineNum">    1679</span> <span class="tlaGNC">           8 :             case CharacterCodes.paragraphSeparator:</span></span>
<span id="L1680"><span class="lineNum">    1680</span> <span class="tlaGNC">           8 :                 return &quot;&quot;;</span></span>
<span id="L1681"><span class="lineNum">    1681</span> <span class="tlaGNC">           8 :             default:</span></span>
<span id="L1682"><span class="lineNum">    1682</span> <span class="tlaGNC">           8 :                 if (</span></span>
<span id="L1683"><span class="lineNum">    1683</span> <span class="tlaGNC">           8 :                     flags &amp; EscapeSequenceScanningFlags.AnyUnicodeMode</span></span>
<span id="L1684"><span class="lineNum">    1684</span> <span class="tlaGNC">           8 :                     || flags &amp; EscapeSequenceScanningFlags.RegularExpression</span></span>
<span id="L1685"><span class="lineNum">    1685</span> <span class="tlaGNC">           8 :                         &amp;&amp; !(flags &amp; EscapeSequenceScanningFlags.AnnexB)</span></span>
<span id="L1686"><span class="lineNum">    1686</span> <span class="tlaGNC">           8 :                         &amp;&amp; isIdentifierPart(ch, languageVersion)</span></span>
<span id="L1687"><span class="lineNum">    1687</span> <span class="tlaGNC">           8 :                 ) {</span></span>
<span id="L1688"><span class="lineNum">    1688</span> <span class="tlaGNC">           8 :                     error(Diagnostics.This_character_cannot_be_escaped_in_a_regular_expression, pos - 2, 2);</span></span>
<span id="L1689"><span class="lineNum">    1689</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L1690"><span class="lineNum">    1690</span> <span class="tlaGNC">           8 :                 return String.fromCharCode(ch);</span></span>
<span id="L1691"><span class="lineNum">    1691</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L1692"><span class="lineNum">    1692</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L1693"><span class="lineNum">    1693</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1694"><span class="lineNum">    1694</span> <span class="tlaGNC">           8 :     function scanExtendedUnicodeEscape(shouldEmitInvalidEscapeError: boolean): string {</span></span>
<span id="L1695"><span class="lineNum">    1695</span> <span class="tlaGNC">           8 :         const start = pos;</span></span>
<span id="L1696"><span class="lineNum">    1696</span> <span class="tlaGNC">           8 :         pos += 3;</span></span>
<span id="L1697"><span class="lineNum">    1697</span> <span class="tlaGNC">           8 :         const escapedStart = pos;</span></span>
<span id="L1698"><span class="lineNum">    1698</span> <span class="tlaGNC">           8 :         const escapedValueString = scanMinimumNumberOfHexDigits(1, /*canHaveSeparators*/ false);</span></span>
<span id="L1699"><span class="lineNum">    1699</span> <span class="tlaGNC">           8 :         const escapedValue = escapedValueString ? parseInt(escapedValueString, 16) : -1;</span></span>
<span id="L1700"><span class="lineNum">    1700</span> <span class="tlaGNC">           8 :         let isInvalidExtendedEscape = false;</span></span>
<span id="L1701"><span class="lineNum">    1701</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1702"><span class="lineNum">    1702</span> <span class="tlaGNC">           8 :         // Validate the value of the digit</span></span>
<span id="L1703"><span class="lineNum">    1703</span> <span class="tlaGNC">           8 :         if (escapedValue &lt; 0) {</span></span>
<span id="L1704"><span class="lineNum">    1704</span> <span class="tlaGNC">           8 :             if (shouldEmitInvalidEscapeError) {</span></span>
<span id="L1705"><span class="lineNum">    1705</span> <span class="tlaGNC">           8 :                 error(Diagnostics.Hexadecimal_digit_expected);</span></span>
<span id="L1706"><span class="lineNum">    1706</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L1707"><span class="lineNum">    1707</span> <span class="tlaGNC">           8 :             isInvalidExtendedEscape = true;</span></span>
<span id="L1708"><span class="lineNum">    1708</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L1709"><span class="lineNum">    1709</span> <span class="tlaGNC">           8 :         else if (escapedValue &gt; 0x10FFFF) {</span></span>
<span id="L1710"><span class="lineNum">    1710</span> <span class="tlaGNC">           8 :             if (shouldEmitInvalidEscapeError) {</span></span>
<span id="L1711"><span class="lineNum">    1711</span> <span class="tlaGNC">           8 :                 error(Diagnostics.An_extended_Unicode_escape_value_must_be_between_0x0_and_0x10FFFF_inclusive, escapedStart, pos - escapedStart);</span></span>
<span id="L1712"><span class="lineNum">    1712</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L1713"><span class="lineNum">    1713</span> <span class="tlaGNC">           8 :             isInvalidExtendedEscape = true;</span></span>
<span id="L1714"><span class="lineNum">    1714</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L1715"><span class="lineNum">    1715</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1716"><span class="lineNum">    1716</span> <span class="tlaGNC">           8 :         if (pos &gt;= end) {</span></span>
<span id="L1717"><span class="lineNum">    1717</span> <span class="tlaGNC">           8 :             if (shouldEmitInvalidEscapeError) {</span></span>
<span id="L1718"><span class="lineNum">    1718</span> <span class="tlaGNC">           8 :                 error(Diagnostics.Unexpected_end_of_text);</span></span>
<span id="L1719"><span class="lineNum">    1719</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L1720"><span class="lineNum">    1720</span> <span class="tlaGNC">           8 :             isInvalidExtendedEscape = true;</span></span>
<span id="L1721"><span class="lineNum">    1721</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L1722"><span class="lineNum">    1722</span> <span class="tlaGNC">           8 :         else if (charCodeUnchecked(pos) === CharacterCodes.closeBrace) {</span></span>
<span id="L1723"><span class="lineNum">    1723</span> <span class="tlaGNC">           8 :             // Only swallow the following character up if it's a '}'.</span></span>
<span id="L1724"><span class="lineNum">    1724</span> <span class="tlaGNC">           8 :             pos++;</span></span>
<span id="L1725"><span class="lineNum">    1725</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L1726"><span class="lineNum">    1726</span> <span class="tlaGNC">           8 :         else {</span></span>
<span id="L1727"><span class="lineNum">    1727</span> <span class="tlaGNC">           8 :             if (shouldEmitInvalidEscapeError) {</span></span>
<span id="L1728"><span class="lineNum">    1728</span> <span class="tlaGNC">           8 :                 error(Diagnostics.Unterminated_Unicode_escape_sequence);</span></span>
<span id="L1729"><span class="lineNum">    1729</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L1730"><span class="lineNum">    1730</span> <span class="tlaGNC">           8 :             isInvalidExtendedEscape = true;</span></span>
<span id="L1731"><span class="lineNum">    1731</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L1732"><span class="lineNum">    1732</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1733"><span class="lineNum">    1733</span> <span class="tlaGNC">           8 :         if (isInvalidExtendedEscape) {</span></span>
<span id="L1734"><span class="lineNum">    1734</span> <span class="tlaGNC">           8 :             tokenFlags |= TokenFlags.ContainsInvalidEscape;</span></span>
<span id="L1735"><span class="lineNum">    1735</span> <span class="tlaGNC">           8 :             return text.substring(start, pos);</span></span>
<span id="L1736"><span class="lineNum">    1736</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L1737"><span class="lineNum">    1737</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1738"><span class="lineNum">    1738</span> <span class="tlaGNC">           8 :         tokenFlags |= TokenFlags.ExtendedUnicodeEscape;</span></span>
<span id="L1739"><span class="lineNum">    1739</span> <span class="tlaGNC">           8 :         return utf16EncodeAsString(escapedValue);</span></span>
<span id="L1740"><span class="lineNum">    1740</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L1741"><span class="lineNum">    1741</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1742"><span class="lineNum">    1742</span> <span class="tlaGNC">           8 :     // Current character is known to be a backslash. Check for Unicode escape of the form '\uXXXX'</span></span>
<span id="L1743"><span class="lineNum">    1743</span> <span class="tlaGNC">           8 :     // and return code point value if valid Unicode escape is found. Otherwise return -1.</span></span>
<span id="L1744"><span class="lineNum">    1744</span> <span class="tlaGNC">           8 :     function peekUnicodeEscape(): number {</span></span>
<span id="L1745"><span class="lineNum">    1745</span> <span class="tlaGNC">           8 :         if (pos + 5 &lt; end &amp;&amp; charCodeUnchecked(pos + 1) === CharacterCodes.u) {</span></span>
<span id="L1746"><span class="lineNum">    1746</span> <span class="tlaGNC">           8 :             const start = pos;</span></span>
<span id="L1747"><span class="lineNum">    1747</span> <span class="tlaGNC">           8 :             pos += 2;</span></span>
<span id="L1748"><span class="lineNum">    1748</span> <span class="tlaGNC">           8 :             const value = scanExactNumberOfHexDigits(4, /*canHaveSeparators*/ false);</span></span>
<span id="L1749"><span class="lineNum">    1749</span> <span class="tlaGNC">           8 :             pos = start;</span></span>
<span id="L1750"><span class="lineNum">    1750</span> <span class="tlaGNC">           8 :             return value;</span></span>
<span id="L1751"><span class="lineNum">    1751</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L1752"><span class="lineNum">    1752</span> <span class="tlaGNC">           8 :         return -1;</span></span>
<span id="L1753"><span class="lineNum">    1753</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L1754"><span class="lineNum">    1754</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1755"><span class="lineNum">    1755</span> <span class="tlaGNC">           8 :     function peekExtendedUnicodeEscape(): number {</span></span>
<span id="L1756"><span class="lineNum">    1756</span> <span class="tlaGNC">           8 :         if (codePointUnchecked(pos + 1) === CharacterCodes.u &amp;&amp; codePointUnchecked(pos + 2) === CharacterCodes.openBrace) {</span></span>
<span id="L1757"><span class="lineNum">    1757</span> <span class="tlaGNC">           8 :             const start = pos;</span></span>
<span id="L1758"><span class="lineNum">    1758</span> <span class="tlaGNC">           8 :             pos += 3;</span></span>
<span id="L1759"><span class="lineNum">    1759</span> <span class="tlaGNC">           8 :             const escapedValueString = scanMinimumNumberOfHexDigits(1, /*canHaveSeparators*/ false);</span></span>
<span id="L1760"><span class="lineNum">    1760</span> <span class="tlaGNC">           8 :             const escapedValue = escapedValueString ? parseInt(escapedValueString, 16) : -1;</span></span>
<span id="L1761"><span class="lineNum">    1761</span> <span class="tlaGNC">           8 :             pos = start;</span></span>
<span id="L1762"><span class="lineNum">    1762</span> <span class="tlaGNC">           8 :             return escapedValue;</span></span>
<span id="L1763"><span class="lineNum">    1763</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L1764"><span class="lineNum">    1764</span> <span class="tlaGNC">           8 :         return -1;</span></span>
<span id="L1765"><span class="lineNum">    1765</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L1766"><span class="lineNum">    1766</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1767"><span class="lineNum">    1767</span> <span class="tlaGNC">           8 :     function scanIdentifierParts(): string {</span></span>
<span id="L1768"><span class="lineNum">    1768</span> <span class="tlaGNC">           8 :         let result = &quot;&quot;;</span></span>
<span id="L1769"><span class="lineNum">    1769</span> <span class="tlaGNC">           8 :         let start = pos;</span></span>
<span id="L1770"><span class="lineNum">    1770</span> <span class="tlaGNC">           8 :         while (pos &lt; end) {</span></span>
<span id="L1771"><span class="lineNum">    1771</span> <span class="tlaGNC">           8 :             let ch = codePointUnchecked(pos);</span></span>
<span id="L1772"><span class="lineNum">    1772</span> <span class="tlaGNC">           8 :             if (isIdentifierPart(ch, languageVersion)) {</span></span>
<span id="L1773"><span class="lineNum">    1773</span> <span class="tlaGNC">           8 :                 pos += charSize(ch);</span></span>
<span id="L1774"><span class="lineNum">    1774</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L1775"><span class="lineNum">    1775</span> <span class="tlaGNC">           8 :             else if (ch === CharacterCodes.backslash) {</span></span>
<span id="L1776"><span class="lineNum">    1776</span> <span class="tlaGNC">           8 :                 ch = peekExtendedUnicodeEscape();</span></span>
<span id="L1777"><span class="lineNum">    1777</span> <span class="tlaGNC">           8 :                 if (ch &gt;= 0 &amp;&amp; isIdentifierPart(ch, languageVersion)) {</span></span>
<span id="L1778"><span class="lineNum">    1778</span> <span class="tlaGNC">           8 :                     result += scanExtendedUnicodeEscape(/*shouldEmitInvalidEscapeError*/ true);</span></span>
<span id="L1779"><span class="lineNum">    1779</span> <span class="tlaGNC">           8 :                     start = pos;</span></span>
<span id="L1780"><span class="lineNum">    1780</span> <span class="tlaGNC">           8 :                     continue;</span></span>
<span id="L1781"><span class="lineNum">    1781</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L1782"><span class="lineNum">    1782</span> <span class="tlaGNC">           8 :                 ch = peekUnicodeEscape();</span></span>
<span id="L1783"><span class="lineNum">    1783</span> <span class="tlaGNC">           8 :                 if (!(ch &gt;= 0 &amp;&amp; isIdentifierPart(ch, languageVersion))) {</span></span>
<span id="L1784"><span class="lineNum">    1784</span> <span class="tlaGNC">           8 :                     break;</span></span>
<span id="L1785"><span class="lineNum">    1785</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L1786"><span class="lineNum">    1786</span> <span class="tlaGNC">           8 :                 tokenFlags |= TokenFlags.UnicodeEscape;</span></span>
<span id="L1787"><span class="lineNum">    1787</span> <span class="tlaGNC">           8 :                 result += text.substring(start, pos);</span></span>
<span id="L1788"><span class="lineNum">    1788</span> <span class="tlaGNC">           8 :                 result += utf16EncodeAsString(ch);</span></span>
<span id="L1789"><span class="lineNum">    1789</span> <span class="tlaGNC">           8 :                 // Valid Unicode escape is always six characters</span></span>
<span id="L1790"><span class="lineNum">    1790</span> <span class="tlaGNC">           8 :                 pos += 6;</span></span>
<span id="L1791"><span class="lineNum">    1791</span> <span class="tlaGNC">           8 :                 start = pos;</span></span>
<span id="L1792"><span class="lineNum">    1792</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L1793"><span class="lineNum">    1793</span> <span class="tlaGNC">           8 :             else {</span></span>
<span id="L1794"><span class="lineNum">    1794</span> <span class="tlaGNC">           8 :                 break;</span></span>
<span id="L1795"><span class="lineNum">    1795</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L1796"><span class="lineNum">    1796</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L1797"><span class="lineNum">    1797</span> <span class="tlaGNC">           8 :         result += text.substring(start, pos);</span></span>
<span id="L1798"><span class="lineNum">    1798</span> <span class="tlaGNC">           8 :         return result;</span></span>
<span id="L1799"><span class="lineNum">    1799</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L1800"><span class="lineNum">    1800</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1801"><span class="lineNum">    1801</span> <span class="tlaGNC">           8 :     function getIdentifierToken(): SyntaxKind.Identifier | KeywordSyntaxKind {</span></span>
<span id="L1802"><span class="lineNum">    1802</span> <span class="tlaGNC">           8 :         // Reserved words are between 2 and 12 characters long and start with a lowercase letter</span></span>
<span id="L1803"><span class="lineNum">    1803</span> <span class="tlaGNC">           8 :         const len = tokenValue.length;</span></span>
<span id="L1804"><span class="lineNum">    1804</span> <span class="tlaGNC">           8 :         if (len &gt;= 2 &amp;&amp; len &lt;= 12) {</span></span>
<span id="L1805"><span class="lineNum">    1805</span> <span class="tlaGNC">           8 :             const ch = tokenValue.charCodeAt(0);</span></span>
<span id="L1806"><span class="lineNum">    1806</span> <span class="tlaGNC">           8 :             if (ch &gt;= CharacterCodes.a &amp;&amp; ch &lt;= CharacterCodes.z) {</span></span>
<span id="L1807"><span class="lineNum">    1807</span> <span class="tlaGNC">           8 :                 const keyword = textToKeyword.get(tokenValue);</span></span>
<span id="L1808"><span class="lineNum">    1808</span> <span class="tlaGNC">           8 :                 if (keyword !== undefined) {</span></span>
<span id="L1809"><span class="lineNum">    1809</span> <span class="tlaGNC">           8 :                     return token = keyword;</span></span>
<span id="L1810"><span class="lineNum">    1810</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L1811"><span class="lineNum">    1811</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L1812"><span class="lineNum">    1812</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L1813"><span class="lineNum">    1813</span> <span class="tlaGNC">           8 :         return token = SyntaxKind.Identifier;</span></span>
<span id="L1814"><span class="lineNum">    1814</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L1815"><span class="lineNum">    1815</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1816"><span class="lineNum">    1816</span> <span class="tlaGNC">           8 :     function scanBinaryOrOctalDigits(base: 2 | 8): string {</span></span>
<span id="L1817"><span class="lineNum">    1817</span> <span class="tlaGNC">           8 :         let value = &quot;&quot;;</span></span>
<span id="L1818"><span class="lineNum">    1818</span> <span class="tlaGNC">           8 :         // For counting number of digits; Valid binaryIntegerLiteral must have at least one binary digit following B or b.</span></span>
<span id="L1819"><span class="lineNum">    1819</span> <span class="tlaGNC">           8 :         // Similarly valid octalIntegerLiteral must have at least one octal digit following o or O.</span></span>
<span id="L1820"><span class="lineNum">    1820</span> <span class="tlaGNC">           8 :         let separatorAllowed = false;</span></span>
<span id="L1821"><span class="lineNum">    1821</span> <span class="tlaGNC">           8 :         let isPreviousTokenSeparator = false;</span></span>
<span id="L1822"><span class="lineNum">    1822</span> <span class="tlaGNC">           8 :         while (true) {</span></span>
<span id="L1823"><span class="lineNum">    1823</span> <span class="tlaGNC">           8 :             const ch = charCodeUnchecked(pos);</span></span>
<span id="L1824"><span class="lineNum">    1824</span> <span class="tlaGNC">           8 :             // Numeric separators are allowed anywhere within a numeric literal, except not at the beginning, or following another separator</span></span>
<span id="L1825"><span class="lineNum">    1825</span> <span class="tlaGNC">           8 :             if (ch === CharacterCodes._) {</span></span>
<span id="L1826"><span class="lineNum">    1826</span> <span class="tlaGNC">           8 :                 tokenFlags |= TokenFlags.ContainsSeparator;</span></span>
<span id="L1827"><span class="lineNum">    1827</span> <span class="tlaGNC">           8 :                 if (separatorAllowed) {</span></span>
<span id="L1828"><span class="lineNum">    1828</span> <span class="tlaGNC">           8 :                     separatorAllowed = false;</span></span>
<span id="L1829"><span class="lineNum">    1829</span> <span class="tlaGNC">           8 :                     isPreviousTokenSeparator = true;</span></span>
<span id="L1830"><span class="lineNum">    1830</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L1831"><span class="lineNum">    1831</span> <span class="tlaGNC">           8 :                 else if (isPreviousTokenSeparator) {</span></span>
<span id="L1832"><span class="lineNum">    1832</span> <span class="tlaGNC">           8 :                     error(Diagnostics.Multiple_consecutive_numeric_separators_are_not_permitted, pos, 1);</span></span>
<span id="L1833"><span class="lineNum">    1833</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L1834"><span class="lineNum">    1834</span> <span class="tlaGNC">           8 :                 else {</span></span>
<span id="L1835"><span class="lineNum">    1835</span> <span class="tlaGNC">           8 :                     error(Diagnostics.Numeric_separators_are_not_allowed_here, pos, 1);</span></span>
<span id="L1836"><span class="lineNum">    1836</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L1837"><span class="lineNum">    1837</span> <span class="tlaGNC">           8 :                 pos++;</span></span>
<span id="L1838"><span class="lineNum">    1838</span> <span class="tlaGNC">           8 :                 continue;</span></span>
<span id="L1839"><span class="lineNum">    1839</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L1840"><span class="lineNum">    1840</span> <span class="tlaGNC">           8 :             separatorAllowed = true;</span></span>
<span id="L1841"><span class="lineNum">    1841</span> <span class="tlaGNC">           8 :             if (!isDigit(ch) || ch - CharacterCodes._0 &gt;= base) {</span></span>
<span id="L1842"><span class="lineNum">    1842</span> <span class="tlaGNC">           8 :                 break;</span></span>
<span id="L1843"><span class="lineNum">    1843</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L1844"><span class="lineNum">    1844</span> <span class="tlaGNC">           8 :             value += text[pos];</span></span>
<span id="L1845"><span class="lineNum">    1845</span> <span class="tlaGNC">           8 :             pos++;</span></span>
<span id="L1846"><span class="lineNum">    1846</span> <span class="tlaGNC">           8 :             isPreviousTokenSeparator = false;</span></span>
<span id="L1847"><span class="lineNum">    1847</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L1848"><span class="lineNum">    1848</span> <span class="tlaGNC">           8 :         if (charCodeUnchecked(pos - 1) === CharacterCodes._) {</span></span>
<span id="L1849"><span class="lineNum">    1849</span> <span class="tlaGNC">           8 :             // Literal ends with underscore - not allowed</span></span>
<span id="L1850"><span class="lineNum">    1850</span> <span class="tlaGNC">           8 :             error(Diagnostics.Numeric_separators_are_not_allowed_here, pos - 1, 1);</span></span>
<span id="L1851"><span class="lineNum">    1851</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L1852"><span class="lineNum">    1852</span> <span class="tlaGNC">           8 :         return value;</span></span>
<span id="L1853"><span class="lineNum">    1853</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L1854"><span class="lineNum">    1854</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1855"><span class="lineNum">    1855</span> <span class="tlaGNC">           8 :     function checkBigIntSuffix(): SyntaxKind {</span></span>
<span id="L1856"><span class="lineNum">    1856</span> <span class="tlaGNC">           8 :         if (charCodeUnchecked(pos) === CharacterCodes.n) {</span></span>
<span id="L1857"><span class="lineNum">    1857</span> <span class="tlaGNC">           8 :             tokenValue += &quot;n&quot;;</span></span>
<span id="L1858"><span class="lineNum">    1858</span> <span class="tlaGNC">           8 :             // Use base 10 instead of base 2 or base 8 for shorter literals</span></span>
<span id="L1859"><span class="lineNum">    1859</span> <span class="tlaGNC">           8 :             if (tokenFlags &amp; TokenFlags.BinaryOrOctalSpecifier) {</span></span>
<span id="L1860"><span class="lineNum">    1860</span> <span class="tlaGNC">           8 :                 tokenValue = parsePseudoBigInt(tokenValue) + &quot;n&quot;;</span></span>
<span id="L1861"><span class="lineNum">    1861</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L1862"><span class="lineNum">    1862</span> <span class="tlaGNC">           8 :             pos++;</span></span>
<span id="L1863"><span class="lineNum">    1863</span> <span class="tlaGNC">           8 :             return SyntaxKind.BigIntLiteral;</span></span>
<span id="L1864"><span class="lineNum">    1864</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L1865"><span class="lineNum">    1865</span> <span class="tlaGNC">           8 :         else { // not a bigint, so can convert to number in simplified form</span></span>
<span id="L1866"><span class="lineNum">    1866</span> <span class="tlaGNC">           8 :             // Number() may not support 0b or 0o, so use parseInt() instead</span></span>
<span id="L1867"><span class="lineNum">    1867</span> <span class="tlaGNC">           8 :             const numericValue = tokenFlags &amp; TokenFlags.BinarySpecifier</span></span>
<span id="L1868"><span class="lineNum">    1868</span> <span class="tlaGNC">           8 :                 ? parseInt(tokenValue.slice(2), 2) // skip &quot;0b&quot;</span></span>
<span id="L1869"><span class="lineNum">    1869</span> <span class="tlaGNC">           8 :                 : tokenFlags &amp; TokenFlags.OctalSpecifier</span></span>
<span id="L1870"><span class="lineNum">    1870</span> <span class="tlaGNC">           8 :                 ? parseInt(tokenValue.slice(2), 8) // skip &quot;0o&quot;</span></span>
<span id="L1871"><span class="lineNum">    1871</span> <span class="tlaGNC">           8 :                 : +tokenValue;</span></span>
<span id="L1872"><span class="lineNum">    1872</span> <span class="tlaGNC">           8 :             tokenValue = &quot;&quot; + numericValue;</span></span>
<span id="L1873"><span class="lineNum">    1873</span> <span class="tlaGNC">           8 :             return SyntaxKind.NumericLiteral;</span></span>
<span id="L1874"><span class="lineNum">    1874</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L1875"><span class="lineNum">    1875</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L1876"><span class="lineNum">    1876</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1877"><span class="lineNum">    1877</span> <span class="tlaGNC">           8 :     function scan(): SyntaxKind {</span></span>
<span id="L1878"><span class="lineNum">    1878</span> <span class="tlaGNC">           8 :         fullStartPos = pos;</span></span>
<span id="L1879"><span class="lineNum">    1879</span> <span class="tlaGNC">           8 :         tokenFlags = TokenFlags.None;</span></span>
<span id="L1880"><span class="lineNum">    1880</span> <span class="tlaGNC">           8 :         let asteriskSeen = false;</span></span>
<span id="L1881"><span class="lineNum">    1881</span> <span class="tlaGNC">           8 :         while (true) {</span></span>
<span id="L1882"><span class="lineNum">    1882</span> <span class="tlaGNC">           8 :             tokenStart = pos;</span></span>
<span id="L1883"><span class="lineNum">    1883</span> <span class="tlaGNC">           8 :             if (pos &gt;= end) {</span></span>
<span id="L1884"><span class="lineNum">    1884</span> <span class="tlaGNC">           8 :                 return token = SyntaxKind.EndOfFileToken;</span></span>
<span id="L1885"><span class="lineNum">    1885</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L1886"><span class="lineNum">    1886</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1887"><span class="lineNum">    1887</span> <span class="tlaGNC">           8 :             const ch = codePointUnchecked(pos);</span></span>
<span id="L1888"><span class="lineNum">    1888</span> <span class="tlaGNC">           8 :             if (pos === 0) {</span></span>
<span id="L1889"><span class="lineNum">    1889</span> <span class="tlaGNC">           8 :                 // Special handling for shebang</span></span>
<span id="L1890"><span class="lineNum">    1890</span> <span class="tlaGNC">           8 :                 if (ch === CharacterCodes.hash &amp;&amp; isShebangTrivia(text, pos)) {</span></span>
<span id="L1891"><span class="lineNum">    1891</span> <span class="tlaGNC">           8 :                     pos = scanShebangTrivia(text, pos);</span></span>
<span id="L1892"><span class="lineNum">    1892</span> <span class="tlaGNC">           8 :                     if (skipTrivia) {</span></span>
<span id="L1893"><span class="lineNum">    1893</span> <span class="tlaGNC">           8 :                         continue;</span></span>
<span id="L1894"><span class="lineNum">    1894</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L1895"><span class="lineNum">    1895</span> <span class="tlaGNC">           8 :                     else {</span></span>
<span id="L1896"><span class="lineNum">    1896</span> <span class="tlaGNC">           8 :                         return token = SyntaxKind.ShebangTrivia;</span></span>
<span id="L1897"><span class="lineNum">    1897</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L1898"><span class="lineNum">    1898</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L1899"><span class="lineNum">    1899</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L1900"><span class="lineNum">    1900</span> <span class="tlaGNC">           8 : </span></span>
<span id="L1901"><span class="lineNum">    1901</span> <span class="tlaGNC">           8 :             switch (ch) {</span></span>
<span id="L1902"><span class="lineNum">    1902</span> <span class="tlaGNC">           8 :                 case CharacterCodes.lineFeed:</span></span>
<span id="L1903"><span class="lineNum">    1903</span> <span class="tlaGNC">           8 :                 case CharacterCodes.carriageReturn:</span></span>
<span id="L1904"><span class="lineNum">    1904</span> <span class="tlaGNC">           8 :                     tokenFlags |= TokenFlags.PrecedingLineBreak;</span></span>
<span id="L1905"><span class="lineNum">    1905</span> <span class="tlaGNC">           8 :                     if (skipTrivia) {</span></span>
<span id="L1906"><span class="lineNum">    1906</span> <span class="tlaGNC">           8 :                         pos++;</span></span>
<span id="L1907"><span class="lineNum">    1907</span> <span class="tlaGNC">           8 :                         continue;</span></span>
<span id="L1908"><span class="lineNum">    1908</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L1909"><span class="lineNum">    1909</span> <span class="tlaGNC">           8 :                     else {</span></span>
<span id="L1910"><span class="lineNum">    1910</span> <span class="tlaGNC">           8 :                         if (ch === CharacterCodes.carriageReturn &amp;&amp; pos + 1 &lt; end &amp;&amp; charCodeUnchecked(pos + 1) === CharacterCodes.lineFeed) {</span></span>
<span id="L1911"><span class="lineNum">    1911</span> <span class="tlaGNC">           8 :                             // consume both CR and LF</span></span>
<span id="L1912"><span class="lineNum">    1912</span> <span class="tlaGNC">           8 :                             pos += 2;</span></span>
<span id="L1913"><span class="lineNum">    1913</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L1914"><span class="lineNum">    1914</span> <span class="tlaGNC">           8 :                         else {</span></span>
<span id="L1915"><span class="lineNum">    1915</span> <span class="tlaGNC">           8 :                             pos++;</span></span>
<span id="L1916"><span class="lineNum">    1916</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L1917"><span class="lineNum">    1917</span> <span class="tlaGNC">           8 :                         return token = SyntaxKind.NewLineTrivia;</span></span>
<span id="L1918"><span class="lineNum">    1918</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L1919"><span class="lineNum">    1919</span> <span class="tlaGNC">           8 :                 case CharacterCodes.tab:</span></span>
<span id="L1920"><span class="lineNum">    1920</span> <span class="tlaGNC">           8 :                 case CharacterCodes.verticalTab:</span></span>
<span id="L1921"><span class="lineNum">    1921</span> <span class="tlaGNC">           8 :                 case CharacterCodes.formFeed:</span></span>
<span id="L1922"><span class="lineNum">    1922</span> <span class="tlaGNC">           8 :                 case CharacterCodes.space:</span></span>
<span id="L1923"><span class="lineNum">    1923</span> <span class="tlaGNC">           8 :                 case CharacterCodes.nonBreakingSpace:</span></span>
<span id="L1924"><span class="lineNum">    1924</span> <span class="tlaGNC">           8 :                 case CharacterCodes.ogham:</span></span>
<span id="L1925"><span class="lineNum">    1925</span> <span class="tlaGNC">           8 :                 case CharacterCodes.enQuad:</span></span>
<span id="L1926"><span class="lineNum">    1926</span> <span class="tlaGNC">           8 :                 case CharacterCodes.emQuad:</span></span>
<span id="L1927"><span class="lineNum">    1927</span> <span class="tlaGNC">           8 :                 case CharacterCodes.enSpace:</span></span>
<span id="L1928"><span class="lineNum">    1928</span> <span class="tlaGNC">           8 :                 case CharacterCodes.emSpace:</span></span>
<span id="L1929"><span class="lineNum">    1929</span> <span class="tlaGNC">           8 :                 case CharacterCodes.threePerEmSpace:</span></span>
<span id="L1930"><span class="lineNum">    1930</span> <span class="tlaGNC">           8 :                 case CharacterCodes.fourPerEmSpace:</span></span>
<span id="L1931"><span class="lineNum">    1931</span> <span class="tlaGNC">           8 :                 case CharacterCodes.sixPerEmSpace:</span></span>
<span id="L1932"><span class="lineNum">    1932</span> <span class="tlaGNC">           8 :                 case CharacterCodes.figureSpace:</span></span>
<span id="L1933"><span class="lineNum">    1933</span> <span class="tlaGNC">           8 :                 case CharacterCodes.punctuationSpace:</span></span>
<span id="L1934"><span class="lineNum">    1934</span> <span class="tlaGNC">           8 :                 case CharacterCodes.thinSpace:</span></span>
<span id="L1935"><span class="lineNum">    1935</span> <span class="tlaGNC">           8 :                 case CharacterCodes.hairSpace:</span></span>
<span id="L1936"><span class="lineNum">    1936</span> <span class="tlaGNC">           8 :                 case CharacterCodes.zeroWidthSpace:</span></span>
<span id="L1937"><span class="lineNum">    1937</span> <span class="tlaGNC">           8 :                 case CharacterCodes.narrowNoBreakSpace:</span></span>
<span id="L1938"><span class="lineNum">    1938</span> <span class="tlaGNC">           8 :                 case CharacterCodes.mathematicalSpace:</span></span>
<span id="L1939"><span class="lineNum">    1939</span> <span class="tlaGNC">           8 :                 case CharacterCodes.ideographicSpace:</span></span>
<span id="L1940"><span class="lineNum">    1940</span> <span class="tlaGNC">           8 :                 case CharacterCodes.byteOrderMark:</span></span>
<span id="L1941"><span class="lineNum">    1941</span> <span class="tlaGNC">           8 :                     if (skipTrivia) {</span></span>
<span id="L1942"><span class="lineNum">    1942</span> <span class="tlaGNC">           8 :                         pos++;</span></span>
<span id="L1943"><span class="lineNum">    1943</span> <span class="tlaGNC">           8 :                         continue;</span></span>
<span id="L1944"><span class="lineNum">    1944</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L1945"><span class="lineNum">    1945</span> <span class="tlaGNC">           8 :                     else {</span></span>
<span id="L1946"><span class="lineNum">    1946</span> <span class="tlaGNC">           8 :                         while (pos &lt; end &amp;&amp; isWhiteSpaceSingleLine(charCodeUnchecked(pos))) {</span></span>
<span id="L1947"><span class="lineNum">    1947</span> <span class="tlaGNC">           8 :                             pos++;</span></span>
<span id="L1948"><span class="lineNum">    1948</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L1949"><span class="lineNum">    1949</span> <span class="tlaGNC">           8 :                         return token = SyntaxKind.WhitespaceTrivia;</span></span>
<span id="L1950"><span class="lineNum">    1950</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L1951"><span class="lineNum">    1951</span> <span class="tlaGNC">           8 :                 case CharacterCodes.exclamation:</span></span>
<span id="L1952"><span class="lineNum">    1952</span> <span class="tlaGNC">           8 :                     if (charCodeUnchecked(pos + 1) === CharacterCodes.equals) {</span></span>
<span id="L1953"><span class="lineNum">    1953</span> <span class="tlaGNC">           8 :                         if (charCodeUnchecked(pos + 2) === CharacterCodes.equals) {</span></span>
<span id="L1954"><span class="lineNum">    1954</span> <span class="tlaGNC">           8 :                             return pos += 3, token = SyntaxKind.ExclamationEqualsEqualsToken;</span></span>
<span id="L1955"><span class="lineNum">    1955</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L1956"><span class="lineNum">    1956</span> <span class="tlaGNC">           8 :                         return pos += 2, token = SyntaxKind.ExclamationEqualsToken;</span></span>
<span id="L1957"><span class="lineNum">    1957</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L1958"><span class="lineNum">    1958</span> <span class="tlaGNC">           8 :                     pos++;</span></span>
<span id="L1959"><span class="lineNum">    1959</span> <span class="tlaGNC">           8 :                     return token = SyntaxKind.ExclamationToken;</span></span>
<span id="L1960"><span class="lineNum">    1960</span> <span class="tlaGNC">           8 :                 case CharacterCodes.doubleQuote:</span></span>
<span id="L1961"><span class="lineNum">    1961</span> <span class="tlaGNC">           8 :                 case CharacterCodes.singleQuote:</span></span>
<span id="L1962"><span class="lineNum">    1962</span> <span class="tlaGNC">           8 :                     tokenValue = scanString();</span></span>
<span id="L1963"><span class="lineNum">    1963</span> <span class="tlaGNC">           8 :                     return token = SyntaxKind.StringLiteral;</span></span>
<span id="L1964"><span class="lineNum">    1964</span> <span class="tlaGNC">           8 :                 case CharacterCodes.backtick:</span></span>
<span id="L1965"><span class="lineNum">    1965</span> <span class="tlaGNC">           8 :                     return token = scanTemplateAndSetTokenValue(/*shouldEmitInvalidEscapeError*/ false);</span></span>
<span id="L1966"><span class="lineNum">    1966</span> <span class="tlaGNC">           8 :                 case CharacterCodes.percent:</span></span>
<span id="L1967"><span class="lineNum">    1967</span> <span class="tlaGNC">           8 :                     if (charCodeUnchecked(pos + 1) === CharacterCodes.equals) {</span></span>
<span id="L1968"><span class="lineNum">    1968</span> <span class="tlaGNC">           8 :                         return pos += 2, token = SyntaxKind.PercentEqualsToken;</span></span>
<span id="L1969"><span class="lineNum">    1969</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L1970"><span class="lineNum">    1970</span> <span class="tlaGNC">           8 :                     pos++;</span></span>
<span id="L1971"><span class="lineNum">    1971</span> <span class="tlaGNC">           8 :                     return token = SyntaxKind.PercentToken;</span></span>
<span id="L1972"><span class="lineNum">    1972</span> <span class="tlaGNC">           8 :                 case CharacterCodes.ampersand:</span></span>
<span id="L1973"><span class="lineNum">    1973</span> <span class="tlaGNC">           8 :                     if (charCodeUnchecked(pos + 1) === CharacterCodes.ampersand) {</span></span>
<span id="L1974"><span class="lineNum">    1974</span> <span class="tlaGNC">           8 :                         if (charCodeUnchecked(pos + 2) === CharacterCodes.equals) {</span></span>
<span id="L1975"><span class="lineNum">    1975</span> <span class="tlaGNC">           8 :                             return pos += 3, token = SyntaxKind.AmpersandAmpersandEqualsToken;</span></span>
<span id="L1976"><span class="lineNum">    1976</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L1977"><span class="lineNum">    1977</span> <span class="tlaGNC">           8 :                         return pos += 2, token = SyntaxKind.AmpersandAmpersandToken;</span></span>
<span id="L1978"><span class="lineNum">    1978</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L1979"><span class="lineNum">    1979</span> <span class="tlaGNC">           8 :                     if (charCodeUnchecked(pos + 1) === CharacterCodes.equals) {</span></span>
<span id="L1980"><span class="lineNum">    1980</span> <span class="tlaGNC">           8 :                         return pos += 2, token = SyntaxKind.AmpersandEqualsToken;</span></span>
<span id="L1981"><span class="lineNum">    1981</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L1982"><span class="lineNum">    1982</span> <span class="tlaGNC">           8 :                     pos++;</span></span>
<span id="L1983"><span class="lineNum">    1983</span> <span class="tlaGNC">           8 :                     return token = SyntaxKind.AmpersandToken;</span></span>
<span id="L1984"><span class="lineNum">    1984</span> <span class="tlaGNC">           8 :                 case CharacterCodes.openParen:</span></span>
<span id="L1985"><span class="lineNum">    1985</span> <span class="tlaGNC">           8 :                     pos++;</span></span>
<span id="L1986"><span class="lineNum">    1986</span> <span class="tlaGNC">           8 :                     return token = SyntaxKind.OpenParenToken;</span></span>
<span id="L1987"><span class="lineNum">    1987</span> <span class="tlaGNC">           8 :                 case CharacterCodes.closeParen:</span></span>
<span id="L1988"><span class="lineNum">    1988</span> <span class="tlaGNC">           8 :                     pos++;</span></span>
<span id="L1989"><span class="lineNum">    1989</span> <span class="tlaGNC">           8 :                     return token = SyntaxKind.CloseParenToken;</span></span>
<span id="L1990"><span class="lineNum">    1990</span> <span class="tlaGNC">           8 :                 case CharacterCodes.asterisk:</span></span>
<span id="L1991"><span class="lineNum">    1991</span> <span class="tlaGNC">           8 :                     if (charCodeUnchecked(pos + 1) === CharacterCodes.equals) {</span></span>
<span id="L1992"><span class="lineNum">    1992</span> <span class="tlaGNC">           8 :                         return pos += 2, token = SyntaxKind.AsteriskEqualsToken;</span></span>
<span id="L1993"><span class="lineNum">    1993</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L1994"><span class="lineNum">    1994</span> <span class="tlaGNC">           8 :                     if (charCodeUnchecked(pos + 1) === CharacterCodes.asterisk) {</span></span>
<span id="L1995"><span class="lineNum">    1995</span> <span class="tlaGNC">           8 :                         if (charCodeUnchecked(pos + 2) === CharacterCodes.equals) {</span></span>
<span id="L1996"><span class="lineNum">    1996</span> <span class="tlaGNC">           8 :                             return pos += 3, token = SyntaxKind.AsteriskAsteriskEqualsToken;</span></span>
<span id="L1997"><span class="lineNum">    1997</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L1998"><span class="lineNum">    1998</span> <span class="tlaGNC">           8 :                         return pos += 2, token = SyntaxKind.AsteriskAsteriskToken;</span></span>
<span id="L1999"><span class="lineNum">    1999</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L2000"><span class="lineNum">    2000</span> <span class="tlaGNC">           8 :                     pos++;</span></span>
<span id="L2001"><span class="lineNum">    2001</span> <span class="tlaGNC">           8 :                     if (skipJsDocLeadingAsterisks &amp;&amp; !asteriskSeen &amp;&amp; (tokenFlags &amp; TokenFlags.PrecedingLineBreak)) {</span></span>
<span id="L2002"><span class="lineNum">    2002</span> <span class="tlaGNC">           8 :                         // decoration at the start of a JSDoc comment line</span></span>
<span id="L2003"><span class="lineNum">    2003</span> <span class="tlaGNC">           8 :                         asteriskSeen = true;</span></span>
<span id="L2004"><span class="lineNum">    2004</span> <span class="tlaGNC">           8 :                         continue;</span></span>
<span id="L2005"><span class="lineNum">    2005</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L2006"><span class="lineNum">    2006</span> <span class="tlaGNC">           8 :                     return token = SyntaxKind.AsteriskToken;</span></span>
<span id="L2007"><span class="lineNum">    2007</span> <span class="tlaGNC">           8 :                 case CharacterCodes.plus:</span></span>
<span id="L2008"><span class="lineNum">    2008</span> <span class="tlaGNC">           8 :                     if (charCodeUnchecked(pos + 1) === CharacterCodes.plus) {</span></span>
<span id="L2009"><span class="lineNum">    2009</span> <span class="tlaGNC">           8 :                         return pos += 2, token = SyntaxKind.PlusPlusToken;</span></span>
<span id="L2010"><span class="lineNum">    2010</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L2011"><span class="lineNum">    2011</span> <span class="tlaGNC">           8 :                     if (charCodeUnchecked(pos + 1) === CharacterCodes.equals) {</span></span>
<span id="L2012"><span class="lineNum">    2012</span> <span class="tlaGNC">           8 :                         return pos += 2, token = SyntaxKind.PlusEqualsToken;</span></span>
<span id="L2013"><span class="lineNum">    2013</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L2014"><span class="lineNum">    2014</span> <span class="tlaGNC">           8 :                     pos++;</span></span>
<span id="L2015"><span class="lineNum">    2015</span> <span class="tlaGNC">           8 :                     return token = SyntaxKind.PlusToken;</span></span>
<span id="L2016"><span class="lineNum">    2016</span> <span class="tlaGNC">           8 :                 case CharacterCodes.comma:</span></span>
<span id="L2017"><span class="lineNum">    2017</span> <span class="tlaGNC">           8 :                     pos++;</span></span>
<span id="L2018"><span class="lineNum">    2018</span> <span class="tlaGNC">           8 :                     return token = SyntaxKind.CommaToken;</span></span>
<span id="L2019"><span class="lineNum">    2019</span> <span class="tlaGNC">           8 :                 case CharacterCodes.minus:</span></span>
<span id="L2020"><span class="lineNum">    2020</span> <span class="tlaGNC">           8 :                     if (charCodeUnchecked(pos + 1) === CharacterCodes.minus) {</span></span>
<span id="L2021"><span class="lineNum">    2021</span> <span class="tlaGNC">           8 :                         return pos += 2, token = SyntaxKind.MinusMinusToken;</span></span>
<span id="L2022"><span class="lineNum">    2022</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L2023"><span class="lineNum">    2023</span> <span class="tlaGNC">           8 :                     if (charCodeUnchecked(pos + 1) === CharacterCodes.equals) {</span></span>
<span id="L2024"><span class="lineNum">    2024</span> <span class="tlaGNC">           8 :                         return pos += 2, token = SyntaxKind.MinusEqualsToken;</span></span>
<span id="L2025"><span class="lineNum">    2025</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L2026"><span class="lineNum">    2026</span> <span class="tlaGNC">           8 :                     pos++;</span></span>
<span id="L2027"><span class="lineNum">    2027</span> <span class="tlaGNC">           8 :                     return token = SyntaxKind.MinusToken;</span></span>
<span id="L2028"><span class="lineNum">    2028</span> <span class="tlaGNC">           8 :                 case CharacterCodes.dot:</span></span>
<span id="L2029"><span class="lineNum">    2029</span> <span class="tlaGNC">           8 :                     if (isDigit(charCodeUnchecked(pos + 1))) {</span></span>
<span id="L2030"><span class="lineNum">    2030</span> <span class="tlaGNC">           8 :                         scanNumber();</span></span>
<span id="L2031"><span class="lineNum">    2031</span> <span class="tlaGNC">           8 :                         return token = SyntaxKind.NumericLiteral;</span></span>
<span id="L2032"><span class="lineNum">    2032</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L2033"><span class="lineNum">    2033</span> <span class="tlaGNC">           8 :                     if (charCodeUnchecked(pos + 1) === CharacterCodes.dot &amp;&amp; charCodeUnchecked(pos + 2) === CharacterCodes.dot) {</span></span>
<span id="L2034"><span class="lineNum">    2034</span> <span class="tlaGNC">           8 :                         return pos += 3, token = SyntaxKind.DotDotDotToken;</span></span>
<span id="L2035"><span class="lineNum">    2035</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L2036"><span class="lineNum">    2036</span> <span class="tlaGNC">           8 :                     pos++;</span></span>
<span id="L2037"><span class="lineNum">    2037</span> <span class="tlaGNC">           8 :                     return token = SyntaxKind.DotToken;</span></span>
<span id="L2038"><span class="lineNum">    2038</span> <span class="tlaGNC">           8 :                 case CharacterCodes.slash:</span></span>
<span id="L2039"><span class="lineNum">    2039</span> <span class="tlaGNC">           8 :                     // Single-line comment</span></span>
<span id="L2040"><span class="lineNum">    2040</span> <span class="tlaGNC">           8 :                     if (charCodeUnchecked(pos + 1) === CharacterCodes.slash) {</span></span>
<span id="L2041"><span class="lineNum">    2041</span> <span class="tlaGNC">           8 :                         pos += 2;</span></span>
<span id="L2042"><span class="lineNum">    2042</span> <span class="tlaGNC">           8 : </span></span>
<span id="L2043"><span class="lineNum">    2043</span> <span class="tlaGNC">           8 :                         while (pos &lt; end) {</span></span>
<span id="L2044"><span class="lineNum">    2044</span> <span class="tlaGNC">           8 :                             if (isLineBreak(charCodeUnchecked(pos))) {</span></span>
<span id="L2045"><span class="lineNum">    2045</span> <span class="tlaGNC">           8 :                                 break;</span></span>
<span id="L2046"><span class="lineNum">    2046</span> <span class="tlaGNC">           8 :                             }</span></span>
<span id="L2047"><span class="lineNum">    2047</span> <span class="tlaGNC">           8 :                             pos++;</span></span>
<span id="L2048"><span class="lineNum">    2048</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L2049"><span class="lineNum">    2049</span> <span class="tlaGNC">           8 : </span></span>
<span id="L2050"><span class="lineNum">    2050</span> <span class="tlaGNC">           8 :                         commentDirectives = appendIfCommentDirective(</span></span>
<span id="L2051"><span class="lineNum">    2051</span> <span class="tlaGNC">           8 :                             commentDirectives,</span></span>
<span id="L2052"><span class="lineNum">    2052</span> <span class="tlaGNC">           8 :                             text.slice(tokenStart, pos),</span></span>
<span id="L2053"><span class="lineNum">    2053</span> <span class="tlaGNC">           8 :                             commentDirectiveRegExSingleLine,</span></span>
<span id="L2054"><span class="lineNum">    2054</span> <span class="tlaGNC">           8 :                             tokenStart,</span></span>
<span id="L2055"><span class="lineNum">    2055</span> <span class="tlaGNC">           8 :                         );</span></span>
<span id="L2056"><span class="lineNum">    2056</span> <span class="tlaGNC">           8 : </span></span>
<span id="L2057"><span class="lineNum">    2057</span> <span class="tlaGNC">           8 :                         if (skipTrivia) {</span></span>
<span id="L2058"><span class="lineNum">    2058</span> <span class="tlaGNC">           8 :                             continue;</span></span>
<span id="L2059"><span class="lineNum">    2059</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L2060"><span class="lineNum">    2060</span> <span class="tlaGNC">           8 :                         else {</span></span>
<span id="L2061"><span class="lineNum">    2061</span> <span class="tlaGNC">           8 :                             return token = SyntaxKind.SingleLineCommentTrivia;</span></span>
<span id="L2062"><span class="lineNum">    2062</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L2063"><span class="lineNum">    2063</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L2064"><span class="lineNum">    2064</span> <span class="tlaGNC">           8 :                     // Multi-line comment</span></span>
<span id="L2065"><span class="lineNum">    2065</span> <span class="tlaGNC">           8 :                     if (charCodeUnchecked(pos + 1) === CharacterCodes.asterisk) {</span></span>
<span id="L2066"><span class="lineNum">    2066</span> <span class="tlaGNC">           8 :                         pos += 2;</span></span>
<span id="L2067"><span class="lineNum">    2067</span> <span class="tlaGNC">           8 :                         const isJSDoc = charCodeUnchecked(pos) === CharacterCodes.asterisk &amp;&amp; charCodeUnchecked(pos + 1) !== CharacterCodes.slash;</span></span>
<span id="L2068"><span class="lineNum">    2068</span> <span class="tlaGNC">           8 : </span></span>
<span id="L2069"><span class="lineNum">    2069</span> <span class="tlaGNC">           8 :                         let commentClosed = false;</span></span>
<span id="L2070"><span class="lineNum">    2070</span> <span class="tlaGNC">           8 :                         let lastLineStart = tokenStart;</span></span>
<span id="L2071"><span class="lineNum">    2071</span> <span class="tlaGNC">           8 :                         while (pos &lt; end) {</span></span>
<span id="L2072"><span class="lineNum">    2072</span> <span class="tlaGNC">           8 :                             const ch = charCodeUnchecked(pos);</span></span>
<span id="L2073"><span class="lineNum">    2073</span> <span class="tlaGNC">           8 : </span></span>
<span id="L2074"><span class="lineNum">    2074</span> <span class="tlaGNC">           8 :                             if (ch === CharacterCodes.asterisk &amp;&amp; charCodeUnchecked(pos + 1) === CharacterCodes.slash) {</span></span>
<span id="L2075"><span class="lineNum">    2075</span> <span class="tlaGNC">           8 :                                 pos += 2;</span></span>
<span id="L2076"><span class="lineNum">    2076</span> <span class="tlaGNC">           8 :                                 commentClosed = true;</span></span>
<span id="L2077"><span class="lineNum">    2077</span> <span class="tlaGNC">           8 :                                 break;</span></span>
<span id="L2078"><span class="lineNum">    2078</span> <span class="tlaGNC">           8 :                             }</span></span>
<span id="L2079"><span class="lineNum">    2079</span> <span class="tlaGNC">           8 : </span></span>
<span id="L2080"><span class="lineNum">    2080</span> <span class="tlaGNC">           8 :                             pos++;</span></span>
<span id="L2081"><span class="lineNum">    2081</span> <span class="tlaGNC">           8 : </span></span>
<span id="L2082"><span class="lineNum">    2082</span> <span class="tlaGNC">           8 :                             if (isLineBreak(ch)) {</span></span>
<span id="L2083"><span class="lineNum">    2083</span> <span class="tlaGNC">           8 :                                 lastLineStart = pos;</span></span>
<span id="L2084"><span class="lineNum">    2084</span> <span class="tlaGNC">           8 :                                 tokenFlags |= TokenFlags.PrecedingLineBreak;</span></span>
<span id="L2085"><span class="lineNum">    2085</span> <span class="tlaGNC">           8 :                             }</span></span>
<span id="L2086"><span class="lineNum">    2086</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L2087"><span class="lineNum">    2087</span> <span class="tlaGNC">           8 : </span></span>
<span id="L2088"><span class="lineNum">    2088</span> <span class="tlaGNC">           8 :                         if (isJSDoc &amp;&amp; shouldParseJSDoc()) {</span></span>
<span id="L2089"><span class="lineNum">    2089</span> <span class="tlaGNC">           8 :                             tokenFlags |= TokenFlags.PrecedingJSDocComment;</span></span>
<span id="L2090"><span class="lineNum">    2090</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L2091"><span class="lineNum">    2091</span> <span class="tlaGNC">           8 : </span></span>
<span id="L2092"><span class="lineNum">    2092</span> <span class="tlaGNC">           8 :                         commentDirectives = appendIfCommentDirective(commentDirectives, text.slice(lastLineStart, pos), commentDirectiveRegExMultiLine, lastLineStart);</span></span>
<span id="L2093"><span class="lineNum">    2093</span> <span class="tlaGNC">           8 : </span></span>
<span id="L2094"><span class="lineNum">    2094</span> <span class="tlaGNC">           8 :                         if (!commentClosed) {</span></span>
<span id="L2095"><span class="lineNum">    2095</span> <span class="tlaGNC">           8 :                             error(Diagnostics.Asterisk_Slash_expected);</span></span>
<span id="L2096"><span class="lineNum">    2096</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L2097"><span class="lineNum">    2097</span> <span class="tlaGNC">           8 : </span></span>
<span id="L2098"><span class="lineNum">    2098</span> <span class="tlaGNC">           8 :                         if (skipTrivia) {</span></span>
<span id="L2099"><span class="lineNum">    2099</span> <span class="tlaGNC">           8 :                             continue;</span></span>
<span id="L2100"><span class="lineNum">    2100</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L2101"><span class="lineNum">    2101</span> <span class="tlaGNC">           8 :                         else {</span></span>
<span id="L2102"><span class="lineNum">    2102</span> <span class="tlaGNC">           8 :                             if (!commentClosed) {</span></span>
<span id="L2103"><span class="lineNum">    2103</span> <span class="tlaGNC">           8 :                                 tokenFlags |= TokenFlags.Unterminated;</span></span>
<span id="L2104"><span class="lineNum">    2104</span> <span class="tlaGNC">           8 :                             }</span></span>
<span id="L2105"><span class="lineNum">    2105</span> <span class="tlaGNC">           8 :                             return token = SyntaxKind.MultiLineCommentTrivia;</span></span>
<span id="L2106"><span class="lineNum">    2106</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L2107"><span class="lineNum">    2107</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L2108"><span class="lineNum">    2108</span> <span class="tlaGNC">           8 : </span></span>
<span id="L2109"><span class="lineNum">    2109</span> <span class="tlaGNC">           8 :                     if (charCodeUnchecked(pos + 1) === CharacterCodes.equals) {</span></span>
<span id="L2110"><span class="lineNum">    2110</span> <span class="tlaGNC">           8 :                         return pos += 2, token = SyntaxKind.SlashEqualsToken;</span></span>
<span id="L2111"><span class="lineNum">    2111</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L2112"><span class="lineNum">    2112</span> <span class="tlaGNC">           8 : </span></span>
<span id="L2113"><span class="lineNum">    2113</span> <span class="tlaGNC">           8 :                     pos++;</span></span>
<span id="L2114"><span class="lineNum">    2114</span> <span class="tlaGNC">           8 :                     return token = SyntaxKind.SlashToken;</span></span>
<span id="L2115"><span class="lineNum">    2115</span> <span class="tlaGNC">           8 : </span></span>
<span id="L2116"><span class="lineNum">    2116</span> <span class="tlaGNC">           8 :                 case CharacterCodes._0:</span></span>
<span id="L2117"><span class="lineNum">    2117</span> <span class="tlaGNC">           8 :                     if (pos + 2 &lt; end &amp;&amp; (charCodeUnchecked(pos + 1) === CharacterCodes.X || charCodeUnchecked(pos + 1) === CharacterCodes.x)) {</span></span>
<span id="L2118"><span class="lineNum">    2118</span> <span class="tlaGNC">           8 :                         pos += 2;</span></span>
<span id="L2119"><span class="lineNum">    2119</span> <span class="tlaGNC">           8 :                         tokenValue = scanMinimumNumberOfHexDigits(1, /*canHaveSeparators*/ true);</span></span>
<span id="L2120"><span class="lineNum">    2120</span> <span class="tlaGNC">           8 :                         if (!tokenValue) {</span></span>
<span id="L2121"><span class="lineNum">    2121</span> <span class="tlaGNC">           8 :                             error(Diagnostics.Hexadecimal_digit_expected);</span></span>
<span id="L2122"><span class="lineNum">    2122</span> <span class="tlaGNC">           8 :                             tokenValue = &quot;0&quot;;</span></span>
<span id="L2123"><span class="lineNum">    2123</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L2124"><span class="lineNum">    2124</span> <span class="tlaGNC">           8 :                         tokenValue = &quot;0x&quot; + tokenValue;</span></span>
<span id="L2125"><span class="lineNum">    2125</span> <span class="tlaGNC">           8 :                         tokenFlags |= TokenFlags.HexSpecifier;</span></span>
<span id="L2126"><span class="lineNum">    2126</span> <span class="tlaGNC">           8 :                         return token = checkBigIntSuffix();</span></span>
<span id="L2127"><span class="lineNum">    2127</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L2128"><span class="lineNum">    2128</span> <span class="tlaGNC">           8 :                     else if (pos + 2 &lt; end &amp;&amp; (charCodeUnchecked(pos + 1) === CharacterCodes.B || charCodeUnchecked(pos + 1) === CharacterCodes.b)) {</span></span>
<span id="L2129"><span class="lineNum">    2129</span> <span class="tlaGNC">           8 :                         pos += 2;</span></span>
<span id="L2130"><span class="lineNum">    2130</span> <span class="tlaGNC">           8 :                         tokenValue = scanBinaryOrOctalDigits(/* base */ 2);</span></span>
<span id="L2131"><span class="lineNum">    2131</span> <span class="tlaGNC">           8 :                         if (!tokenValue) {</span></span>
<span id="L2132"><span class="lineNum">    2132</span> <span class="tlaGNC">           8 :                             error(Diagnostics.Binary_digit_expected);</span></span>
<span id="L2133"><span class="lineNum">    2133</span> <span class="tlaGNC">           8 :                             tokenValue = &quot;0&quot;;</span></span>
<span id="L2134"><span class="lineNum">    2134</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L2135"><span class="lineNum">    2135</span> <span class="tlaGNC">           8 :                         tokenValue = &quot;0b&quot; + tokenValue;</span></span>
<span id="L2136"><span class="lineNum">    2136</span> <span class="tlaGNC">           8 :                         tokenFlags |= TokenFlags.BinarySpecifier;</span></span>
<span id="L2137"><span class="lineNum">    2137</span> <span class="tlaGNC">           8 :                         return token = checkBigIntSuffix();</span></span>
<span id="L2138"><span class="lineNum">    2138</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L2139"><span class="lineNum">    2139</span> <span class="tlaGNC">           8 :                     else if (pos + 2 &lt; end &amp;&amp; (charCodeUnchecked(pos + 1) === CharacterCodes.O || charCodeUnchecked(pos + 1) === CharacterCodes.o)) {</span></span>
<span id="L2140"><span class="lineNum">    2140</span> <span class="tlaGNC">           8 :                         pos += 2;</span></span>
<span id="L2141"><span class="lineNum">    2141</span> <span class="tlaGNC">           8 :                         tokenValue = scanBinaryOrOctalDigits(/* base */ 8);</span></span>
<span id="L2142"><span class="lineNum">    2142</span> <span class="tlaGNC">           8 :                         if (!tokenValue) {</span></span>
<span id="L2143"><span class="lineNum">    2143</span> <span class="tlaGNC">           8 :                             error(Diagnostics.Octal_digit_expected);</span></span>
<span id="L2144"><span class="lineNum">    2144</span> <span class="tlaGNC">           8 :                             tokenValue = &quot;0&quot;;</span></span>
<span id="L2145"><span class="lineNum">    2145</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L2146"><span class="lineNum">    2146</span> <span class="tlaGNC">           8 :                         tokenValue = &quot;0o&quot; + tokenValue;</span></span>
<span id="L2147"><span class="lineNum">    2147</span> <span class="tlaGNC">           8 :                         tokenFlags |= TokenFlags.OctalSpecifier;</span></span>
<span id="L2148"><span class="lineNum">    2148</span> <span class="tlaGNC">           8 :                         return token = checkBigIntSuffix();</span></span>
<span id="L2149"><span class="lineNum">    2149</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L2150"><span class="lineNum">    2150</span> <span class="tlaGNC">           8 :                 // falls through</span></span>
<span id="L2151"><span class="lineNum">    2151</span> <span class="tlaGNC">           8 :                 case CharacterCodes._1:</span></span>
<span id="L2152"><span class="lineNum">    2152</span> <span class="tlaGNC">           8 :                 case CharacterCodes._2:</span></span>
<span id="L2153"><span class="lineNum">    2153</span> <span class="tlaGNC">           8 :                 case CharacterCodes._3:</span></span>
<span id="L2154"><span class="lineNum">    2154</span> <span class="tlaGNC">           8 :                 case CharacterCodes._4:</span></span>
<span id="L2155"><span class="lineNum">    2155</span> <span class="tlaGNC">           8 :                 case CharacterCodes._5:</span></span>
<span id="L2156"><span class="lineNum">    2156</span> <span class="tlaGNC">           8 :                 case CharacterCodes._6:</span></span>
<span id="L2157"><span class="lineNum">    2157</span> <span class="tlaGNC">           8 :                 case CharacterCodes._7:</span></span>
<span id="L2158"><span class="lineNum">    2158</span> <span class="tlaGNC">           8 :                 case CharacterCodes._8:</span></span>
<span id="L2159"><span class="lineNum">    2159</span> <span class="tlaGNC">           8 :                 case CharacterCodes._9:</span></span>
<span id="L2160"><span class="lineNum">    2160</span> <span class="tlaGNC">           8 :                     return token = scanNumber();</span></span>
<span id="L2161"><span class="lineNum">    2161</span> <span class="tlaGNC">           8 :                 case CharacterCodes.colon:</span></span>
<span id="L2162"><span class="lineNum">    2162</span> <span class="tlaGNC">           8 :                     pos++;</span></span>
<span id="L2163"><span class="lineNum">    2163</span> <span class="tlaGNC">           8 :                     return token = SyntaxKind.ColonToken;</span></span>
<span id="L2164"><span class="lineNum">    2164</span> <span class="tlaGNC">           8 :                 case CharacterCodes.semicolon:</span></span>
<span id="L2165"><span class="lineNum">    2165</span> <span class="tlaGNC">           8 :                     pos++;</span></span>
<span id="L2166"><span class="lineNum">    2166</span> <span class="tlaGNC">           8 :                     return token = SyntaxKind.SemicolonToken;</span></span>
<span id="L2167"><span class="lineNum">    2167</span> <span class="tlaGNC">           8 :                 case CharacterCodes.lessThan:</span></span>
<span id="L2168"><span class="lineNum">    2168</span> <span class="tlaGNC">           8 :                     if (isConflictMarkerTrivia(text, pos)) {</span></span>
<span id="L2169"><span class="lineNum">    2169</span> <span class="tlaGNC">           8 :                         pos = scanConflictMarkerTrivia(text, pos, error);</span></span>
<span id="L2170"><span class="lineNum">    2170</span> <span class="tlaGNC">           8 :                         if (skipTrivia) {</span></span>
<span id="L2171"><span class="lineNum">    2171</span> <span class="tlaGNC">           8 :                             continue;</span></span>
<span id="L2172"><span class="lineNum">    2172</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L2173"><span class="lineNum">    2173</span> <span class="tlaGNC">           8 :                         else {</span></span>
<span id="L2174"><span class="lineNum">    2174</span> <span class="tlaGNC">           8 :                             return token = SyntaxKind.ConflictMarkerTrivia;</span></span>
<span id="L2175"><span class="lineNum">    2175</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L2176"><span class="lineNum">    2176</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L2177"><span class="lineNum">    2177</span> <span class="tlaGNC">           8 : </span></span>
<span id="L2178"><span class="lineNum">    2178</span> <span class="tlaGNC">           8 :                     if (charCodeUnchecked(pos + 1) === CharacterCodes.lessThan) {</span></span>
<span id="L2179"><span class="lineNum">    2179</span> <span class="tlaGNC">           8 :                         if (charCodeUnchecked(pos + 2) === CharacterCodes.equals) {</span></span>
<span id="L2180"><span class="lineNum">    2180</span> <span class="tlaGNC">           8 :                             return pos += 3, token = SyntaxKind.LessThanLessThanEqualsToken;</span></span>
<span id="L2181"><span class="lineNum">    2181</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L2182"><span class="lineNum">    2182</span> <span class="tlaGNC">           8 :                         return pos += 2, token = SyntaxKind.LessThanLessThanToken;</span></span>
<span id="L2183"><span class="lineNum">    2183</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L2184"><span class="lineNum">    2184</span> <span class="tlaGNC">           8 :                     if (charCodeUnchecked(pos + 1) === CharacterCodes.equals) {</span></span>
<span id="L2185"><span class="lineNum">    2185</span> <span class="tlaGNC">           8 :                         return pos += 2, token = SyntaxKind.LessThanEqualsToken;</span></span>
<span id="L2186"><span class="lineNum">    2186</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L2187"><span class="lineNum">    2187</span> <span class="tlaGNC">           8 :                     if (</span></span>
<span id="L2188"><span class="lineNum">    2188</span> <span class="tlaGNC">           8 :                         languageVariant === LanguageVariant.JSX &amp;&amp;</span></span>
<span id="L2189"><span class="lineNum">    2189</span> <span class="tlaGNC">           8 :                         charCodeUnchecked(pos + 1) === CharacterCodes.slash &amp;&amp;</span></span>
<span id="L2190"><span class="lineNum">    2190</span> <span class="tlaGNC">           8 :                         charCodeUnchecked(pos + 2) !== CharacterCodes.asterisk</span></span>
<span id="L2191"><span class="lineNum">    2191</span> <span class="tlaGNC">           8 :                     ) {</span></span>
<span id="L2192"><span class="lineNum">    2192</span> <span class="tlaGNC">           8 :                         return pos += 2, token = SyntaxKind.LessThanSlashToken;</span></span>
<span id="L2193"><span class="lineNum">    2193</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L2194"><span class="lineNum">    2194</span> <span class="tlaGNC">           8 :                     pos++;</span></span>
<span id="L2195"><span class="lineNum">    2195</span> <span class="tlaGNC">           8 :                     return token = SyntaxKind.LessThanToken;</span></span>
<span id="L2196"><span class="lineNum">    2196</span> <span class="tlaGNC">           8 :                 case CharacterCodes.equals:</span></span>
<span id="L2197"><span class="lineNum">    2197</span> <span class="tlaGNC">           8 :                     if (isConflictMarkerTrivia(text, pos)) {</span></span>
<span id="L2198"><span class="lineNum">    2198</span> <span class="tlaGNC">           8 :                         pos = scanConflictMarkerTrivia(text, pos, error);</span></span>
<span id="L2199"><span class="lineNum">    2199</span> <span class="tlaGNC">           8 :                         if (skipTrivia) {</span></span>
<span id="L2200"><span class="lineNum">    2200</span> <span class="tlaGNC">           8 :                             continue;</span></span>
<span id="L2201"><span class="lineNum">    2201</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L2202"><span class="lineNum">    2202</span> <span class="tlaGNC">           8 :                         else {</span></span>
<span id="L2203"><span class="lineNum">    2203</span> <span class="tlaGNC">           8 :                             return token = SyntaxKind.ConflictMarkerTrivia;</span></span>
<span id="L2204"><span class="lineNum">    2204</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L2205"><span class="lineNum">    2205</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L2206"><span class="lineNum">    2206</span> <span class="tlaGNC">           8 : </span></span>
<span id="L2207"><span class="lineNum">    2207</span> <span class="tlaGNC">           8 :                     if (charCodeUnchecked(pos + 1) === CharacterCodes.equals) {</span></span>
<span id="L2208"><span class="lineNum">    2208</span> <span class="tlaGNC">           8 :                         if (charCodeUnchecked(pos + 2) === CharacterCodes.equals) {</span></span>
<span id="L2209"><span class="lineNum">    2209</span> <span class="tlaGNC">           8 :                             return pos += 3, token = SyntaxKind.EqualsEqualsEqualsToken;</span></span>
<span id="L2210"><span class="lineNum">    2210</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L2211"><span class="lineNum">    2211</span> <span class="tlaGNC">           8 :                         return pos += 2, token = SyntaxKind.EqualsEqualsToken;</span></span>
<span id="L2212"><span class="lineNum">    2212</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L2213"><span class="lineNum">    2213</span> <span class="tlaGNC">           8 :                     if (charCodeUnchecked(pos + 1) === CharacterCodes.greaterThan) {</span></span>
<span id="L2214"><span class="lineNum">    2214</span> <span class="tlaGNC">           8 :                         return pos += 2, token = SyntaxKind.EqualsGreaterThanToken;</span></span>
<span id="L2215"><span class="lineNum">    2215</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L2216"><span class="lineNum">    2216</span> <span class="tlaGNC">           8 :                     pos++;</span></span>
<span id="L2217"><span class="lineNum">    2217</span> <span class="tlaGNC">           8 :                     return token = SyntaxKind.EqualsToken;</span></span>
<span id="L2218"><span class="lineNum">    2218</span> <span class="tlaGNC">           8 :                 case CharacterCodes.greaterThan:</span></span>
<span id="L2219"><span class="lineNum">    2219</span> <span class="tlaGNC">           8 :                     if (isConflictMarkerTrivia(text, pos)) {</span></span>
<span id="L2220"><span class="lineNum">    2220</span> <span class="tlaGNC">           8 :                         pos = scanConflictMarkerTrivia(text, pos, error);</span></span>
<span id="L2221"><span class="lineNum">    2221</span> <span class="tlaGNC">           8 :                         if (skipTrivia) {</span></span>
<span id="L2222"><span class="lineNum">    2222</span> <span class="tlaGNC">           8 :                             continue;</span></span>
<span id="L2223"><span class="lineNum">    2223</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L2224"><span class="lineNum">    2224</span> <span class="tlaGNC">           8 :                         else {</span></span>
<span id="L2225"><span class="lineNum">    2225</span> <span class="tlaGNC">           8 :                             return token = SyntaxKind.ConflictMarkerTrivia;</span></span>
<span id="L2226"><span class="lineNum">    2226</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L2227"><span class="lineNum">    2227</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L2228"><span class="lineNum">    2228</span> <span class="tlaGNC">           8 : </span></span>
<span id="L2229"><span class="lineNum">    2229</span> <span class="tlaGNC">           8 :                     pos++;</span></span>
<span id="L2230"><span class="lineNum">    2230</span> <span class="tlaGNC">           8 :                     return token = SyntaxKind.GreaterThanToken;</span></span>
<span id="L2231"><span class="lineNum">    2231</span> <span class="tlaGNC">           8 :                 case CharacterCodes.question:</span></span>
<span id="L2232"><span class="lineNum">    2232</span> <span class="tlaGNC">           8 :                     if (charCodeUnchecked(pos + 1) === CharacterCodes.dot &amp;&amp; !isDigit(charCodeUnchecked(pos + 2))) {</span></span>
<span id="L2233"><span class="lineNum">    2233</span> <span class="tlaGNC">           8 :                         return pos += 2, token = SyntaxKind.QuestionDotToken;</span></span>
<span id="L2234"><span class="lineNum">    2234</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L2235"><span class="lineNum">    2235</span> <span class="tlaGNC">           8 :                     if (charCodeUnchecked(pos + 1) === CharacterCodes.question) {</span></span>
<span id="L2236"><span class="lineNum">    2236</span> <span class="tlaGNC">           8 :                         if (charCodeUnchecked(pos + 2) === CharacterCodes.equals) {</span></span>
<span id="L2237"><span class="lineNum">    2237</span> <span class="tlaGNC">           8 :                             return pos += 3, token = SyntaxKind.QuestionQuestionEqualsToken;</span></span>
<span id="L2238"><span class="lineNum">    2238</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L2239"><span class="lineNum">    2239</span> <span class="tlaGNC">           8 :                         return pos += 2, token = SyntaxKind.QuestionQuestionToken;</span></span>
<span id="L2240"><span class="lineNum">    2240</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L2241"><span class="lineNum">    2241</span> <span class="tlaGNC">           8 :                     pos++;</span></span>
<span id="L2242"><span class="lineNum">    2242</span> <span class="tlaGNC">           8 :                     return token = SyntaxKind.QuestionToken;</span></span>
<span id="L2243"><span class="lineNum">    2243</span> <span class="tlaGNC">           8 :                 case CharacterCodes.openBracket:</span></span>
<span id="L2244"><span class="lineNum">    2244</span> <span class="tlaGNC">           8 :                     pos++;</span></span>
<span id="L2245"><span class="lineNum">    2245</span> <span class="tlaGNC">           8 :                     return token = SyntaxKind.OpenBracketToken;</span></span>
<span id="L2246"><span class="lineNum">    2246</span> <span class="tlaGNC">           8 :                 case CharacterCodes.closeBracket:</span></span>
<span id="L2247"><span class="lineNum">    2247</span> <span class="tlaGNC">           8 :                     pos++;</span></span>
<span id="L2248"><span class="lineNum">    2248</span> <span class="tlaGNC">           8 :                     return token = SyntaxKind.CloseBracketToken;</span></span>
<span id="L2249"><span class="lineNum">    2249</span> <span class="tlaGNC">           8 :                 case CharacterCodes.caret:</span></span>
<span id="L2250"><span class="lineNum">    2250</span> <span class="tlaGNC">           8 :                     if (charCodeUnchecked(pos + 1) === CharacterCodes.equals) {</span></span>
<span id="L2251"><span class="lineNum">    2251</span> <span class="tlaGNC">           8 :                         return pos += 2, token = SyntaxKind.CaretEqualsToken;</span></span>
<span id="L2252"><span class="lineNum">    2252</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L2253"><span class="lineNum">    2253</span> <span class="tlaGNC">           8 :                     pos++;</span></span>
<span id="L2254"><span class="lineNum">    2254</span> <span class="tlaGNC">           8 :                     return token = SyntaxKind.CaretToken;</span></span>
<span id="L2255"><span class="lineNum">    2255</span> <span class="tlaGNC">           8 :                 case CharacterCodes.openBrace:</span></span>
<span id="L2256"><span class="lineNum">    2256</span> <span class="tlaGNC">           8 :                     pos++;</span></span>
<span id="L2257"><span class="lineNum">    2257</span> <span class="tlaGNC">           8 :                     return token = SyntaxKind.OpenBraceToken;</span></span>
<span id="L2258"><span class="lineNum">    2258</span> <span class="tlaGNC">           8 :                 case CharacterCodes.bar:</span></span>
<span id="L2259"><span class="lineNum">    2259</span> <span class="tlaGNC">           8 :                     if (isConflictMarkerTrivia(text, pos)) {</span></span>
<span id="L2260"><span class="lineNum">    2260</span> <span class="tlaGNC">           8 :                         pos = scanConflictMarkerTrivia(text, pos, error);</span></span>
<span id="L2261"><span class="lineNum">    2261</span> <span class="tlaGNC">           8 :                         if (skipTrivia) {</span></span>
<span id="L2262"><span class="lineNum">    2262</span> <span class="tlaGNC">           8 :                             continue;</span></span>
<span id="L2263"><span class="lineNum">    2263</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L2264"><span class="lineNum">    2264</span> <span class="tlaGNC">           8 :                         else {</span></span>
<span id="L2265"><span class="lineNum">    2265</span> <span class="tlaGNC">           8 :                             return token = SyntaxKind.ConflictMarkerTrivia;</span></span>
<span id="L2266"><span class="lineNum">    2266</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L2267"><span class="lineNum">    2267</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L2268"><span class="lineNum">    2268</span> <span class="tlaGNC">           8 : </span></span>
<span id="L2269"><span class="lineNum">    2269</span> <span class="tlaGNC">           8 :                     if (charCodeUnchecked(pos + 1) === CharacterCodes.bar) {</span></span>
<span id="L2270"><span class="lineNum">    2270</span> <span class="tlaGNC">           8 :                         if (charCodeUnchecked(pos + 2) === CharacterCodes.equals) {</span></span>
<span id="L2271"><span class="lineNum">    2271</span> <span class="tlaGNC">           8 :                             return pos += 3, token = SyntaxKind.BarBarEqualsToken;</span></span>
<span id="L2272"><span class="lineNum">    2272</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L2273"><span class="lineNum">    2273</span> <span class="tlaGNC">           8 :                         return pos += 2, token = SyntaxKind.BarBarToken;</span></span>
<span id="L2274"><span class="lineNum">    2274</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L2275"><span class="lineNum">    2275</span> <span class="tlaGNC">           8 :                     if (charCodeUnchecked(pos + 1) === CharacterCodes.equals) {</span></span>
<span id="L2276"><span class="lineNum">    2276</span> <span class="tlaGNC">           8 :                         return pos += 2, token = SyntaxKind.BarEqualsToken;</span></span>
<span id="L2277"><span class="lineNum">    2277</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L2278"><span class="lineNum">    2278</span> <span class="tlaGNC">           8 :                     pos++;</span></span>
<span id="L2279"><span class="lineNum">    2279</span> <span class="tlaGNC">           8 :                     return token = SyntaxKind.BarToken;</span></span>
<span id="L2280"><span class="lineNum">    2280</span> <span class="tlaGNC">           8 :                 case CharacterCodes.closeBrace:</span></span>
<span id="L2281"><span class="lineNum">    2281</span> <span class="tlaGNC">           8 :                     pos++;</span></span>
<span id="L2282"><span class="lineNum">    2282</span> <span class="tlaGNC">           8 :                     return token = SyntaxKind.CloseBraceToken;</span></span>
<span id="L2283"><span class="lineNum">    2283</span> <span class="tlaGNC">           8 :                 case CharacterCodes.tilde:</span></span>
<span id="L2284"><span class="lineNum">    2284</span> <span class="tlaGNC">           8 :                     pos++;</span></span>
<span id="L2285"><span class="lineNum">    2285</span> <span class="tlaGNC">           8 :                     return token = SyntaxKind.TildeToken;</span></span>
<span id="L2286"><span class="lineNum">    2286</span> <span class="tlaGNC">           8 :                 case CharacterCodes.at:</span></span>
<span id="L2287"><span class="lineNum">    2287</span> <span class="tlaGNC">           8 :                     pos++;</span></span>
<span id="L2288"><span class="lineNum">    2288</span> <span class="tlaGNC">           8 :                     return token = SyntaxKind.AtToken;</span></span>
<span id="L2289"><span class="lineNum">    2289</span> <span class="tlaGNC">           8 :                 case CharacterCodes.backslash:</span></span>
<span id="L2290"><span class="lineNum">    2290</span> <span class="tlaGNC">           8 :                     const extendedCookedChar = peekExtendedUnicodeEscape();</span></span>
<span id="L2291"><span class="lineNum">    2291</span> <span class="tlaGNC">           8 :                     if (extendedCookedChar &gt;= 0 &amp;&amp; isIdentifierStart(extendedCookedChar, languageVersion)) {</span></span>
<span id="L2292"><span class="lineNum">    2292</span> <span class="tlaGNC">           8 :                         tokenValue = scanExtendedUnicodeEscape(/*shouldEmitInvalidEscapeError*/ true) + scanIdentifierParts();</span></span>
<span id="L2293"><span class="lineNum">    2293</span> <span class="tlaGNC">           8 :                         return token = getIdentifierToken();</span></span>
<span id="L2294"><span class="lineNum">    2294</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L2295"><span class="lineNum">    2295</span> <span class="tlaGNC">           8 : </span></span>
<span id="L2296"><span class="lineNum">    2296</span> <span class="tlaGNC">           8 :                     const cookedChar = peekUnicodeEscape();</span></span>
<span id="L2297"><span class="lineNum">    2297</span> <span class="tlaGNC">           8 :                     if (cookedChar &gt;= 0 &amp;&amp; isIdentifierStart(cookedChar, languageVersion)) {</span></span>
<span id="L2298"><span class="lineNum">    2298</span> <span class="tlaGNC">           8 :                         pos += 6;</span></span>
<span id="L2299"><span class="lineNum">    2299</span> <span class="tlaGNC">           8 :                         tokenFlags |= TokenFlags.UnicodeEscape;</span></span>
<span id="L2300"><span class="lineNum">    2300</span> <span class="tlaGNC">           8 :                         tokenValue = String.fromCharCode(cookedChar) + scanIdentifierParts();</span></span>
<span id="L2301"><span class="lineNum">    2301</span> <span class="tlaGNC">           8 :                         return token = getIdentifierToken();</span></span>
<span id="L2302"><span class="lineNum">    2302</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L2303"><span class="lineNum">    2303</span> <span class="tlaGNC">           8 : </span></span>
<span id="L2304"><span class="lineNum">    2304</span> <span class="tlaGNC">           8 :                     error(Diagnostics.Invalid_character);</span></span>
<span id="L2305"><span class="lineNum">    2305</span> <span class="tlaGNC">           8 :                     pos++;</span></span>
<span id="L2306"><span class="lineNum">    2306</span> <span class="tlaGNC">           8 :                     return token = SyntaxKind.Unknown;</span></span>
<span id="L2307"><span class="lineNum">    2307</span> <span class="tlaGNC">           8 :                 case CharacterCodes.hash:</span></span>
<span id="L2308"><span class="lineNum">    2308</span> <span class="tlaGNC">           8 :                     if (pos !== 0 &amp;&amp; text[pos + 1] === &quot;!&quot;) {</span></span>
<span id="L2309"><span class="lineNum">    2309</span> <span class="tlaGNC">           8 :                         error(Diagnostics.can_only_be_used_at_the_start_of_a_file, pos, 2);</span></span>
<span id="L2310"><span class="lineNum">    2310</span> <span class="tlaGNC">           8 :                         pos++;</span></span>
<span id="L2311"><span class="lineNum">    2311</span> <span class="tlaGNC">           8 :                         return token = SyntaxKind.Unknown;</span></span>
<span id="L2312"><span class="lineNum">    2312</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L2313"><span class="lineNum">    2313</span> <span class="tlaGNC">           8 : </span></span>
<span id="L2314"><span class="lineNum">    2314</span> <span class="tlaGNC">           8 :                     const charAfterHash = codePointUnchecked(pos + 1);</span></span>
<span id="L2315"><span class="lineNum">    2315</span> <span class="tlaGNC">           8 :                     if (charAfterHash === CharacterCodes.backslash) {</span></span>
<span id="L2316"><span class="lineNum">    2316</span> <span class="tlaGNC">           8 :                         pos++;</span></span>
<span id="L2317"><span class="lineNum">    2317</span> <span class="tlaGNC">           8 :                         const extendedCookedChar = peekExtendedUnicodeEscape();</span></span>
<span id="L2318"><span class="lineNum">    2318</span> <span class="tlaGNC">           8 :                         if (extendedCookedChar &gt;= 0 &amp;&amp; isIdentifierStart(extendedCookedChar, languageVersion)) {</span></span>
<span id="L2319"><span class="lineNum">    2319</span> <span class="tlaGNC">           8 :                             tokenValue = &quot;#&quot; + scanExtendedUnicodeEscape(/*shouldEmitInvalidEscapeError*/ true) + scanIdentifierParts();</span></span>
<span id="L2320"><span class="lineNum">    2320</span> <span class="tlaGNC">           8 :                             return token = SyntaxKind.PrivateIdentifier;</span></span>
<span id="L2321"><span class="lineNum">    2321</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L2322"><span class="lineNum">    2322</span> <span class="tlaGNC">           8 : </span></span>
<span id="L2323"><span class="lineNum">    2323</span> <span class="tlaGNC">           8 :                         const cookedChar = peekUnicodeEscape();</span></span>
<span id="L2324"><span class="lineNum">    2324</span> <span class="tlaGNC">           8 :                         if (cookedChar &gt;= 0 &amp;&amp; isIdentifierStart(cookedChar, languageVersion)) {</span></span>
<span id="L2325"><span class="lineNum">    2325</span> <span class="tlaGNC">           8 :                             pos += 6;</span></span>
<span id="L2326"><span class="lineNum">    2326</span> <span class="tlaGNC">           8 :                             tokenFlags |= TokenFlags.UnicodeEscape;</span></span>
<span id="L2327"><span class="lineNum">    2327</span> <span class="tlaGNC">           8 :                             tokenValue = &quot;#&quot; + String.fromCharCode(cookedChar) + scanIdentifierParts();</span></span>
<span id="L2328"><span class="lineNum">    2328</span> <span class="tlaGNC">           8 :                             return token = SyntaxKind.PrivateIdentifier;</span></span>
<span id="L2329"><span class="lineNum">    2329</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L2330"><span class="lineNum">    2330</span> <span class="tlaGNC">           8 :                         pos--;</span></span>
<span id="L2331"><span class="lineNum">    2331</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L2332"><span class="lineNum">    2332</span> <span class="tlaGNC">           8 : </span></span>
<span id="L2333"><span class="lineNum">    2333</span> <span class="tlaGNC">           8 :                     if (isIdentifierStart(charAfterHash, languageVersion)) {</span></span>
<span id="L2334"><span class="lineNum">    2334</span> <span class="tlaGNC">           8 :                         pos++;</span></span>
<span id="L2335"><span class="lineNum">    2335</span> <span class="tlaGNC">           8 :                         // We're relying on scanIdentifier's behavior and adjusting the token kind after the fact.</span></span>
<span id="L2336"><span class="lineNum">    2336</span> <span class="tlaGNC">           8 :                         // Notably absent from this block is the fact that calling a function named &quot;scanIdentifier&quot;,</span></span>
<span id="L2337"><span class="lineNum">    2337</span> <span class="tlaGNC">           8 :                         // but identifiers don't include '#', and that function doesn't deal with it at all.</span></span>
<span id="L2338"><span class="lineNum">    2338</span> <span class="tlaGNC">           8 :                         // This works because 'scanIdentifier' tries to reuse source characters and builds up substrings;</span></span>
<span id="L2339"><span class="lineNum">    2339</span> <span class="tlaGNC">           8 :                         // however, it starts at the 'tokenPos' which includes the '#', and will &quot;accidentally&quot; prepend the '#' for us.</span></span>
<span id="L2340"><span class="lineNum">    2340</span> <span class="tlaGNC">           8 :                         scanIdentifier(charAfterHash, languageVersion);</span></span>
<span id="L2341"><span class="lineNum">    2341</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L2342"><span class="lineNum">    2342</span> <span class="tlaGNC">           8 :                     else {</span></span>
<span id="L2343"><span class="lineNum">    2343</span> <span class="tlaGNC">           8 :                         tokenValue = &quot;#&quot;;</span></span>
<span id="L2344"><span class="lineNum">    2344</span> <span class="tlaGNC">           8 :                         error(Diagnostics.Invalid_character, pos++, charSize(ch));</span></span>
<span id="L2345"><span class="lineNum">    2345</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L2346"><span class="lineNum">    2346</span> <span class="tlaGNC">           8 :                     return token = SyntaxKind.PrivateIdentifier;</span></span>
<span id="L2347"><span class="lineNum">    2347</span> <span class="tlaGNC">           8 :                 case CharacterCodes.replacementCharacter:</span></span>
<span id="L2348"><span class="lineNum">    2348</span> <span class="tlaGNC">           8 :                     error(Diagnostics.File_appears_to_be_binary, 0, 0);</span></span>
<span id="L2349"><span class="lineNum">    2349</span> <span class="tlaGNC">           8 :                     pos = end;</span></span>
<span id="L2350"><span class="lineNum">    2350</span> <span class="tlaGNC">           8 :                     return token = SyntaxKind.NonTextFileMarkerTrivia;</span></span>
<span id="L2351"><span class="lineNum">    2351</span> <span class="tlaGNC">           8 :                 default:</span></span>
<span id="L2352"><span class="lineNum">    2352</span> <span class="tlaGNC">           8 :                     const identifierKind = scanIdentifier(ch, languageVersion);</span></span>
<span id="L2353"><span class="lineNum">    2353</span> <span class="tlaGNC">           8 :                     if (identifierKind) {</span></span>
<span id="L2354"><span class="lineNum">    2354</span> <span class="tlaGNC">           8 :                         return token = identifierKind;</span></span>
<span id="L2355"><span class="lineNum">    2355</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L2356"><span class="lineNum">    2356</span> <span class="tlaGNC">           8 :                     else if (isWhiteSpaceSingleLine(ch)) {</span></span>
<span id="L2357"><span class="lineNum">    2357</span> <span class="tlaGNC">           8 :                         pos += charSize(ch);</span></span>
<span id="L2358"><span class="lineNum">    2358</span> <span class="tlaGNC">           8 :                         continue;</span></span>
<span id="L2359"><span class="lineNum">    2359</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L2360"><span class="lineNum">    2360</span> <span class="tlaGNC">           8 :                     else if (isLineBreak(ch)) {</span></span>
<span id="L2361"><span class="lineNum">    2361</span> <span class="tlaGNC">           8 :                         tokenFlags |= TokenFlags.PrecedingLineBreak;</span></span>
<span id="L2362"><span class="lineNum">    2362</span> <span class="tlaGNC">           8 :                         pos += charSize(ch);</span></span>
<span id="L2363"><span class="lineNum">    2363</span> <span class="tlaGNC">           8 :                         continue;</span></span>
<span id="L2364"><span class="lineNum">    2364</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L2365"><span class="lineNum">    2365</span> <span class="tlaGNC">           8 :                     const size = charSize(ch);</span></span>
<span id="L2366"><span class="lineNum">    2366</span> <span class="tlaGNC">           8 :                     error(Diagnostics.Invalid_character, pos, size);</span></span>
<span id="L2367"><span class="lineNum">    2367</span> <span class="tlaGNC">           8 :                     pos += size;</span></span>
<span id="L2368"><span class="lineNum">    2368</span> <span class="tlaGNC">           8 :                     return token = SyntaxKind.Unknown;</span></span>
<span id="L2369"><span class="lineNum">    2369</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L2370"><span class="lineNum">    2370</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L2371"><span class="lineNum">    2371</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L2372"><span class="lineNum">    2372</span> <span class="tlaGNC">           8 : </span></span>
<span id="L2373"><span class="lineNum">    2373</span> <span class="tlaGNC">           8 :     function shouldParseJSDoc() {</span></span>
<span id="L2374"><span class="lineNum">    2374</span> <span class="tlaGNC">           8 :         switch (jsDocParsingMode) {</span></span>
<span id="L2375"><span class="lineNum">    2375</span> <span class="tlaGNC">           8 :             case JSDocParsingMode.ParseAll:</span></span>
<span id="L2376"><span class="lineNum">    2376</span> <span class="tlaGNC">           8 :                 return true;</span></span>
<span id="L2377"><span class="lineNum">    2377</span> <span class="tlaGNC">           8 :             case JSDocParsingMode.ParseNone:</span></span>
<span id="L2378"><span class="lineNum">    2378</span> <span class="tlaGNC">           8 :                 return false;</span></span>
<span id="L2379"><span class="lineNum">    2379</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L2380"><span class="lineNum">    2380</span> <span class="tlaGNC">           8 : </span></span>
<span id="L2381"><span class="lineNum">    2381</span> <span class="tlaGNC">           8 :         if (scriptKind !== ScriptKind.TS &amp;&amp; scriptKind !== ScriptKind.TSX) {</span></span>
<span id="L2382"><span class="lineNum">    2382</span> <span class="tlaGNC">           8 :             // If outside of TS, we need JSDoc to get any type info.</span></span>
<span id="L2383"><span class="lineNum">    2383</span> <span class="tlaGNC">           8 :             return true;</span></span>
<span id="L2384"><span class="lineNum">    2384</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L2385"><span class="lineNum">    2385</span> <span class="tlaGNC">           8 : </span></span>
<span id="L2386"><span class="lineNum">    2386</span> <span class="tlaGNC">           8 :         if (jsDocParsingMode === JSDocParsingMode.ParseForTypeInfo) {</span></span>
<span id="L2387"><span class="lineNum">    2387</span> <span class="tlaGNC">           8 :             // If we're in TS, but we don't need to produce reliable errors,</span></span>
<span id="L2388"><span class="lineNum">    2388</span> <span class="tlaGNC">           8 :             // we don't need to parse to find @see or @link.</span></span>
<span id="L2389"><span class="lineNum">    2389</span> <span class="tlaGNC">           8 :             return false;</span></span>
<span id="L2390"><span class="lineNum">    2390</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L2391"><span class="lineNum">    2391</span> <span class="tlaGNC">           8 : </span></span>
<span id="L2392"><span class="lineNum">    2392</span> <span class="tlaGNC">           8 :         return jsDocSeeOrLink.test(text.slice(fullStartPos, pos));</span></span>
<span id="L2393"><span class="lineNum">    2393</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L2394"><span class="lineNum">    2394</span> <span class="tlaGNC">           8 : </span></span>
<span id="L2395"><span class="lineNum">    2395</span> <span class="tlaGNC">           8 :     function reScanInvalidIdentifier(): SyntaxKind {</span></span>
<span id="L2396"><span class="lineNum">    2396</span> <span class="tlaGNC">           8 :         Debug.assert(token === SyntaxKind.Unknown, &quot;'reScanInvalidIdentifier' should only be called when the current token is 'SyntaxKind.Unknown'.&quot;);</span></span>
<span id="L2397"><span class="lineNum">    2397</span> <span class="tlaGNC">           8 :         pos = tokenStart = fullStartPos;</span></span>
<span id="L2398"><span class="lineNum">    2398</span> <span class="tlaGNC">           8 :         tokenFlags = 0;</span></span>
<span id="L2399"><span class="lineNum">    2399</span> <span class="tlaGNC">           8 :         const ch = codePointUnchecked(pos);</span></span>
<span id="L2400"><span class="lineNum">    2400</span> <span class="tlaGNC">           8 :         const identifierKind = scanIdentifier(ch, ScriptTarget.ESNext);</span></span>
<span id="L2401"><span class="lineNum">    2401</span> <span class="tlaGNC">           8 :         if (identifierKind) {</span></span>
<span id="L2402"><span class="lineNum">    2402</span> <span class="tlaGNC">           8 :             return token = identifierKind;</span></span>
<span id="L2403"><span class="lineNum">    2403</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L2404"><span class="lineNum">    2404</span> <span class="tlaGNC">           8 :         pos += charSize(ch);</span></span>
<span id="L2405"><span class="lineNum">    2405</span> <span class="tlaGNC">           8 :         return token; // Still `SyntaxKind.Unknown`</span></span>
<span id="L2406"><span class="lineNum">    2406</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L2407"><span class="lineNum">    2407</span> <span class="tlaGNC">           8 : </span></span>
<span id="L2408"><span class="lineNum">    2408</span> <span class="tlaGNC">           8 :     function scanIdentifier(startCharacter: number, languageVersion: ScriptTarget) {</span></span>
<span id="L2409"><span class="lineNum">    2409</span> <span class="tlaGNC">           8 :         let ch = startCharacter;</span></span>
<span id="L2410"><span class="lineNum">    2410</span> <span class="tlaGNC">           8 :         if (isIdentifierStart(ch, languageVersion)) {</span></span>
<span id="L2411"><span class="lineNum">    2411</span> <span class="tlaGNC">           8 :             pos += charSize(ch);</span></span>
<span id="L2412"><span class="lineNum">    2412</span> <span class="tlaGNC">           8 :             while (pos &lt; end &amp;&amp; isIdentifierPart(ch = codePointUnchecked(pos), languageVersion)) pos += charSize(ch);</span></span>
<span id="L2413"><span class="lineNum">    2413</span> <span class="tlaGNC">           8 :             tokenValue = text.substring(tokenStart, pos);</span></span>
<span id="L2414"><span class="lineNum">    2414</span> <span class="tlaGNC">           8 :             if (ch === CharacterCodes.backslash) {</span></span>
<span id="L2415"><span class="lineNum">    2415</span> <span class="tlaGNC">           8 :                 tokenValue += scanIdentifierParts();</span></span>
<span id="L2416"><span class="lineNum">    2416</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L2417"><span class="lineNum">    2417</span> <span class="tlaGNC">           8 :             return getIdentifierToken();</span></span>
<span id="L2418"><span class="lineNum">    2418</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L2419"><span class="lineNum">    2419</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L2420"><span class="lineNum">    2420</span> <span class="tlaGNC">           8 : </span></span>
<span id="L2421"><span class="lineNum">    2421</span> <span class="tlaGNC">           8 :     function reScanGreaterToken(): SyntaxKind {</span></span>
<span id="L2422"><span class="lineNum">    2422</span> <span class="tlaGNC">           8 :         if (token === SyntaxKind.GreaterThanToken) {</span></span>
<span id="L2423"><span class="lineNum">    2423</span> <span class="tlaGNC">           8 :             if (charCodeUnchecked(pos) === CharacterCodes.greaterThan) {</span></span>
<span id="L2424"><span class="lineNum">    2424</span> <span class="tlaGNC">           8 :                 if (charCodeUnchecked(pos + 1) === CharacterCodes.greaterThan) {</span></span>
<span id="L2425"><span class="lineNum">    2425</span> <span class="tlaGNC">           8 :                     if (charCodeUnchecked(pos + 2) === CharacterCodes.equals) {</span></span>
<span id="L2426"><span class="lineNum">    2426</span> <span class="tlaGNC">           8 :                         return pos += 3, token = SyntaxKind.GreaterThanGreaterThanGreaterThanEqualsToken;</span></span>
<span id="L2427"><span class="lineNum">    2427</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L2428"><span class="lineNum">    2428</span> <span class="tlaGNC">           8 :                     return pos += 2, token = SyntaxKind.GreaterThanGreaterThanGreaterThanToken;</span></span>
<span id="L2429"><span class="lineNum">    2429</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L2430"><span class="lineNum">    2430</span> <span class="tlaGNC">           8 :                 if (charCodeUnchecked(pos + 1) === CharacterCodes.equals) {</span></span>
<span id="L2431"><span class="lineNum">    2431</span> <span class="tlaGNC">           8 :                     return pos += 2, token = SyntaxKind.GreaterThanGreaterThanEqualsToken;</span></span>
<span id="L2432"><span class="lineNum">    2432</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L2433"><span class="lineNum">    2433</span> <span class="tlaGNC">           8 :                 pos++;</span></span>
<span id="L2434"><span class="lineNum">    2434</span> <span class="tlaGNC">           8 :                 return token = SyntaxKind.GreaterThanGreaterThanToken;</span></span>
<span id="L2435"><span class="lineNum">    2435</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L2436"><span class="lineNum">    2436</span> <span class="tlaGNC">           8 :             if (charCodeUnchecked(pos) === CharacterCodes.equals) {</span></span>
<span id="L2437"><span class="lineNum">    2437</span> <span class="tlaGNC">           8 :                 pos++;</span></span>
<span id="L2438"><span class="lineNum">    2438</span> <span class="tlaGNC">           8 :                 return token = SyntaxKind.GreaterThanEqualsToken;</span></span>
<span id="L2439"><span class="lineNum">    2439</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L2440"><span class="lineNum">    2440</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L2441"><span class="lineNum">    2441</span> <span class="tlaGNC">           8 :         return token;</span></span>
<span id="L2442"><span class="lineNum">    2442</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L2443"><span class="lineNum">    2443</span> <span class="tlaGNC">           8 : </span></span>
<span id="L2444"><span class="lineNum">    2444</span> <span class="tlaGNC">           8 :     function reScanAsteriskEqualsToken(): SyntaxKind {</span></span>
<span id="L2445"><span class="lineNum">    2445</span> <span class="tlaGNC">           8 :         Debug.assert(token === SyntaxKind.AsteriskEqualsToken, &quot;'reScanAsteriskEqualsToken' should only be called on a '*='&quot;);</span></span>
<span id="L2446"><span class="lineNum">    2446</span> <span class="tlaGNC">           8 :         pos = tokenStart + 1;</span></span>
<span id="L2447"><span class="lineNum">    2447</span> <span class="tlaGNC">           8 :         return token = SyntaxKind.EqualsToken;</span></span>
<span id="L2448"><span class="lineNum">    2448</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L2449"><span class="lineNum">    2449</span> <span class="tlaGNC">           8 : </span></span>
<span id="L2450"><span class="lineNum">    2450</span> <span class="tlaGNC">           8 :     function reScanSlashToken(reportErrors?: boolean): SyntaxKind {</span></span>
<span id="L2451"><span class="lineNum">    2451</span> <span class="tlaGNC">           8 :         if (token === SyntaxKind.SlashToken || token === SyntaxKind.SlashEqualsToken) {</span></span>
<span id="L2452"><span class="lineNum">    2452</span> <span class="tlaGNC">           8 :             // Quickly get to the end of regex such that we know the flags</span></span>
<span id="L2453"><span class="lineNum">    2453</span> <span class="tlaGNC">           8 :             const startOfRegExpBody = tokenStart + 1;</span></span>
<span id="L2454"><span class="lineNum">    2454</span> <span class="tlaGNC">           8 :             pos = startOfRegExpBody;</span></span>
<span id="L2455"><span class="lineNum">    2455</span> <span class="tlaGNC">           8 :             let inEscape = false;</span></span>
<span id="L2456"><span class="lineNum">    2456</span> <span class="tlaGNC">           8 :             let namedCaptureGroups = false;</span></span>
<span id="L2457"><span class="lineNum">    2457</span> <span class="tlaGNC">           8 :             // Although nested character classes are allowed in Unicode Sets mode,</span></span>
<span id="L2458"><span class="lineNum">    2458</span> <span class="tlaGNC">           8 :             // an unescaped slash is nevertheless invalid even in a character class in any Unicode mode.</span></span>
<span id="L2459"><span class="lineNum">    2459</span> <span class="tlaGNC">           8 :             // This is indicated by Section 12.9.5 Regular Expression Literals of the specification,</span></span>
<span id="L2460"><span class="lineNum">    2460</span> <span class="tlaGNC">           8 :             // where nested character classes are not considered at all. (A `[` RegularExpressionClassChar</span></span>
<span id="L2461"><span class="lineNum">    2461</span> <span class="tlaGNC">           8 :             // does nothing in a RegularExpressionClass, and a `]` always closes the class.)</span></span>
<span id="L2462"><span class="lineNum">    2462</span> <span class="tlaGNC">           8 :             // Additionally, parsing nested character classes will misinterpret regexes like `/[[]/`</span></span>
<span id="L2463"><span class="lineNum">    2463</span> <span class="tlaGNC">           8 :             // as unterminated, consuming characters beyond the slash. (This even applies to `/[[]/v`,</span></span>
<span id="L2464"><span class="lineNum">    2464</span> <span class="tlaGNC">           8 :             // which should be parsed as a well-terminated regex with an incomplete character class.)</span></span>
<span id="L2465"><span class="lineNum">    2465</span> <span class="tlaGNC">           8 :             // Thus we must not handle nested character classes in the first pass.</span></span>
<span id="L2466"><span class="lineNum">    2466</span> <span class="tlaGNC">           8 :             let inCharacterClass = false;</span></span>
<span id="L2467"><span class="lineNum">    2467</span> <span class="tlaGNC">           8 :             while (true) {</span></span>
<span id="L2468"><span class="lineNum">    2468</span> <span class="tlaGNC">           8 :                 // If we reach the end of a file, or hit a newline, then this is an unterminated</span></span>
<span id="L2469"><span class="lineNum">    2469</span> <span class="tlaGNC">           8 :                 // regex.  Report error and return what we have so far.</span></span>
<span id="L2470"><span class="lineNum">    2470</span> <span class="tlaGNC">           8 :                 const ch = charCodeChecked(pos);</span></span>
<span id="L2471"><span class="lineNum">    2471</span> <span class="tlaGNC">           8 :                 if (ch === CharacterCodes.EOF || isLineBreak(ch)) {</span></span>
<span id="L2472"><span class="lineNum">    2472</span> <span class="tlaGNC">           8 :                     tokenFlags |= TokenFlags.Unterminated;</span></span>
<span id="L2473"><span class="lineNum">    2473</span> <span class="tlaGNC">           8 :                     break;</span></span>
<span id="L2474"><span class="lineNum">    2474</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L2475"><span class="lineNum">    2475</span> <span class="tlaGNC">           8 : </span></span>
<span id="L2476"><span class="lineNum">    2476</span> <span class="tlaGNC">           8 :                 if (inEscape) {</span></span>
<span id="L2477"><span class="lineNum">    2477</span> <span class="tlaGNC">           8 :                     // Parsing an escape character;</span></span>
<span id="L2478"><span class="lineNum">    2478</span> <span class="tlaGNC">           8 :                     // reset the flag and just advance to the next char.</span></span>
<span id="L2479"><span class="lineNum">    2479</span> <span class="tlaGNC">           8 :                     inEscape = false;</span></span>
<span id="L2480"><span class="lineNum">    2480</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L2481"><span class="lineNum">    2481</span> <span class="tlaGNC">           8 :                 else if (ch === CharacterCodes.slash &amp;&amp; !inCharacterClass) {</span></span>
<span id="L2482"><span class="lineNum">    2482</span> <span class="tlaGNC">           8 :                     // A slash within a character class is permissible,</span></span>
<span id="L2483"><span class="lineNum">    2483</span> <span class="tlaGNC">           8 :                     // but in general it signals the end of the regexp literal.</span></span>
<span id="L2484"><span class="lineNum">    2484</span> <span class="tlaGNC">           8 :                     break;</span></span>
<span id="L2485"><span class="lineNum">    2485</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L2486"><span class="lineNum">    2486</span> <span class="tlaGNC">           8 :                 else if (ch === CharacterCodes.openBracket) {</span></span>
<span id="L2487"><span class="lineNum">    2487</span> <span class="tlaGNC">           8 :                     inCharacterClass = true;</span></span>
<span id="L2488"><span class="lineNum">    2488</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L2489"><span class="lineNum">    2489</span> <span class="tlaGNC">           8 :                 else if (ch === CharacterCodes.backslash) {</span></span>
<span id="L2490"><span class="lineNum">    2490</span> <span class="tlaGNC">           8 :                     inEscape = true;</span></span>
<span id="L2491"><span class="lineNum">    2491</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L2492"><span class="lineNum">    2492</span> <span class="tlaGNC">           8 :                 else if (ch === CharacterCodes.closeBracket) {</span></span>
<span id="L2493"><span class="lineNum">    2493</span> <span class="tlaGNC">           8 :                     inCharacterClass = false;</span></span>
<span id="L2494"><span class="lineNum">    2494</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L2495"><span class="lineNum">    2495</span> <span class="tlaGNC">           8 :                 else if (</span></span>
<span id="L2496"><span class="lineNum">    2496</span> <span class="tlaGNC">           8 :                     !inCharacterClass</span></span>
<span id="L2497"><span class="lineNum">    2497</span> <span class="tlaGNC">           8 :                     &amp;&amp; ch === CharacterCodes.openParen</span></span>
<span id="L2498"><span class="lineNum">    2498</span> <span class="tlaGNC">           8 :                     &amp;&amp; charCodeChecked(pos + 1) === CharacterCodes.question</span></span>
<span id="L2499"><span class="lineNum">    2499</span> <span class="tlaGNC">           8 :                     &amp;&amp; charCodeChecked(pos + 2) === CharacterCodes.lessThan</span></span>
<span id="L2500"><span class="lineNum">    2500</span> <span class="tlaGNC">           8 :                     &amp;&amp; charCodeChecked(pos + 3) !== CharacterCodes.equals</span></span>
<span id="L2501"><span class="lineNum">    2501</span> <span class="tlaGNC">           8 :                     &amp;&amp; charCodeChecked(pos + 3) !== CharacterCodes.exclamation</span></span>
<span id="L2502"><span class="lineNum">    2502</span> <span class="tlaGNC">           8 :                 ) {</span></span>
<span id="L2503"><span class="lineNum">    2503</span> <span class="tlaGNC">           8 :                     namedCaptureGroups = true;</span></span>
<span id="L2504"><span class="lineNum">    2504</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L2505"><span class="lineNum">    2505</span> <span class="tlaGNC">           8 :                 pos++;</span></span>
<span id="L2506"><span class="lineNum">    2506</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L2507"><span class="lineNum">    2507</span> <span class="tlaGNC">           8 :             const endOfRegExpBody = pos;</span></span>
<span id="L2508"><span class="lineNum">    2508</span> <span class="tlaGNC">           8 :             if (tokenFlags &amp; TokenFlags.Unterminated) {</span></span>
<span id="L2509"><span class="lineNum">    2509</span> <span class="tlaGNC">           8 :                 // Search for the nearest unbalanced bracket for better recovery. Since the expression is</span></span>
<span id="L2510"><span class="lineNum">    2510</span> <span class="tlaGNC">           8 :                 // invalid anyways, we take nested square brackets into consideration for the best guess.</span></span>
<span id="L2511"><span class="lineNum">    2511</span> <span class="tlaGNC">           8 :                 pos = startOfRegExpBody;</span></span>
<span id="L2512"><span class="lineNum">    2512</span> <span class="tlaGNC">           8 :                 inEscape = false;</span></span>
<span id="L2513"><span class="lineNum">    2513</span> <span class="tlaGNC">           8 :                 let characterClassDepth = 0;</span></span>
<span id="L2514"><span class="lineNum">    2514</span> <span class="tlaGNC">           8 :                 let inDecimalQuantifier = false;</span></span>
<span id="L2515"><span class="lineNum">    2515</span> <span class="tlaGNC">           8 :                 let groupDepth = 0;</span></span>
<span id="L2516"><span class="lineNum">    2516</span> <span class="tlaGNC">           8 :                 while (pos &lt; endOfRegExpBody) {</span></span>
<span id="L2517"><span class="lineNum">    2517</span> <span class="tlaGNC">           8 :                     const ch = charCodeUnchecked(pos);</span></span>
<span id="L2518"><span class="lineNum">    2518</span> <span class="tlaGNC">           8 :                     if (inEscape) {</span></span>
<span id="L2519"><span class="lineNum">    2519</span> <span class="tlaGNC">           8 :                         inEscape = false;</span></span>
<span id="L2520"><span class="lineNum">    2520</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L2521"><span class="lineNum">    2521</span> <span class="tlaGNC">           8 :                     else if (ch === CharacterCodes.backslash) {</span></span>
<span id="L2522"><span class="lineNum">    2522</span> <span class="tlaGNC">           8 :                         inEscape = true;</span></span>
<span id="L2523"><span class="lineNum">    2523</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L2524"><span class="lineNum">    2524</span> <span class="tlaGNC">           8 :                     else if (ch === CharacterCodes.openBracket) {</span></span>
<span id="L2525"><span class="lineNum">    2525</span> <span class="tlaGNC">           8 :                         characterClassDepth++;</span></span>
<span id="L2526"><span class="lineNum">    2526</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L2527"><span class="lineNum">    2527</span> <span class="tlaGNC">           8 :                     else if (ch === CharacterCodes.closeBracket &amp;&amp; characterClassDepth) {</span></span>
<span id="L2528"><span class="lineNum">    2528</span> <span class="tlaGNC">           8 :                         characterClassDepth--;</span></span>
<span id="L2529"><span class="lineNum">    2529</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L2530"><span class="lineNum">    2530</span> <span class="tlaGNC">           8 :                     else if (!characterClassDepth) {</span></span>
<span id="L2531"><span class="lineNum">    2531</span> <span class="tlaGNC">           8 :                         if (ch === CharacterCodes.openBrace) {</span></span>
<span id="L2532"><span class="lineNum">    2532</span> <span class="tlaGNC">           8 :                             inDecimalQuantifier = true;</span></span>
<span id="L2533"><span class="lineNum">    2533</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L2534"><span class="lineNum">    2534</span> <span class="tlaGNC">           8 :                         else if (ch === CharacterCodes.closeBrace &amp;&amp; inDecimalQuantifier) {</span></span>
<span id="L2535"><span class="lineNum">    2535</span> <span class="tlaGNC">           8 :                             inDecimalQuantifier = false;</span></span>
<span id="L2536"><span class="lineNum">    2536</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L2537"><span class="lineNum">    2537</span> <span class="tlaGNC">           8 :                         else if (!inDecimalQuantifier) {</span></span>
<span id="L2538"><span class="lineNum">    2538</span> <span class="tlaGNC">           8 :                             if (ch === CharacterCodes.openParen) {</span></span>
<span id="L2539"><span class="lineNum">    2539</span> <span class="tlaGNC">           8 :                                 groupDepth++;</span></span>
<span id="L2540"><span class="lineNum">    2540</span> <span class="tlaGNC">           8 :                             }</span></span>
<span id="L2541"><span class="lineNum">    2541</span> <span class="tlaGNC">           8 :                             else if (ch === CharacterCodes.closeParen &amp;&amp; groupDepth) {</span></span>
<span id="L2542"><span class="lineNum">    2542</span> <span class="tlaGNC">           8 :                                 groupDepth--;</span></span>
<span id="L2543"><span class="lineNum">    2543</span> <span class="tlaGNC">           8 :                             }</span></span>
<span id="L2544"><span class="lineNum">    2544</span> <span class="tlaGNC">           8 :                             else if (ch === CharacterCodes.closeParen || ch === CharacterCodes.closeBracket || ch === CharacterCodes.closeBrace) {</span></span>
<span id="L2545"><span class="lineNum">    2545</span> <span class="tlaGNC">           8 :                                 // We encountered an unbalanced bracket outside a character class. Treat this position as the end of regex.</span></span>
<span id="L2546"><span class="lineNum">    2546</span> <span class="tlaGNC">           8 :                                 break;</span></span>
<span id="L2547"><span class="lineNum">    2547</span> <span class="tlaGNC">           8 :                             }</span></span>
<span id="L2548"><span class="lineNum">    2548</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L2549"><span class="lineNum">    2549</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L2550"><span class="lineNum">    2550</span> <span class="tlaGNC">           8 :                     pos++;</span></span>
<span id="L2551"><span class="lineNum">    2551</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L2552"><span class="lineNum">    2552</span> <span class="tlaGNC">           8 :                 // Whitespaces and semicolons at the end are not likely to be part of the regex</span></span>
<span id="L2553"><span class="lineNum">    2553</span> <span class="tlaGNC">           8 :                 while (isWhiteSpaceLike(charCodeChecked(pos - 1)) || charCodeChecked(pos - 1) === CharacterCodes.semicolon) pos--;</span></span>
<span id="L2554"><span class="lineNum">    2554</span> <span class="tlaGNC">           8 :                 error(Diagnostics.Unterminated_regular_expression_literal, tokenStart, pos - tokenStart);</span></span>
<span id="L2555"><span class="lineNum">    2555</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L2556"><span class="lineNum">    2556</span> <span class="tlaGNC">           8 :             else {</span></span>
<span id="L2557"><span class="lineNum">    2557</span> <span class="tlaGNC">           8 :                 // Consume the slash character</span></span>
<span id="L2558"><span class="lineNum">    2558</span> <span class="tlaGNC">           8 :                 pos++;</span></span>
<span id="L2559"><span class="lineNum">    2559</span> <span class="tlaGNC">           8 :                 let regExpFlags = RegularExpressionFlags.None;</span></span>
<span id="L2560"><span class="lineNum">    2560</span> <span class="tlaGNC">           8 :                 while (true) {</span></span>
<span id="L2561"><span class="lineNum">    2561</span> <span class="tlaGNC">           8 :                     const ch = codePointChecked(pos);</span></span>
<span id="L2562"><span class="lineNum">    2562</span> <span class="tlaGNC">           8 :                     if (ch === CharacterCodes.EOF || !isIdentifierPart(ch, languageVersion)) {</span></span>
<span id="L2563"><span class="lineNum">    2563</span> <span class="tlaGNC">           8 :                         break;</span></span>
<span id="L2564"><span class="lineNum">    2564</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L2565"><span class="lineNum">    2565</span> <span class="tlaGNC">           8 :                     const size = charSize(ch);</span></span>
<span id="L2566"><span class="lineNum">    2566</span> <span class="tlaGNC">           8 :                     if (reportErrors) {</span></span>
<span id="L2567"><span class="lineNum">    2567</span> <span class="tlaGNC">           8 :                         const flag = characterCodeToRegularExpressionFlag(ch);</span></span>
<span id="L2568"><span class="lineNum">    2568</span> <span class="tlaGNC">           8 :                         if (flag === undefined) {</span></span>
<span id="L2569"><span class="lineNum">    2569</span> <span class="tlaGNC">           8 :                             error(Diagnostics.Unknown_regular_expression_flag, pos, size);</span></span>
<span id="L2570"><span class="lineNum">    2570</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L2571"><span class="lineNum">    2571</span> <span class="tlaGNC">           8 :                         else if (regExpFlags &amp; flag) {</span></span>
<span id="L2572"><span class="lineNum">    2572</span> <span class="tlaGNC">           8 :                             error(Diagnostics.Duplicate_regular_expression_flag, pos, size);</span></span>
<span id="L2573"><span class="lineNum">    2573</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L2574"><span class="lineNum">    2574</span> <span class="tlaGNC">           8 :                         else if (((regExpFlags | flag) &amp; RegularExpressionFlags.AnyUnicodeMode) === RegularExpressionFlags.AnyUnicodeMode) {</span></span>
<span id="L2575"><span class="lineNum">    2575</span> <span class="tlaGNC">           8 :                             error(Diagnostics.The_Unicode_u_flag_and_the_Unicode_Sets_v_flag_cannot_be_set_simultaneously, pos, size);</span></span>
<span id="L2576"><span class="lineNum">    2576</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L2577"><span class="lineNum">    2577</span> <span class="tlaGNC">           8 :                         else {</span></span>
<span id="L2578"><span class="lineNum">    2578</span> <span class="tlaGNC">           8 :                             regExpFlags |= flag;</span></span>
<span id="L2579"><span class="lineNum">    2579</span> <span class="tlaGNC">           8 :                             checkRegularExpressionFlagAvailability(flag, size);</span></span>
<span id="L2580"><span class="lineNum">    2580</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L2581"><span class="lineNum">    2581</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L2582"><span class="lineNum">    2582</span> <span class="tlaGNC">           8 :                     pos += size;</span></span>
<span id="L2583"><span class="lineNum">    2583</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L2584"><span class="lineNum">    2584</span> <span class="tlaGNC">           8 :                 if (reportErrors) {</span></span>
<span id="L2585"><span class="lineNum">    2585</span> <span class="tlaGNC">           8 :                     scanRange(startOfRegExpBody, endOfRegExpBody - startOfRegExpBody, () =&gt; {</span></span>
<span id="L2586"><span class="lineNum">    2586</span> <span class="tlaGNC">           8 :                         scanRegularExpressionWorker(regExpFlags, /*annexB*/ true, namedCaptureGroups);</span></span>
<span id="L2587"><span class="lineNum">    2587</span> <span class="tlaGNC">           8 :                     });</span></span>
<span id="L2588"><span class="lineNum">    2588</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L2589"><span class="lineNum">    2589</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L2590"><span class="lineNum">    2590</span> <span class="tlaGNC">           8 :             tokenValue = text.substring(tokenStart, pos);</span></span>
<span id="L2591"><span class="lineNum">    2591</span> <span class="tlaGNC">           8 :             token = SyntaxKind.RegularExpressionLiteral;</span></span>
<span id="L2592"><span class="lineNum">    2592</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L2593"><span class="lineNum">    2593</span> <span class="tlaGNC">           8 :         return token;</span></span>
<span id="L2594"><span class="lineNum">    2594</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L2595"><span class="lineNum">    2595</span> <span class="tlaGNC">           8 : </span></span>
<span id="L2596"><span class="lineNum">    2596</span> <span class="tlaGNC">           8 :     function scanRegularExpressionWorker(regExpFlags: RegularExpressionFlags, annexB: boolean, namedCaptureGroups: boolean) {</span></span>
<span id="L2597"><span class="lineNum">    2597</span> <span class="tlaGNC">           8 :         // Why var? It avoids TDZ checks in the runtime which can be costly.</span></span>
<span id="L2598"><span class="lineNum">    2598</span> <span class="tlaGNC">           8 :         // See: https://github.com/microsoft/TypeScript/issues/52924</span></span>
<span id="L2599"><span class="lineNum">    2599</span> <span class="tlaGNC">           8 :         /* eslint-disable no-var */</span></span>
<span id="L2600"><span class="lineNum">    2600</span> <span class="tlaGNC">           8 : </span></span>
<span id="L2601"><span class="lineNum">    2601</span> <span class="tlaGNC">           8 :         /** Grammar parameter */</span></span>
<span id="L2602"><span class="lineNum">    2602</span> <span class="tlaGNC">           8 :         var unicodeSetsMode = !!(regExpFlags &amp; RegularExpressionFlags.UnicodeSets);</span></span>
<span id="L2603"><span class="lineNum">    2603</span> <span class="tlaGNC">           8 :         /** Grammar parameter */</span></span>
<span id="L2604"><span class="lineNum">    2604</span> <span class="tlaGNC">           8 :         var anyUnicodeMode = !!(regExpFlags &amp; RegularExpressionFlags.AnyUnicodeMode);</span></span>
<span id="L2605"><span class="lineNum">    2605</span> <span class="tlaGNC">           8 : </span></span>
<span id="L2606"><span class="lineNum">    2606</span> <span class="tlaGNC">           8 :         // Regular expressions are checked more strictly when either in 'u' or 'v' mode, or</span></span>
<span id="L2607"><span class="lineNum">    2607</span> <span class="tlaGNC">           8 :         // when not using the looser interpretation of the syntax from ECMA-262 Annex B.</span></span>
<span id="L2608"><span class="lineNum">    2608</span> <span class="tlaGNC">           8 :         var anyUnicodeModeOrNonAnnexB = anyUnicodeMode || !annexB;</span></span>
<span id="L2609"><span class="lineNum">    2609</span> <span class="tlaGNC">           8 : </span></span>
<span id="L2610"><span class="lineNum">    2610</span> <span class="tlaGNC">           8 :         /** @see {scanClassSetExpression} */</span></span>
<span id="L2611"><span class="lineNum">    2611</span> <span class="tlaGNC">           8 :         var mayContainStrings = false;</span></span>
<span id="L2612"><span class="lineNum">    2612</span> <span class="tlaGNC">           8 : </span></span>
<span id="L2613"><span class="lineNum">    2613</span> <span class="tlaGNC">           8 :         /** The number of all (named and unnamed) capturing groups defined in the regex. */</span></span>
<span id="L2614"><span class="lineNum">    2614</span> <span class="tlaGNC">           8 :         var numberOfCapturingGroups = 0;</span></span>
<span id="L2615"><span class="lineNum">    2615</span> <span class="tlaGNC">           8 :         /** All named capturing groups defined in the regex. */</span></span>
<span id="L2616"><span class="lineNum">    2616</span> <span class="tlaGNC">           8 :         var groupSpecifiers: Set&lt;string&gt; | undefined;</span></span>
<span id="L2617"><span class="lineNum">    2617</span> <span class="tlaGNC">           8 :         /** All references to named capturing groups in the regex. */</span></span>
<span id="L2618"><span class="lineNum">    2618</span> <span class="tlaGNC">           8 :         var groupNameReferences: (TextRange &amp; { name: string; })[] | undefined;</span></span>
<span id="L2619"><span class="lineNum">    2619</span> <span class="tlaGNC">           8 :         /** All numeric backreferences within the regex. */</span></span>
<span id="L2620"><span class="lineNum">    2620</span> <span class="tlaGNC">           8 :         var decimalEscapes: (TextRange &amp; { value: number; })[] | undefined;</span></span>
<span id="L2621"><span class="lineNum">    2621</span> <span class="tlaGNC">           8 :         /** A stack of scopes for named capturing groups. @see {scanGroupName} */</span></span>
<span id="L2622"><span class="lineNum">    2622</span> <span class="tlaGNC">           8 :         var namedCapturingGroupsScopeStack: (Set&lt;string&gt; | undefined)[] = [];</span></span>
<span id="L2623"><span class="lineNum">    2623</span> <span class="tlaGNC">           8 :         var topNamedCapturingGroupsScope: Set&lt;string&gt; | undefined;</span></span>
<span id="L2624"><span class="lineNum">    2624</span> <span class="tlaGNC">           8 :         /* eslint-enable no-var */</span></span>
<span id="L2625"><span class="lineNum">    2625</span> <span class="tlaGNC">           8 :         // Disjunction ::= Alternative ('|' Alternative)*</span></span>
<span id="L2626"><span class="lineNum">    2626</span> <span class="tlaGNC">           8 :         function scanDisjunction(isInGroup: boolean) {</span></span>
<span id="L2627"><span class="lineNum">    2627</span> <span class="tlaGNC">           8 :             while (true) {</span></span>
<span id="L2628"><span class="lineNum">    2628</span> <span class="tlaGNC">           8 :                 namedCapturingGroupsScopeStack.push(topNamedCapturingGroupsScope);</span></span>
<span id="L2629"><span class="lineNum">    2629</span> <span class="tlaGNC">           8 :                 topNamedCapturingGroupsScope = undefined;</span></span>
<span id="L2630"><span class="lineNum">    2630</span> <span class="tlaGNC">           8 :                 scanAlternative(isInGroup);</span></span>
<span id="L2631"><span class="lineNum">    2631</span> <span class="tlaGNC">           8 :                 topNamedCapturingGroupsScope = namedCapturingGroupsScopeStack.pop();</span></span>
<span id="L2632"><span class="lineNum">    2632</span> <span class="tlaGNC">           8 :                 if (charCodeChecked(pos) !== CharacterCodes.bar) {</span></span>
<span id="L2633"><span class="lineNum">    2633</span> <span class="tlaGNC">           8 :                     return;</span></span>
<span id="L2634"><span class="lineNum">    2634</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L2635"><span class="lineNum">    2635</span> <span class="tlaGNC">           8 :                 pos++;</span></span>
<span id="L2636"><span class="lineNum">    2636</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L2637"><span class="lineNum">    2637</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L2638"><span class="lineNum">    2638</span> <span class="tlaGNC">           8 : </span></span>
<span id="L2639"><span class="lineNum">    2639</span> <span class="tlaGNC">           8 :         // Alternative ::= Term*</span></span>
<span id="L2640"><span class="lineNum">    2640</span> <span class="tlaGNC">           8 :         // Term ::=</span></span>
<span id="L2641"><span class="lineNum">    2641</span> <span class="tlaGNC">           8 :         //     | Assertion</span></span>
<span id="L2642"><span class="lineNum">    2642</span> <span class="tlaGNC">           8 :         //     | Atom Quantifier?</span></span>
<span id="L2643"><span class="lineNum">    2643</span> <span class="tlaGNC">           8 :         // Assertion ::=</span></span>
<span id="L2644"><span class="lineNum">    2644</span> <span class="tlaGNC">           8 :         //     | '^'</span></span>
<span id="L2645"><span class="lineNum">    2645</span> <span class="tlaGNC">           8 :         //     | '$'</span></span>
<span id="L2646"><span class="lineNum">    2646</span> <span class="tlaGNC">           8 :         //     | '\b'</span></span>
<span id="L2647"><span class="lineNum">    2647</span> <span class="tlaGNC">           8 :         //     | '\B'</span></span>
<span id="L2648"><span class="lineNum">    2648</span> <span class="tlaGNC">           8 :         //     | '(?=' Disjunction ')'</span></span>
<span id="L2649"><span class="lineNum">    2649</span> <span class="tlaGNC">           8 :         //     | '(?!' Disjunction ')'</span></span>
<span id="L2650"><span class="lineNum">    2650</span> <span class="tlaGNC">           8 :         //     | '(?&lt;=' Disjunction ')'</span></span>
<span id="L2651"><span class="lineNum">    2651</span> <span class="tlaGNC">           8 :         //     | '(?&lt;!' Disjunction ')'</span></span>
<span id="L2652"><span class="lineNum">    2652</span> <span class="tlaGNC">           8 :         // Quantifier ::= QuantifierPrefix '?'?</span></span>
<span id="L2653"><span class="lineNum">    2653</span> <span class="tlaGNC">           8 :         // QuantifierPrefix ::=</span></span>
<span id="L2654"><span class="lineNum">    2654</span> <span class="tlaGNC">           8 :         //     | '*'</span></span>
<span id="L2655"><span class="lineNum">    2655</span> <span class="tlaGNC">           8 :         //     | '+'</span></span>
<span id="L2656"><span class="lineNum">    2656</span> <span class="tlaGNC">           8 :         //     | '?'</span></span>
<span id="L2657"><span class="lineNum">    2657</span> <span class="tlaGNC">           8 :         //     | '{' DecimalDigits (',' DecimalDigits?)? '}'</span></span>
<span id="L2658"><span class="lineNum">    2658</span> <span class="tlaGNC">           8 :         // Atom ::=</span></span>
<span id="L2659"><span class="lineNum">    2659</span> <span class="tlaGNC">           8 :         //     | PatternCharacter</span></span>
<span id="L2660"><span class="lineNum">    2660</span> <span class="tlaGNC">           8 :         //     | '.'</span></span>
<span id="L2661"><span class="lineNum">    2661</span> <span class="tlaGNC">           8 :         //     | '\' AtomEscape</span></span>
<span id="L2662"><span class="lineNum">    2662</span> <span class="tlaGNC">           8 :         //     | CharacterClass</span></span>
<span id="L2663"><span class="lineNum">    2663</span> <span class="tlaGNC">           8 :         //     | '(?&lt;' RegExpIdentifierName '&gt;' Disjunction ')'</span></span>
<span id="L2664"><span class="lineNum">    2664</span> <span class="tlaGNC">           8 :         //     | '(?' RegularExpressionFlags ('-' RegularExpressionFlags)? ':' Disjunction ')'</span></span>
<span id="L2665"><span class="lineNum">    2665</span> <span class="tlaGNC">           8 :         // CharacterClass ::= unicodeMode</span></span>
<span id="L2666"><span class="lineNum">    2666</span> <span class="tlaGNC">           8 :         //     ? '[' ClassRanges ']'</span></span>
<span id="L2667"><span class="lineNum">    2667</span> <span class="tlaGNC">           8 :         //     : '[' ClassSetExpression ']'</span></span>
<span id="L2668"><span class="lineNum">    2668</span> <span class="tlaGNC">           8 :         function scanAlternative(isInGroup: boolean) {</span></span>
<span id="L2669"><span class="lineNum">    2669</span> <span class="tlaGNC">           8 :             let isPreviousTermQuantifiable = false;</span></span>
<span id="L2670"><span class="lineNum">    2670</span> <span class="tlaGNC">           8 :             while (true) {</span></span>
<span id="L2671"><span class="lineNum">    2671</span> <span class="tlaGNC">           8 :                 const start = pos;</span></span>
<span id="L2672"><span class="lineNum">    2672</span> <span class="tlaGNC">           8 :                 const ch = charCodeChecked(pos);</span></span>
<span id="L2673"><span class="lineNum">    2673</span> <span class="tlaGNC">           8 :                 switch (ch) {</span></span>
<span id="L2674"><span class="lineNum">    2674</span> <span class="tlaGNC">           8 :                     case CharacterCodes.EOF:</span></span>
<span id="L2675"><span class="lineNum">    2675</span> <span class="tlaGNC">           8 :                         return;</span></span>
<span id="L2676"><span class="lineNum">    2676</span> <span class="tlaGNC">           8 :                     case CharacterCodes.caret:</span></span>
<span id="L2677"><span class="lineNum">    2677</span> <span class="tlaGNC">           8 :                     case CharacterCodes.$:</span></span>
<span id="L2678"><span class="lineNum">    2678</span> <span class="tlaGNC">           8 :                         pos++;</span></span>
<span id="L2679"><span class="lineNum">    2679</span> <span class="tlaGNC">           8 :                         isPreviousTermQuantifiable = false;</span></span>
<span id="L2680"><span class="lineNum">    2680</span> <span class="tlaGNC">           8 :                         break;</span></span>
<span id="L2681"><span class="lineNum">    2681</span> <span class="tlaGNC">           8 :                     case CharacterCodes.backslash:</span></span>
<span id="L2682"><span class="lineNum">    2682</span> <span class="tlaGNC">           8 :                         pos++;</span></span>
<span id="L2683"><span class="lineNum">    2683</span> <span class="tlaGNC">           8 :                         switch (charCodeChecked(pos)) {</span></span>
<span id="L2684"><span class="lineNum">    2684</span> <span class="tlaGNC">           8 :                             case CharacterCodes.b:</span></span>
<span id="L2685"><span class="lineNum">    2685</span> <span class="tlaGNC">           8 :                             case CharacterCodes.B:</span></span>
<span id="L2686"><span class="lineNum">    2686</span> <span class="tlaGNC">           8 :                                 pos++;</span></span>
<span id="L2687"><span class="lineNum">    2687</span> <span class="tlaGNC">           8 :                                 isPreviousTermQuantifiable = false;</span></span>
<span id="L2688"><span class="lineNum">    2688</span> <span class="tlaGNC">           8 :                                 break;</span></span>
<span id="L2689"><span class="lineNum">    2689</span> <span class="tlaGNC">           8 :                             default:</span></span>
<span id="L2690"><span class="lineNum">    2690</span> <span class="tlaGNC">           8 :                                 scanAtomEscape();</span></span>
<span id="L2691"><span class="lineNum">    2691</span> <span class="tlaGNC">           8 :                                 isPreviousTermQuantifiable = true;</span></span>
<span id="L2692"><span class="lineNum">    2692</span> <span class="tlaGNC">           8 :                                 break;</span></span>
<span id="L2693"><span class="lineNum">    2693</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L2694"><span class="lineNum">    2694</span> <span class="tlaGNC">           8 :                         break;</span></span>
<span id="L2695"><span class="lineNum">    2695</span> <span class="tlaGNC">           8 :                     case CharacterCodes.openParen:</span></span>
<span id="L2696"><span class="lineNum">    2696</span> <span class="tlaGNC">           8 :                         pos++;</span></span>
<span id="L2697"><span class="lineNum">    2697</span> <span class="tlaGNC">           8 :                         if (charCodeChecked(pos) === CharacterCodes.question) {</span></span>
<span id="L2698"><span class="lineNum">    2698</span> <span class="tlaGNC">           8 :                             pos++;</span></span>
<span id="L2699"><span class="lineNum">    2699</span> <span class="tlaGNC">           8 :                             switch (charCodeChecked(pos)) {</span></span>
<span id="L2700"><span class="lineNum">    2700</span> <span class="tlaGNC">           8 :                                 case CharacterCodes.equals:</span></span>
<span id="L2701"><span class="lineNum">    2701</span> <span class="tlaGNC">           8 :                                 case CharacterCodes.exclamation:</span></span>
<span id="L2702"><span class="lineNum">    2702</span> <span class="tlaGNC">           8 :                                     pos++;</span></span>
<span id="L2703"><span class="lineNum">    2703</span> <span class="tlaGNC">           8 :                                     // In Annex B, `(?=Disjunction)` and `(?!Disjunction)` are quantifiable</span></span>
<span id="L2704"><span class="lineNum">    2704</span> <span class="tlaGNC">           8 :                                     isPreviousTermQuantifiable = !anyUnicodeModeOrNonAnnexB;</span></span>
<span id="L2705"><span class="lineNum">    2705</span> <span class="tlaGNC">           8 :                                     break;</span></span>
<span id="L2706"><span class="lineNum">    2706</span> <span class="tlaGNC">           8 :                                 case CharacterCodes.lessThan:</span></span>
<span id="L2707"><span class="lineNum">    2707</span> <span class="tlaGNC">           8 :                                     const groupNameStart = pos;</span></span>
<span id="L2708"><span class="lineNum">    2708</span> <span class="tlaGNC">           8 :                                     pos++;</span></span>
<span id="L2709"><span class="lineNum">    2709</span> <span class="tlaGNC">           8 :                                     switch (charCodeChecked(pos)) {</span></span>
<span id="L2710"><span class="lineNum">    2710</span> <span class="tlaGNC">           8 :                                         case CharacterCodes.equals:</span></span>
<span id="L2711"><span class="lineNum">    2711</span> <span class="tlaGNC">           8 :                                         case CharacterCodes.exclamation:</span></span>
<span id="L2712"><span class="lineNum">    2712</span> <span class="tlaGNC">           8 :                                             pos++;</span></span>
<span id="L2713"><span class="lineNum">    2713</span> <span class="tlaGNC">           8 :                                             isPreviousTermQuantifiable = false;</span></span>
<span id="L2714"><span class="lineNum">    2714</span> <span class="tlaGNC">           8 :                                             break;</span></span>
<span id="L2715"><span class="lineNum">    2715</span> <span class="tlaGNC">           8 :                                         default:</span></span>
<span id="L2716"><span class="lineNum">    2716</span> <span class="tlaGNC">           8 :                                             scanGroupName(/*isReference*/ false);</span></span>
<span id="L2717"><span class="lineNum">    2717</span> <span class="tlaGNC">           8 :                                             scanExpectedChar(CharacterCodes.greaterThan);</span></span>
<span id="L2718"><span class="lineNum">    2718</span> <span class="tlaGNC">           8 :                                             if (languageVersion &lt; ScriptTarget.ES2018) {</span></span>
<span id="L2719"><span class="lineNum">    2719</span> <span class="tlaGNC">           8 :                                                 error(Diagnostics.Named_capturing_groups_are_only_available_when_targeting_ES2018_or_later, groupNameStart, pos - groupNameStart);</span></span>
<span id="L2720"><span class="lineNum">    2720</span> <span class="tlaGNC">           8 :                                             }</span></span>
<span id="L2721"><span class="lineNum">    2721</span> <span class="tlaGNC">           8 :                                             numberOfCapturingGroups++;</span></span>
<span id="L2722"><span class="lineNum">    2722</span> <span class="tlaGNC">           8 :                                             isPreviousTermQuantifiable = true;</span></span>
<span id="L2723"><span class="lineNum">    2723</span> <span class="tlaGNC">           8 :                                             break;</span></span>
<span id="L2724"><span class="lineNum">    2724</span> <span class="tlaGNC">           8 :                                     }</span></span>
<span id="L2725"><span class="lineNum">    2725</span> <span class="tlaGNC">           8 :                                     break;</span></span>
<span id="L2726"><span class="lineNum">    2726</span> <span class="tlaGNC">           8 :                                 default:</span></span>
<span id="L2727"><span class="lineNum">    2727</span> <span class="tlaGNC">           8 :                                     const start = pos;</span></span>
<span id="L2728"><span class="lineNum">    2728</span> <span class="tlaGNC">           8 :                                     const setFlags = scanPatternModifiers(RegularExpressionFlags.None);</span></span>
<span id="L2729"><span class="lineNum">    2729</span> <span class="tlaGNC">           8 :                                     if (charCodeChecked(pos) === CharacterCodes.minus) {</span></span>
<span id="L2730"><span class="lineNum">    2730</span> <span class="tlaGNC">           8 :                                         pos++;</span></span>
<span id="L2731"><span class="lineNum">    2731</span> <span class="tlaGNC">           8 :                                         scanPatternModifiers(setFlags);</span></span>
<span id="L2732"><span class="lineNum">    2732</span> <span class="tlaGNC">           8 :                                         if (pos === start + 1) {</span></span>
<span id="L2733"><span class="lineNum">    2733</span> <span class="tlaGNC">           8 :                                             error(Diagnostics.Subpattern_flags_must_be_present_when_there_is_a_minus_sign, start, pos - start);</span></span>
<span id="L2734"><span class="lineNum">    2734</span> <span class="tlaGNC">           8 :                                         }</span></span>
<span id="L2735"><span class="lineNum">    2735</span> <span class="tlaGNC">           8 :                                     }</span></span>
<span id="L2736"><span class="lineNum">    2736</span> <span class="tlaGNC">           8 :                                     scanExpectedChar(CharacterCodes.colon);</span></span>
<span id="L2737"><span class="lineNum">    2737</span> <span class="tlaGNC">           8 :                                     isPreviousTermQuantifiable = true;</span></span>
<span id="L2738"><span class="lineNum">    2738</span> <span class="tlaGNC">           8 :                                     break;</span></span>
<span id="L2739"><span class="lineNum">    2739</span> <span class="tlaGNC">           8 :                             }</span></span>
<span id="L2740"><span class="lineNum">    2740</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L2741"><span class="lineNum">    2741</span> <span class="tlaGNC">           8 :                         else {</span></span>
<span id="L2742"><span class="lineNum">    2742</span> <span class="tlaGNC">           8 :                             numberOfCapturingGroups++;</span></span>
<span id="L2743"><span class="lineNum">    2743</span> <span class="tlaGNC">           8 :                             isPreviousTermQuantifiable = true;</span></span>
<span id="L2744"><span class="lineNum">    2744</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L2745"><span class="lineNum">    2745</span> <span class="tlaGNC">           8 :                         scanDisjunction(/*isInGroup*/ true);</span></span>
<span id="L2746"><span class="lineNum">    2746</span> <span class="tlaGNC">           8 :                         scanExpectedChar(CharacterCodes.closeParen);</span></span>
<span id="L2747"><span class="lineNum">    2747</span> <span class="tlaGNC">           8 :                         break;</span></span>
<span id="L2748"><span class="lineNum">    2748</span> <span class="tlaGNC">           8 :                     case CharacterCodes.openBrace:</span></span>
<span id="L2749"><span class="lineNum">    2749</span> <span class="tlaGNC">           8 :                         pos++;</span></span>
<span id="L2750"><span class="lineNum">    2750</span> <span class="tlaGNC">           8 :                         const digitsStart = pos;</span></span>
<span id="L2751"><span class="lineNum">    2751</span> <span class="tlaGNC">           8 :                         scanDigits();</span></span>
<span id="L2752"><span class="lineNum">    2752</span> <span class="tlaGNC">           8 :                         const min = tokenValue;</span></span>
<span id="L2753"><span class="lineNum">    2753</span> <span class="tlaGNC">           8 :                         if (!anyUnicodeModeOrNonAnnexB &amp;&amp; !min) {</span></span>
<span id="L2754"><span class="lineNum">    2754</span> <span class="tlaGNC">           8 :                             isPreviousTermQuantifiable = true;</span></span>
<span id="L2755"><span class="lineNum">    2755</span> <span class="tlaGNC">           8 :                             break;</span></span>
<span id="L2756"><span class="lineNum">    2756</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L2757"><span class="lineNum">    2757</span> <span class="tlaGNC">           8 :                         if (charCodeChecked(pos) === CharacterCodes.comma) {</span></span>
<span id="L2758"><span class="lineNum">    2758</span> <span class="tlaGNC">           8 :                             pos++;</span></span>
<span id="L2759"><span class="lineNum">    2759</span> <span class="tlaGNC">           8 :                             scanDigits();</span></span>
<span id="L2760"><span class="lineNum">    2760</span> <span class="tlaGNC">           8 :                             const max = tokenValue;</span></span>
<span id="L2761"><span class="lineNum">    2761</span> <span class="tlaGNC">           8 :                             if (!min) {</span></span>
<span id="L2762"><span class="lineNum">    2762</span> <span class="tlaGNC">           8 :                                 if (max || charCodeChecked(pos) === CharacterCodes.closeBrace) {</span></span>
<span id="L2763"><span class="lineNum">    2763</span> <span class="tlaGNC">           8 :                                     error(Diagnostics.Incomplete_quantifier_Digit_expected, digitsStart, 0);</span></span>
<span id="L2764"><span class="lineNum">    2764</span> <span class="tlaGNC">           8 :                                 }</span></span>
<span id="L2765"><span class="lineNum">    2765</span> <span class="tlaGNC">           8 :                                 else {</span></span>
<span id="L2766"><span class="lineNum">    2766</span> <span class="tlaGNC">           8 :                                     error(Diagnostics.Unexpected_0_Did_you_mean_to_escape_it_with_backslash, start, 1, String.fromCharCode(ch));</span></span>
<span id="L2767"><span class="lineNum">    2767</span> <span class="tlaGNC">           8 :                                     isPreviousTermQuantifiable = true;</span></span>
<span id="L2768"><span class="lineNum">    2768</span> <span class="tlaGNC">           8 :                                     break;</span></span>
<span id="L2769"><span class="lineNum">    2769</span> <span class="tlaGNC">           8 :                                 }</span></span>
<span id="L2770"><span class="lineNum">    2770</span> <span class="tlaGNC">           8 :                             }</span></span>
<span id="L2771"><span class="lineNum">    2771</span> <span class="tlaGNC">           8 :                             else if (max &amp;&amp; Number.parseInt(min) &gt; Number.parseInt(max) &amp;&amp; (anyUnicodeModeOrNonAnnexB || charCodeChecked(pos) === CharacterCodes.closeBrace)) {</span></span>
<span id="L2772"><span class="lineNum">    2772</span> <span class="tlaGNC">           8 :                                 error(Diagnostics.Numbers_out_of_order_in_quantifier, digitsStart, pos - digitsStart);</span></span>
<span id="L2773"><span class="lineNum">    2773</span> <span class="tlaGNC">           8 :                             }</span></span>
<span id="L2774"><span class="lineNum">    2774</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L2775"><span class="lineNum">    2775</span> <span class="tlaGNC">           8 :                         else if (!min) {</span></span>
<span id="L2776"><span class="lineNum">    2776</span> <span class="tlaGNC">           8 :                             if (anyUnicodeModeOrNonAnnexB) {</span></span>
<span id="L2777"><span class="lineNum">    2777</span> <span class="tlaGNC">           8 :                                 error(Diagnostics.Unexpected_0_Did_you_mean_to_escape_it_with_backslash, start, 1, String.fromCharCode(ch));</span></span>
<span id="L2778"><span class="lineNum">    2778</span> <span class="tlaGNC">           8 :                             }</span></span>
<span id="L2779"><span class="lineNum">    2779</span> <span class="tlaGNC">           8 :                             isPreviousTermQuantifiable = true;</span></span>
<span id="L2780"><span class="lineNum">    2780</span> <span class="tlaGNC">           8 :                             break;</span></span>
<span id="L2781"><span class="lineNum">    2781</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L2782"><span class="lineNum">    2782</span> <span class="tlaGNC">           8 :                         if (charCodeChecked(pos) !== CharacterCodes.closeBrace) {</span></span>
<span id="L2783"><span class="lineNum">    2783</span> <span class="tlaGNC">           8 :                             if (anyUnicodeModeOrNonAnnexB) {</span></span>
<span id="L2784"><span class="lineNum">    2784</span> <span class="tlaGNC">           8 :                                 error(Diagnostics._0_expected, pos, 0, String.fromCharCode(CharacterCodes.closeBrace));</span></span>
<span id="L2785"><span class="lineNum">    2785</span> <span class="tlaGNC">           8 :                                 pos--;</span></span>
<span id="L2786"><span class="lineNum">    2786</span> <span class="tlaGNC">           8 :                             }</span></span>
<span id="L2787"><span class="lineNum">    2787</span> <span class="tlaGNC">           8 :                             else {</span></span>
<span id="L2788"><span class="lineNum">    2788</span> <span class="tlaGNC">           8 :                                 isPreviousTermQuantifiable = true;</span></span>
<span id="L2789"><span class="lineNum">    2789</span> <span class="tlaGNC">           8 :                                 break;</span></span>
<span id="L2790"><span class="lineNum">    2790</span> <span class="tlaGNC">           8 :                             }</span></span>
<span id="L2791"><span class="lineNum">    2791</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L2792"><span class="lineNum">    2792</span> <span class="tlaGNC">           8 :                     // falls through</span></span>
<span id="L2793"><span class="lineNum">    2793</span> <span class="tlaGNC">           8 :                     case CharacterCodes.asterisk:</span></span>
<span id="L2794"><span class="lineNum">    2794</span> <span class="tlaGNC">           8 :                     case CharacterCodes.plus:</span></span>
<span id="L2795"><span class="lineNum">    2795</span> <span class="tlaGNC">           8 :                     case CharacterCodes.question:</span></span>
<span id="L2796"><span class="lineNum">    2796</span> <span class="tlaGNC">           8 :                         pos++;</span></span>
<span id="L2797"><span class="lineNum">    2797</span> <span class="tlaGNC">           8 :                         if (charCodeChecked(pos) === CharacterCodes.question) {</span></span>
<span id="L2798"><span class="lineNum">    2798</span> <span class="tlaGNC">           8 :                             // Non-greedy</span></span>
<span id="L2799"><span class="lineNum">    2799</span> <span class="tlaGNC">           8 :                             pos++;</span></span>
<span id="L2800"><span class="lineNum">    2800</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L2801"><span class="lineNum">    2801</span> <span class="tlaGNC">           8 :                         if (!isPreviousTermQuantifiable) {</span></span>
<span id="L2802"><span class="lineNum">    2802</span> <span class="tlaGNC">           8 :                             error(Diagnostics.There_is_nothing_available_for_repetition, start, pos - start);</span></span>
<span id="L2803"><span class="lineNum">    2803</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L2804"><span class="lineNum">    2804</span> <span class="tlaGNC">           8 :                         isPreviousTermQuantifiable = false;</span></span>
<span id="L2805"><span class="lineNum">    2805</span> <span class="tlaGNC">           8 :                         break;</span></span>
<span id="L2806"><span class="lineNum">    2806</span> <span class="tlaGNC">           8 :                     case CharacterCodes.dot:</span></span>
<span id="L2807"><span class="lineNum">    2807</span> <span class="tlaGNC">           8 :                         pos++;</span></span>
<span id="L2808"><span class="lineNum">    2808</span> <span class="tlaGNC">           8 :                         isPreviousTermQuantifiable = true;</span></span>
<span id="L2809"><span class="lineNum">    2809</span> <span class="tlaGNC">           8 :                         break;</span></span>
<span id="L2810"><span class="lineNum">    2810</span> <span class="tlaGNC">           8 :                     case CharacterCodes.openBracket:</span></span>
<span id="L2811"><span class="lineNum">    2811</span> <span class="tlaGNC">           8 :                         pos++;</span></span>
<span id="L2812"><span class="lineNum">    2812</span> <span class="tlaGNC">           8 :                         if (unicodeSetsMode) {</span></span>
<span id="L2813"><span class="lineNum">    2813</span> <span class="tlaGNC">           8 :                             scanClassSetExpression();</span></span>
<span id="L2814"><span class="lineNum">    2814</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L2815"><span class="lineNum">    2815</span> <span class="tlaGNC">           8 :                         else {</span></span>
<span id="L2816"><span class="lineNum">    2816</span> <span class="tlaGNC">           8 :                             scanClassRanges();</span></span>
<span id="L2817"><span class="lineNum">    2817</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L2818"><span class="lineNum">    2818</span> <span class="tlaGNC">           8 :                         scanExpectedChar(CharacterCodes.closeBracket);</span></span>
<span id="L2819"><span class="lineNum">    2819</span> <span class="tlaGNC">           8 :                         isPreviousTermQuantifiable = true;</span></span>
<span id="L2820"><span class="lineNum">    2820</span> <span class="tlaGNC">           8 :                         break;</span></span>
<span id="L2821"><span class="lineNum">    2821</span> <span class="tlaGNC">           8 :                     case CharacterCodes.closeParen:</span></span>
<span id="L2822"><span class="lineNum">    2822</span> <span class="tlaGNC">           8 :                         if (isInGroup) {</span></span>
<span id="L2823"><span class="lineNum">    2823</span> <span class="tlaGNC">           8 :                             return;</span></span>
<span id="L2824"><span class="lineNum">    2824</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L2825"><span class="lineNum">    2825</span> <span class="tlaGNC">           8 :                     // falls through</span></span>
<span id="L2826"><span class="lineNum">    2826</span> <span class="tlaGNC">           8 :                     case CharacterCodes.closeBracket:</span></span>
<span id="L2827"><span class="lineNum">    2827</span> <span class="tlaGNC">           8 :                     case CharacterCodes.closeBrace:</span></span>
<span id="L2828"><span class="lineNum">    2828</span> <span class="tlaGNC">           8 :                         if (anyUnicodeModeOrNonAnnexB || ch === CharacterCodes.closeParen) {</span></span>
<span id="L2829"><span class="lineNum">    2829</span> <span class="tlaGNC">           8 :                             error(Diagnostics.Unexpected_0_Did_you_mean_to_escape_it_with_backslash, pos, 1, String.fromCharCode(ch));</span></span>
<span id="L2830"><span class="lineNum">    2830</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L2831"><span class="lineNum">    2831</span> <span class="tlaGNC">           8 :                         pos++;</span></span>
<span id="L2832"><span class="lineNum">    2832</span> <span class="tlaGNC">           8 :                         isPreviousTermQuantifiable = true;</span></span>
<span id="L2833"><span class="lineNum">    2833</span> <span class="tlaGNC">           8 :                         break;</span></span>
<span id="L2834"><span class="lineNum">    2834</span> <span class="tlaGNC">           8 :                     case CharacterCodes.slash:</span></span>
<span id="L2835"><span class="lineNum">    2835</span> <span class="tlaGNC">           8 :                     case CharacterCodes.bar:</span></span>
<span id="L2836"><span class="lineNum">    2836</span> <span class="tlaGNC">           8 :                         return;</span></span>
<span id="L2837"><span class="lineNum">    2837</span> <span class="tlaGNC">           8 :                     default:</span></span>
<span id="L2838"><span class="lineNum">    2838</span> <span class="tlaGNC">           8 :                         scanSourceCharacter();</span></span>
<span id="L2839"><span class="lineNum">    2839</span> <span class="tlaGNC">           8 :                         isPreviousTermQuantifiable = true;</span></span>
<span id="L2840"><span class="lineNum">    2840</span> <span class="tlaGNC">           8 :                         break;</span></span>
<span id="L2841"><span class="lineNum">    2841</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L2842"><span class="lineNum">    2842</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L2843"><span class="lineNum">    2843</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L2844"><span class="lineNum">    2844</span> <span class="tlaGNC">           8 : </span></span>
<span id="L2845"><span class="lineNum">    2845</span> <span class="tlaGNC">           8 :         function scanPatternModifiers(currFlags: RegularExpressionFlags): RegularExpressionFlags {</span></span>
<span id="L2846"><span class="lineNum">    2846</span> <span class="tlaGNC">           8 :             while (true) {</span></span>
<span id="L2847"><span class="lineNum">    2847</span> <span class="tlaGNC">           8 :                 const ch = codePointChecked(pos);</span></span>
<span id="L2848"><span class="lineNum">    2848</span> <span class="tlaGNC">           8 :                 if (ch === CharacterCodes.EOF || !isIdentifierPart(ch, languageVersion)) {</span></span>
<span id="L2849"><span class="lineNum">    2849</span> <span class="tlaGNC">           8 :                     break;</span></span>
<span id="L2850"><span class="lineNum">    2850</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L2851"><span class="lineNum">    2851</span> <span class="tlaGNC">           8 :                 const size = charSize(ch);</span></span>
<span id="L2852"><span class="lineNum">    2852</span> <span class="tlaGNC">           8 :                 const flag = characterCodeToRegularExpressionFlag(ch);</span></span>
<span id="L2853"><span class="lineNum">    2853</span> <span class="tlaGNC">           8 :                 if (flag === undefined) {</span></span>
<span id="L2854"><span class="lineNum">    2854</span> <span class="tlaGNC">           8 :                     error(Diagnostics.Unknown_regular_expression_flag, pos, size);</span></span>
<span id="L2855"><span class="lineNum">    2855</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L2856"><span class="lineNum">    2856</span> <span class="tlaGNC">           8 :                 else if (currFlags &amp; flag) {</span></span>
<span id="L2857"><span class="lineNum">    2857</span> <span class="tlaGNC">           8 :                     error(Diagnostics.Duplicate_regular_expression_flag, pos, size);</span></span>
<span id="L2858"><span class="lineNum">    2858</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L2859"><span class="lineNum">    2859</span> <span class="tlaGNC">           8 :                 else if (!(flag &amp; RegularExpressionFlags.Modifiers)) {</span></span>
<span id="L2860"><span class="lineNum">    2860</span> <span class="tlaGNC">           8 :                     error(Diagnostics.This_regular_expression_flag_cannot_be_toggled_within_a_subpattern, pos, size);</span></span>
<span id="L2861"><span class="lineNum">    2861</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L2862"><span class="lineNum">    2862</span> <span class="tlaGNC">           8 :                 else {</span></span>
<span id="L2863"><span class="lineNum">    2863</span> <span class="tlaGNC">           8 :                     currFlags |= flag;</span></span>
<span id="L2864"><span class="lineNum">    2864</span> <span class="tlaGNC">           8 :                     checkRegularExpressionFlagAvailability(flag, size);</span></span>
<span id="L2865"><span class="lineNum">    2865</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L2866"><span class="lineNum">    2866</span> <span class="tlaGNC">           8 :                 pos += size;</span></span>
<span id="L2867"><span class="lineNum">    2867</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L2868"><span class="lineNum">    2868</span> <span class="tlaGNC">           8 :             return currFlags;</span></span>
<span id="L2869"><span class="lineNum">    2869</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L2870"><span class="lineNum">    2870</span> <span class="tlaGNC">           8 : </span></span>
<span id="L2871"><span class="lineNum">    2871</span> <span class="tlaGNC">           8 :         // AtomEscape ::=</span></span>
<span id="L2872"><span class="lineNum">    2872</span> <span class="tlaGNC">           8 :         //     | DecimalEscape</span></span>
<span id="L2873"><span class="lineNum">    2873</span> <span class="tlaGNC">           8 :         //     | CharacterClassEscape</span></span>
<span id="L2874"><span class="lineNum">    2874</span> <span class="tlaGNC">           8 :         //     | CharacterEscape</span></span>
<span id="L2875"><span class="lineNum">    2875</span> <span class="tlaGNC">           8 :         //     | 'k&lt;' RegExpIdentifierName '&gt;'</span></span>
<span id="L2876"><span class="lineNum">    2876</span> <span class="tlaGNC">           8 :         function scanAtomEscape() {</span></span>
<span id="L2877"><span class="lineNum">    2877</span> <span class="tlaGNC">           8 :             Debug.assertEqual(charCodeUnchecked(pos - 1), CharacterCodes.backslash);</span></span>
<span id="L2878"><span class="lineNum">    2878</span> <span class="tlaGNC">           8 :             switch (charCodeChecked(pos)) {</span></span>
<span id="L2879"><span class="lineNum">    2879</span> <span class="tlaGNC">           8 :                 case CharacterCodes.k:</span></span>
<span id="L2880"><span class="lineNum">    2880</span> <span class="tlaGNC">           8 :                     pos++;</span></span>
<span id="L2881"><span class="lineNum">    2881</span> <span class="tlaGNC">           8 :                     if (charCodeChecked(pos) === CharacterCodes.lessThan) {</span></span>
<span id="L2882"><span class="lineNum">    2882</span> <span class="tlaGNC">           8 :                         pos++;</span></span>
<span id="L2883"><span class="lineNum">    2883</span> <span class="tlaGNC">           8 :                         scanGroupName(/*isReference*/ true);</span></span>
<span id="L2884"><span class="lineNum">    2884</span> <span class="tlaGNC">           8 :                         scanExpectedChar(CharacterCodes.greaterThan);</span></span>
<span id="L2885"><span class="lineNum">    2885</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L2886"><span class="lineNum">    2886</span> <span class="tlaGNC">           8 :                     else if (anyUnicodeModeOrNonAnnexB || namedCaptureGroups) {</span></span>
<span id="L2887"><span class="lineNum">    2887</span> <span class="tlaGNC">           8 :                         error(Diagnostics.k_must_be_followed_by_a_capturing_group_name_enclosed_in_angle_brackets, pos - 2, 2);</span></span>
<span id="L2888"><span class="lineNum">    2888</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L2889"><span class="lineNum">    2889</span> <span class="tlaGNC">           8 :                     break;</span></span>
<span id="L2890"><span class="lineNum">    2890</span> <span class="tlaGNC">           8 :                 case CharacterCodes.q:</span></span>
<span id="L2891"><span class="lineNum">    2891</span> <span class="tlaGNC">           8 :                     if (unicodeSetsMode) {</span></span>
<span id="L2892"><span class="lineNum">    2892</span> <span class="tlaGNC">           8 :                         pos++;</span></span>
<span id="L2893"><span class="lineNum">    2893</span> <span class="tlaGNC">           8 :                         error(Diagnostics.q_is_only_available_inside_character_class, pos - 2, 2);</span></span>
<span id="L2894"><span class="lineNum">    2894</span> <span class="tlaGNC">           8 :                         break;</span></span>
<span id="L2895"><span class="lineNum">    2895</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L2896"><span class="lineNum">    2896</span> <span class="tlaGNC">           8 :                 // falls through</span></span>
<span id="L2897"><span class="lineNum">    2897</span> <span class="tlaGNC">           8 :                 default:</span></span>
<span id="L2898"><span class="lineNum">    2898</span> <span class="tlaGNC">           8 :                     // The scanEscapeSequence call in scanCharacterEscape must return non-empty strings</span></span>
<span id="L2899"><span class="lineNum">    2899</span> <span class="tlaGNC">           8 :                     // since there must not be line breaks in a regex literal</span></span>
<span id="L2900"><span class="lineNum">    2900</span> <span class="tlaGNC">           8 :                     Debug.assert(scanCharacterClassEscape() || scanDecimalEscape() || scanCharacterEscape(/*atomEscape*/ true));</span></span>
<span id="L2901"><span class="lineNum">    2901</span> <span class="tlaGNC">           8 :                     break;</span></span>
<span id="L2902"><span class="lineNum">    2902</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L2903"><span class="lineNum">    2903</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L2904"><span class="lineNum">    2904</span> <span class="tlaGNC">           8 : </span></span>
<span id="L2905"><span class="lineNum">    2905</span> <span class="tlaGNC">           8 :         // DecimalEscape ::= [1-9] [0-9]*</span></span>
<span id="L2906"><span class="lineNum">    2906</span> <span class="tlaGNC">           8 :         function scanDecimalEscape(): boolean {</span></span>
<span id="L2907"><span class="lineNum">    2907</span> <span class="tlaGNC">           8 :             Debug.assertEqual(charCodeUnchecked(pos - 1), CharacterCodes.backslash);</span></span>
<span id="L2908"><span class="lineNum">    2908</span> <span class="tlaGNC">           8 :             const ch = charCodeChecked(pos);</span></span>
<span id="L2909"><span class="lineNum">    2909</span> <span class="tlaGNC">           8 :             if (ch &gt;= CharacterCodes._1 &amp;&amp; ch &lt;= CharacterCodes._9) {</span></span>
<span id="L2910"><span class="lineNum">    2910</span> <span class="tlaGNC">           8 :                 const start = pos;</span></span>
<span id="L2911"><span class="lineNum">    2911</span> <span class="tlaGNC">           8 :                 scanDigits();</span></span>
<span id="L2912"><span class="lineNum">    2912</span> <span class="tlaGNC">           8 :                 decimalEscapes = append(decimalEscapes, { pos: start, end: pos, value: +tokenValue });</span></span>
<span id="L2913"><span class="lineNum">    2913</span> <span class="tlaGNC">           8 :                 return true;</span></span>
<span id="L2914"><span class="lineNum">    2914</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L2915"><span class="lineNum">    2915</span> <span class="tlaGNC">           8 :             return false;</span></span>
<span id="L2916"><span class="lineNum">    2916</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L2917"><span class="lineNum">    2917</span> <span class="tlaGNC">           8 : </span></span>
<span id="L2918"><span class="lineNum">    2918</span> <span class="tlaGNC">           8 :         // CharacterEscape ::=</span></span>
<span id="L2919"><span class="lineNum">    2919</span> <span class="tlaGNC">           8 :         //     | `c` ControlLetter</span></span>
<span id="L2920"><span class="lineNum">    2920</span> <span class="tlaGNC">           8 :         //     | IdentityEscape</span></span>
<span id="L2921"><span class="lineNum">    2921</span> <span class="tlaGNC">           8 :         //     | (Other sequences handled by `scanEscapeSequence`)</span></span>
<span id="L2922"><span class="lineNum">    2922</span> <span class="tlaGNC">           8 :         // IdentityEscape ::=</span></span>
<span id="L2923"><span class="lineNum">    2923</span> <span class="tlaGNC">           8 :         //     | '^' | '$' | '/' | '\' | '.' | '*' | '+' | '?' | '(' | ')' | '[' | ']' | '{' | '}' | '|'</span></span>
<span id="L2924"><span class="lineNum">    2924</span> <span class="tlaGNC">           8 :         //     | [~UnicodeMode] (any other non-identifier characters)</span></span>
<span id="L2925"><span class="lineNum">    2925</span> <span class="tlaGNC">           8 :         function scanCharacterEscape(atomEscape: boolean): string {</span></span>
<span id="L2926"><span class="lineNum">    2926</span> <span class="tlaGNC">           8 :             Debug.assertEqual(charCodeUnchecked(pos - 1), CharacterCodes.backslash);</span></span>
<span id="L2927"><span class="lineNum">    2927</span> <span class="tlaGNC">           8 :             let ch = charCodeChecked(pos);</span></span>
<span id="L2928"><span class="lineNum">    2928</span> <span class="tlaGNC">           8 :             switch (ch) {</span></span>
<span id="L2929"><span class="lineNum">    2929</span> <span class="tlaGNC">           8 :                 case CharacterCodes.EOF:</span></span>
<span id="L2930"><span class="lineNum">    2930</span> <span class="tlaGNC">           8 :                     error(Diagnostics.Undetermined_character_escape, pos - 1, 1);</span></span>
<span id="L2931"><span class="lineNum">    2931</span> <span class="tlaGNC">           8 :                     return &quot;\\&quot;;</span></span>
<span id="L2932"><span class="lineNum">    2932</span> <span class="tlaGNC">           8 :                 case CharacterCodes.c:</span></span>
<span id="L2933"><span class="lineNum">    2933</span> <span class="tlaGNC">           8 :                     pos++;</span></span>
<span id="L2934"><span class="lineNum">    2934</span> <span class="tlaGNC">           8 :                     ch = charCodeChecked(pos);</span></span>
<span id="L2935"><span class="lineNum">    2935</span> <span class="tlaGNC">           8 :                     if (isASCIILetter(ch)) {</span></span>
<span id="L2936"><span class="lineNum">    2936</span> <span class="tlaGNC">           8 :                         pos++;</span></span>
<span id="L2937"><span class="lineNum">    2937</span> <span class="tlaGNC">           8 :                         return String.fromCharCode(ch &amp; 0x1f);</span></span>
<span id="L2938"><span class="lineNum">    2938</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L2939"><span class="lineNum">    2939</span> <span class="tlaGNC">           8 :                     if (anyUnicodeModeOrNonAnnexB) {</span></span>
<span id="L2940"><span class="lineNum">    2940</span> <span class="tlaGNC">           8 :                         error(Diagnostics.c_must_be_followed_by_an_ASCII_letter, pos - 2, 2);</span></span>
<span id="L2941"><span class="lineNum">    2941</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L2942"><span class="lineNum">    2942</span> <span class="tlaGNC">           8 :                     else if (atomEscape) {</span></span>
<span id="L2943"><span class="lineNum">    2943</span> <span class="tlaGNC">           8 :                         // Annex B treats</span></span>
<span id="L2944"><span class="lineNum">    2944</span> <span class="tlaGNC">           8 :                         //</span></span>
<span id="L2945"><span class="lineNum">    2945</span> <span class="tlaGNC">           8 :                         //  ExtendedAtom : `\` [lookahead = `c`]</span></span>
<span id="L2946"><span class="lineNum">    2946</span> <span class="tlaGNC">           8 :                         //</span></span>
<span id="L2947"><span class="lineNum">    2947</span> <span class="tlaGNC">           8 :                         // as the single character `\` when `c` isn't followed by a valid control character</span></span>
<span id="L2948"><span class="lineNum">    2948</span> <span class="tlaGNC">           8 :                         pos--;</span></span>
<span id="L2949"><span class="lineNum">    2949</span> <span class="tlaGNC">           8 :                         return &quot;\\&quot;;</span></span>
<span id="L2950"><span class="lineNum">    2950</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L2951"><span class="lineNum">    2951</span> <span class="tlaGNC">           8 :                     return String.fromCharCode(ch);</span></span>
<span id="L2952"><span class="lineNum">    2952</span> <span class="tlaGNC">           8 :                 case CharacterCodes.caret:</span></span>
<span id="L2953"><span class="lineNum">    2953</span> <span class="tlaGNC">           8 :                 case CharacterCodes.$:</span></span>
<span id="L2954"><span class="lineNum">    2954</span> <span class="tlaGNC">           8 :                 case CharacterCodes.slash:</span></span>
<span id="L2955"><span class="lineNum">    2955</span> <span class="tlaGNC">           8 :                 case CharacterCodes.backslash:</span></span>
<span id="L2956"><span class="lineNum">    2956</span> <span class="tlaGNC">           8 :                 case CharacterCodes.dot:</span></span>
<span id="L2957"><span class="lineNum">    2957</span> <span class="tlaGNC">           8 :                 case CharacterCodes.asterisk:</span></span>
<span id="L2958"><span class="lineNum">    2958</span> <span class="tlaGNC">           8 :                 case CharacterCodes.plus:</span></span>
<span id="L2959"><span class="lineNum">    2959</span> <span class="tlaGNC">           8 :                 case CharacterCodes.question:</span></span>
<span id="L2960"><span class="lineNum">    2960</span> <span class="tlaGNC">           8 :                 case CharacterCodes.openParen:</span></span>
<span id="L2961"><span class="lineNum">    2961</span> <span class="tlaGNC">           8 :                 case CharacterCodes.closeParen:</span></span>
<span id="L2962"><span class="lineNum">    2962</span> <span class="tlaGNC">           8 :                 case CharacterCodes.openBracket:</span></span>
<span id="L2963"><span class="lineNum">    2963</span> <span class="tlaGNC">           8 :                 case CharacterCodes.closeBracket:</span></span>
<span id="L2964"><span class="lineNum">    2964</span> <span class="tlaGNC">           8 :                 case CharacterCodes.openBrace:</span></span>
<span id="L2965"><span class="lineNum">    2965</span> <span class="tlaGNC">           8 :                 case CharacterCodes.closeBrace:</span></span>
<span id="L2966"><span class="lineNum">    2966</span> <span class="tlaGNC">           8 :                 case CharacterCodes.bar:</span></span>
<span id="L2967"><span class="lineNum">    2967</span> <span class="tlaGNC">           8 :                     pos++;</span></span>
<span id="L2968"><span class="lineNum">    2968</span> <span class="tlaGNC">           8 :                     return String.fromCharCode(ch);</span></span>
<span id="L2969"><span class="lineNum">    2969</span> <span class="tlaGNC">           8 :                 default:</span></span>
<span id="L2970"><span class="lineNum">    2970</span> <span class="tlaGNC">           8 :                     pos--;</span></span>
<span id="L2971"><span class="lineNum">    2971</span> <span class="tlaGNC">           8 :                     return scanEscapeSequence(</span></span>
<span id="L2972"><span class="lineNum">    2972</span> <span class="tlaGNC">           8 :                         EscapeSequenceScanningFlags.RegularExpression</span></span>
<span id="L2973"><span class="lineNum">    2973</span> <span class="tlaGNC">           8 :                             | (annexB ? EscapeSequenceScanningFlags.AnnexB : 0)</span></span>
<span id="L2974"><span class="lineNum">    2974</span> <span class="tlaGNC">           8 :                             | (anyUnicodeMode ? EscapeSequenceScanningFlags.AnyUnicodeMode : 0)</span></span>
<span id="L2975"><span class="lineNum">    2975</span> <span class="tlaGNC">           8 :                             | (atomEscape ? EscapeSequenceScanningFlags.AtomEscape : 0),</span></span>
<span id="L2976"><span class="lineNum">    2976</span> <span class="tlaGNC">           8 :                     );</span></span>
<span id="L2977"><span class="lineNum">    2977</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L2978"><span class="lineNum">    2978</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L2979"><span class="lineNum">    2979</span> <span class="tlaGNC">           8 : </span></span>
<span id="L2980"><span class="lineNum">    2980</span> <span class="tlaGNC">           8 :         function scanGroupName(isReference: boolean) {</span></span>
<span id="L2981"><span class="lineNum">    2981</span> <span class="tlaGNC">           8 :             Debug.assertEqual(charCodeUnchecked(pos - 1), CharacterCodes.lessThan);</span></span>
<span id="L2982"><span class="lineNum">    2982</span> <span class="tlaGNC">           8 :             tokenStart = pos;</span></span>
<span id="L2983"><span class="lineNum">    2983</span> <span class="tlaGNC">           8 :             scanIdentifier(codePointChecked(pos), languageVersion);</span></span>
<span id="L2984"><span class="lineNum">    2984</span> <span class="tlaGNC">           8 :             if (pos === tokenStart) {</span></span>
<span id="L2985"><span class="lineNum">    2985</span> <span class="tlaGNC">           8 :                 error(Diagnostics.Expected_a_capturing_group_name);</span></span>
<span id="L2986"><span class="lineNum">    2986</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L2987"><span class="lineNum">    2987</span> <span class="tlaGNC">           8 :             else if (isReference) {</span></span>
<span id="L2988"><span class="lineNum">    2988</span> <span class="tlaGNC">           8 :                 groupNameReferences = append(groupNameReferences, { pos: tokenStart, end: pos, name: tokenValue });</span></span>
<span id="L2989"><span class="lineNum">    2989</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L2990"><span class="lineNum">    2990</span> <span class="tlaGNC">           8 :             else if (topNamedCapturingGroupsScope?.has(tokenValue) || namedCapturingGroupsScopeStack.some(group =&gt; group?.has(tokenValue))) {</span></span>
<span id="L2991"><span class="lineNum">    2991</span> <span class="tlaGNC">           8 :                 error(Diagnostics.Named_capturing_groups_with_the_same_name_must_be_mutually_exclusive_to_each_other, tokenStart, pos - tokenStart);</span></span>
<span id="L2992"><span class="lineNum">    2992</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L2993"><span class="lineNum">    2993</span> <span class="tlaGNC">           8 :             else {</span></span>
<span id="L2994"><span class="lineNum">    2994</span> <span class="tlaGNC">           8 :                 topNamedCapturingGroupsScope ??= new Set();</span></span>
<span id="L2995"><span class="lineNum">    2995</span> <span class="tlaGNC">           8 :                 topNamedCapturingGroupsScope.add(tokenValue);</span></span>
<span id="L2996"><span class="lineNum">    2996</span> <span class="tlaGNC">           8 :                 groupSpecifiers ??= new Set();</span></span>
<span id="L2997"><span class="lineNum">    2997</span> <span class="tlaGNC">           8 :                 groupSpecifiers.add(tokenValue);</span></span>
<span id="L2998"><span class="lineNum">    2998</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L2999"><span class="lineNum">    2999</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L3000"><span class="lineNum">    3000</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3001"><span class="lineNum">    3001</span> <span class="tlaGNC">           8 :         function isClassContentExit(ch: number) {</span></span>
<span id="L3002"><span class="lineNum">    3002</span> <span class="tlaGNC">           8 :             return ch === CharacterCodes.closeBracket || ch === CharacterCodes.EOF || pos &gt;= end;</span></span>
<span id="L3003"><span class="lineNum">    3003</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L3004"><span class="lineNum">    3004</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3005"><span class="lineNum">    3005</span> <span class="tlaGNC">           8 :         // ClassRanges ::= '^'? (ClassAtom ('-' ClassAtom)?)*</span></span>
<span id="L3006"><span class="lineNum">    3006</span> <span class="tlaGNC">           8 :         function scanClassRanges() {</span></span>
<span id="L3007"><span class="lineNum">    3007</span> <span class="tlaGNC">           8 :             Debug.assertEqual(charCodeUnchecked(pos - 1), CharacterCodes.openBracket);</span></span>
<span id="L3008"><span class="lineNum">    3008</span> <span class="tlaGNC">           8 :             if (charCodeChecked(pos) === CharacterCodes.caret) {</span></span>
<span id="L3009"><span class="lineNum">    3009</span> <span class="tlaGNC">           8 :                 // character complement</span></span>
<span id="L3010"><span class="lineNum">    3010</span> <span class="tlaGNC">           8 :                 pos++;</span></span>
<span id="L3011"><span class="lineNum">    3011</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L3012"><span class="lineNum">    3012</span> <span class="tlaGNC">           8 :             while (true) {</span></span>
<span id="L3013"><span class="lineNum">    3013</span> <span class="tlaGNC">           8 :                 const ch = charCodeChecked(pos);</span></span>
<span id="L3014"><span class="lineNum">    3014</span> <span class="tlaGNC">           8 :                 if (isClassContentExit(ch)) {</span></span>
<span id="L3015"><span class="lineNum">    3015</span> <span class="tlaGNC">           8 :                     return;</span></span>
<span id="L3016"><span class="lineNum">    3016</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L3017"><span class="lineNum">    3017</span> <span class="tlaGNC">           8 :                 const minStart = pos;</span></span>
<span id="L3018"><span class="lineNum">    3018</span> <span class="tlaGNC">           8 :                 const minCharacter = scanClassAtom();</span></span>
<span id="L3019"><span class="lineNum">    3019</span> <span class="tlaGNC">           8 :                 if (charCodeChecked(pos) === CharacterCodes.minus) {</span></span>
<span id="L3020"><span class="lineNum">    3020</span> <span class="tlaGNC">           8 :                     pos++;</span></span>
<span id="L3021"><span class="lineNum">    3021</span> <span class="tlaGNC">           8 :                     const ch = charCodeChecked(pos);</span></span>
<span id="L3022"><span class="lineNum">    3022</span> <span class="tlaGNC">           8 :                     if (isClassContentExit(ch)) {</span></span>
<span id="L3023"><span class="lineNum">    3023</span> <span class="tlaGNC">           8 :                         return;</span></span>
<span id="L3024"><span class="lineNum">    3024</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L3025"><span class="lineNum">    3025</span> <span class="tlaGNC">           8 :                     if (!minCharacter &amp;&amp; anyUnicodeModeOrNonAnnexB) {</span></span>
<span id="L3026"><span class="lineNum">    3026</span> <span class="tlaGNC">           8 :                         error(Diagnostics.A_character_class_range_must_not_be_bounded_by_another_character_class, minStart, pos - 1 - minStart);</span></span>
<span id="L3027"><span class="lineNum">    3027</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L3028"><span class="lineNum">    3028</span> <span class="tlaGNC">           8 :                     const maxStart = pos;</span></span>
<span id="L3029"><span class="lineNum">    3029</span> <span class="tlaGNC">           8 :                     const maxCharacter = scanClassAtom();</span></span>
<span id="L3030"><span class="lineNum">    3030</span> <span class="tlaGNC">           8 :                     if (!maxCharacter &amp;&amp; anyUnicodeModeOrNonAnnexB) {</span></span>
<span id="L3031"><span class="lineNum">    3031</span> <span class="tlaGNC">           8 :                         error(Diagnostics.A_character_class_range_must_not_be_bounded_by_another_character_class, maxStart, pos - maxStart);</span></span>
<span id="L3032"><span class="lineNum">    3032</span> <span class="tlaGNC">           8 :                         continue;</span></span>
<span id="L3033"><span class="lineNum">    3033</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L3034"><span class="lineNum">    3034</span> <span class="tlaGNC">           8 :                     if (!minCharacter) {</span></span>
<span id="L3035"><span class="lineNum">    3035</span> <span class="tlaGNC">           8 :                         continue;</span></span>
<span id="L3036"><span class="lineNum">    3036</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L3037"><span class="lineNum">    3037</span> <span class="tlaGNC">           8 :                     const minCharacterValue = codePointAt(minCharacter, 0);</span></span>
<span id="L3038"><span class="lineNum">    3038</span> <span class="tlaGNC">           8 :                     const maxCharacterValue = codePointAt(maxCharacter, 0);</span></span>
<span id="L3039"><span class="lineNum">    3039</span> <span class="tlaGNC">           8 :                     if (</span></span>
<span id="L3040"><span class="lineNum">    3040</span> <span class="tlaGNC">           8 :                         minCharacter.length === charSize(minCharacterValue) &amp;&amp;</span></span>
<span id="L3041"><span class="lineNum">    3041</span> <span class="tlaGNC">           8 :                         maxCharacter.length === charSize(maxCharacterValue) &amp;&amp;</span></span>
<span id="L3042"><span class="lineNum">    3042</span> <span class="tlaGNC">           8 :                         minCharacterValue &gt; maxCharacterValue</span></span>
<span id="L3043"><span class="lineNum">    3043</span> <span class="tlaGNC">           8 :                     ) {</span></span>
<span id="L3044"><span class="lineNum">    3044</span> <span class="tlaGNC">           8 :                         error(Diagnostics.Range_out_of_order_in_character_class, minStart, pos - minStart);</span></span>
<span id="L3045"><span class="lineNum">    3045</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L3046"><span class="lineNum">    3046</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L3047"><span class="lineNum">    3047</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L3048"><span class="lineNum">    3048</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L3049"><span class="lineNum">    3049</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3050"><span class="lineNum">    3050</span> <span class="tlaGNC">           8 :         // Static Semantics: MayContainStrings</span></span>
<span id="L3051"><span class="lineNum">    3051</span> <span class="tlaGNC">           8 :         //     ClassUnion: ClassSetOperands.some(ClassSetOperand =&gt; ClassSetOperand.MayContainStrings)</span></span>
<span id="L3052"><span class="lineNum">    3052</span> <span class="tlaGNC">           8 :         //     ClassIntersection: ClassSetOperands.every(ClassSetOperand =&gt; ClassSetOperand.MayContainStrings)</span></span>
<span id="L3053"><span class="lineNum">    3053</span> <span class="tlaGNC">           8 :         //     ClassSubtraction: ClassSetOperands[0].MayContainStrings</span></span>
<span id="L3054"><span class="lineNum">    3054</span> <span class="tlaGNC">           8 :         //     ClassSetOperand:</span></span>
<span id="L3055"><span class="lineNum">    3055</span> <span class="tlaGNC">           8 :         //         || ClassStringDisjunctionContents.MayContainStrings</span></span>
<span id="L3056"><span class="lineNum">    3056</span> <span class="tlaGNC">           8 :         //         || CharacterClassEscape.UnicodePropertyValueExpression.LoneUnicodePropertyNameOrValue.MayContainStrings</span></span>
<span id="L3057"><span class="lineNum">    3057</span> <span class="tlaGNC">           8 :         //     ClassStringDisjunctionContents: ClassStrings.some(ClassString =&gt; ClassString.ClassSetCharacters.length !== 1)</span></span>
<span id="L3058"><span class="lineNum">    3058</span> <span class="tlaGNC">           8 :         //     LoneUnicodePropertyNameOrValue: isBinaryUnicodePropertyOfStrings(LoneUnicodePropertyNameOrValue)</span></span>
<span id="L3059"><span class="lineNum">    3059</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3060"><span class="lineNum">    3060</span> <span class="tlaGNC">           8 :         // ClassSetExpression ::= '^'? (ClassUnion | ClassIntersection | ClassSubtraction)</span></span>
<span id="L3061"><span class="lineNum">    3061</span> <span class="tlaGNC">           8 :         // ClassUnion ::= (ClassSetRange | ClassSetOperand)*</span></span>
<span id="L3062"><span class="lineNum">    3062</span> <span class="tlaGNC">           8 :         // ClassIntersection ::= ClassSetOperand ('&amp;&amp;' ClassSetOperand)+</span></span>
<span id="L3063"><span class="lineNum">    3063</span> <span class="tlaGNC">           8 :         // ClassSubtraction ::= ClassSetOperand ('--' ClassSetOperand)+</span></span>
<span id="L3064"><span class="lineNum">    3064</span> <span class="tlaGNC">           8 :         // ClassSetRange ::= ClassSetCharacter '-' ClassSetCharacter</span></span>
<span id="L3065"><span class="lineNum">    3065</span> <span class="tlaGNC">           8 :         function scanClassSetExpression() {</span></span>
<span id="L3066"><span class="lineNum">    3066</span> <span class="tlaGNC">           8 :             Debug.assertEqual(charCodeUnchecked(pos - 1), CharacterCodes.openBracket);</span></span>
<span id="L3067"><span class="lineNum">    3067</span> <span class="tlaGNC">           8 :             let isCharacterComplement = false;</span></span>
<span id="L3068"><span class="lineNum">    3068</span> <span class="tlaGNC">           8 :             if (charCodeChecked(pos) === CharacterCodes.caret) {</span></span>
<span id="L3069"><span class="lineNum">    3069</span> <span class="tlaGNC">           8 :                 pos++;</span></span>
<span id="L3070"><span class="lineNum">    3070</span> <span class="tlaGNC">           8 :                 isCharacterComplement = true;</span></span>
<span id="L3071"><span class="lineNum">    3071</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L3072"><span class="lineNum">    3072</span> <span class="tlaGNC">           8 :             let expressionMayContainStrings = false;</span></span>
<span id="L3073"><span class="lineNum">    3073</span> <span class="tlaGNC">           8 :             let ch = charCodeChecked(pos);</span></span>
<span id="L3074"><span class="lineNum">    3074</span> <span class="tlaGNC">           8 :             if (isClassContentExit(ch)) {</span></span>
<span id="L3075"><span class="lineNum">    3075</span> <span class="tlaGNC">           8 :                 return;</span></span>
<span id="L3076"><span class="lineNum">    3076</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L3077"><span class="lineNum">    3077</span> <span class="tlaGNC">           8 :             let start = pos;</span></span>
<span id="L3078"><span class="lineNum">    3078</span> <span class="tlaGNC">           8 :             let operand!: string;</span></span>
<span id="L3079"><span class="lineNum">    3079</span> <span class="tlaGNC">           8 :             switch (text.slice(pos, pos + 2)) { // TODO: don't use slice</span></span>
<span id="L3080"><span class="lineNum">    3080</span> <span class="tlaGNC">           8 :                 case &quot;--&quot;:</span></span>
<span id="L3081"><span class="lineNum">    3081</span> <span class="tlaGNC">           8 :                 case &quot;&amp;&amp;&quot;:</span></span>
<span id="L3082"><span class="lineNum">    3082</span> <span class="tlaGNC">           8 :                     error(Diagnostics.Expected_a_class_set_operand);</span></span>
<span id="L3083"><span class="lineNum">    3083</span> <span class="tlaGNC">           8 :                     mayContainStrings = false;</span></span>
<span id="L3084"><span class="lineNum">    3084</span> <span class="tlaGNC">           8 :                     break;</span></span>
<span id="L3085"><span class="lineNum">    3085</span> <span class="tlaGNC">           8 :                 default:</span></span>
<span id="L3086"><span class="lineNum">    3086</span> <span class="tlaGNC">           8 :                     operand = scanClassSetOperand();</span></span>
<span id="L3087"><span class="lineNum">    3087</span> <span class="tlaGNC">           8 :                     break;</span></span>
<span id="L3088"><span class="lineNum">    3088</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L3089"><span class="lineNum">    3089</span> <span class="tlaGNC">           8 :             switch (charCodeChecked(pos)) {</span></span>
<span id="L3090"><span class="lineNum">    3090</span> <span class="tlaGNC">           8 :                 case CharacterCodes.minus:</span></span>
<span id="L3091"><span class="lineNum">    3091</span> <span class="tlaGNC">           8 :                     if (charCodeChecked(pos + 1) === CharacterCodes.minus) {</span></span>
<span id="L3092"><span class="lineNum">    3092</span> <span class="tlaGNC">           8 :                         if (isCharacterComplement &amp;&amp; mayContainStrings) {</span></span>
<span id="L3093"><span class="lineNum">    3093</span> <span class="tlaGNC">           8 :                             error(Diagnostics.Anything_that_would_possibly_match_more_than_a_single_character_is_invalid_inside_a_negated_character_class, start, pos - start);</span></span>
<span id="L3094"><span class="lineNum">    3094</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L3095"><span class="lineNum">    3095</span> <span class="tlaGNC">           8 :                         expressionMayContainStrings = mayContainStrings;</span></span>
<span id="L3096"><span class="lineNum">    3096</span> <span class="tlaGNC">           8 :                         scanClassSetSubExpression(ClassSetExpressionType.ClassSubtraction);</span></span>
<span id="L3097"><span class="lineNum">    3097</span> <span class="tlaGNC">           8 :                         mayContainStrings = !isCharacterComplement &amp;&amp; expressionMayContainStrings;</span></span>
<span id="L3098"><span class="lineNum">    3098</span> <span class="tlaGNC">           8 :                         return;</span></span>
<span id="L3099"><span class="lineNum">    3099</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L3100"><span class="lineNum">    3100</span> <span class="tlaGNC">           8 :                     break;</span></span>
<span id="L3101"><span class="lineNum">    3101</span> <span class="tlaGNC">           8 :                 case CharacterCodes.ampersand:</span></span>
<span id="L3102"><span class="lineNum">    3102</span> <span class="tlaGNC">           8 :                     if (charCodeChecked(pos + 1) === CharacterCodes.ampersand) {</span></span>
<span id="L3103"><span class="lineNum">    3103</span> <span class="tlaGNC">           8 :                         scanClassSetSubExpression(ClassSetExpressionType.ClassIntersection);</span></span>
<span id="L3104"><span class="lineNum">    3104</span> <span class="tlaGNC">           8 :                         if (isCharacterComplement &amp;&amp; mayContainStrings) {</span></span>
<span id="L3105"><span class="lineNum">    3105</span> <span class="tlaGNC">           8 :                             error(Diagnostics.Anything_that_would_possibly_match_more_than_a_single_character_is_invalid_inside_a_negated_character_class, start, pos - start);</span></span>
<span id="L3106"><span class="lineNum">    3106</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L3107"><span class="lineNum">    3107</span> <span class="tlaGNC">           8 :                         expressionMayContainStrings = mayContainStrings;</span></span>
<span id="L3108"><span class="lineNum">    3108</span> <span class="tlaGNC">           8 :                         mayContainStrings = !isCharacterComplement &amp;&amp; expressionMayContainStrings;</span></span>
<span id="L3109"><span class="lineNum">    3109</span> <span class="tlaGNC">           8 :                         return;</span></span>
<span id="L3110"><span class="lineNum">    3110</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L3111"><span class="lineNum">    3111</span> <span class="tlaGNC">           8 :                     else {</span></span>
<span id="L3112"><span class="lineNum">    3112</span> <span class="tlaGNC">           8 :                         error(Diagnostics.Unexpected_0_Did_you_mean_to_escape_it_with_backslash, pos, 1, String.fromCharCode(ch));</span></span>
<span id="L3113"><span class="lineNum">    3113</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L3114"><span class="lineNum">    3114</span> <span class="tlaGNC">           8 :                     break;</span></span>
<span id="L3115"><span class="lineNum">    3115</span> <span class="tlaGNC">           8 :                 default:</span></span>
<span id="L3116"><span class="lineNum">    3116</span> <span class="tlaGNC">           8 :                     if (isCharacterComplement &amp;&amp; mayContainStrings) {</span></span>
<span id="L3117"><span class="lineNum">    3117</span> <span class="tlaGNC">           8 :                         error(Diagnostics.Anything_that_would_possibly_match_more_than_a_single_character_is_invalid_inside_a_negated_character_class, start, pos - start);</span></span>
<span id="L3118"><span class="lineNum">    3118</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L3119"><span class="lineNum">    3119</span> <span class="tlaGNC">           8 :                     expressionMayContainStrings = mayContainStrings;</span></span>
<span id="L3120"><span class="lineNum">    3120</span> <span class="tlaGNC">           8 :                     break;</span></span>
<span id="L3121"><span class="lineNum">    3121</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L3122"><span class="lineNum">    3122</span> <span class="tlaGNC">           8 :             while (true) {</span></span>
<span id="L3123"><span class="lineNum">    3123</span> <span class="tlaGNC">           8 :                 ch = charCodeChecked(pos);</span></span>
<span id="L3124"><span class="lineNum">    3124</span> <span class="tlaGNC">           8 :                 if (ch === CharacterCodes.EOF) {</span></span>
<span id="L3125"><span class="lineNum">    3125</span> <span class="tlaGNC">           8 :                     break;</span></span>
<span id="L3126"><span class="lineNum">    3126</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L3127"><span class="lineNum">    3127</span> <span class="tlaGNC">           8 :                 switch (ch) {</span></span>
<span id="L3128"><span class="lineNum">    3128</span> <span class="tlaGNC">           8 :                     case CharacterCodes.minus:</span></span>
<span id="L3129"><span class="lineNum">    3129</span> <span class="tlaGNC">           8 :                         pos++;</span></span>
<span id="L3130"><span class="lineNum">    3130</span> <span class="tlaGNC">           8 :                         ch = charCodeChecked(pos);</span></span>
<span id="L3131"><span class="lineNum">    3131</span> <span class="tlaGNC">           8 :                         if (isClassContentExit(ch)) {</span></span>
<span id="L3132"><span class="lineNum">    3132</span> <span class="tlaGNC">           8 :                             mayContainStrings = !isCharacterComplement &amp;&amp; expressionMayContainStrings;</span></span>
<span id="L3133"><span class="lineNum">    3133</span> <span class="tlaGNC">           8 :                             return;</span></span>
<span id="L3134"><span class="lineNum">    3134</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L3135"><span class="lineNum">    3135</span> <span class="tlaGNC">           8 :                         if (ch === CharacterCodes.minus) {</span></span>
<span id="L3136"><span class="lineNum">    3136</span> <span class="tlaGNC">           8 :                             pos++;</span></span>
<span id="L3137"><span class="lineNum">    3137</span> <span class="tlaGNC">           8 :                             error(Diagnostics.Operators_must_not_be_mixed_within_a_character_class_Wrap_it_in_a_nested_class_instead, pos - 2, 2);</span></span>
<span id="L3138"><span class="lineNum">    3138</span> <span class="tlaGNC">           8 :                             start = pos - 2;</span></span>
<span id="L3139"><span class="lineNum">    3139</span> <span class="tlaGNC">           8 :                             operand = text.slice(start, pos);</span></span>
<span id="L3140"><span class="lineNum">    3140</span> <span class="tlaGNC">           8 :                             continue;</span></span>
<span id="L3141"><span class="lineNum">    3141</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L3142"><span class="lineNum">    3142</span> <span class="tlaGNC">           8 :                         else {</span></span>
<span id="L3143"><span class="lineNum">    3143</span> <span class="tlaGNC">           8 :                             if (!operand) {</span></span>
<span id="L3144"><span class="lineNum">    3144</span> <span class="tlaGNC">           8 :                                 error(Diagnostics.A_character_class_range_must_not_be_bounded_by_another_character_class, start, pos - 1 - start);</span></span>
<span id="L3145"><span class="lineNum">    3145</span> <span class="tlaGNC">           8 :                             }</span></span>
<span id="L3146"><span class="lineNum">    3146</span> <span class="tlaGNC">           8 :                             const secondStart = pos;</span></span>
<span id="L3147"><span class="lineNum">    3147</span> <span class="tlaGNC">           8 :                             const secondOperand = scanClassSetOperand();</span></span>
<span id="L3148"><span class="lineNum">    3148</span> <span class="tlaGNC">           8 :                             if (isCharacterComplement &amp;&amp; mayContainStrings) {</span></span>
<span id="L3149"><span class="lineNum">    3149</span> <span class="tlaGNC">           8 :                                 error(Diagnostics.Anything_that_would_possibly_match_more_than_a_single_character_is_invalid_inside_a_negated_character_class, secondStart, pos - secondStart);</span></span>
<span id="L3150"><span class="lineNum">    3150</span> <span class="tlaGNC">           8 :                             }</span></span>
<span id="L3151"><span class="lineNum">    3151</span> <span class="tlaGNC">           8 :                             expressionMayContainStrings ||= mayContainStrings;</span></span>
<span id="L3152"><span class="lineNum">    3152</span> <span class="tlaGNC">           8 :                             if (!secondOperand) {</span></span>
<span id="L3153"><span class="lineNum">    3153</span> <span class="tlaGNC">           8 :                                 error(Diagnostics.A_character_class_range_must_not_be_bounded_by_another_character_class, secondStart, pos - secondStart);</span></span>
<span id="L3154"><span class="lineNum">    3154</span> <span class="tlaGNC">           8 :                                 break;</span></span>
<span id="L3155"><span class="lineNum">    3155</span> <span class="tlaGNC">           8 :                             }</span></span>
<span id="L3156"><span class="lineNum">    3156</span> <span class="tlaGNC">           8 :                             if (!operand) {</span></span>
<span id="L3157"><span class="lineNum">    3157</span> <span class="tlaGNC">           8 :                                 break;</span></span>
<span id="L3158"><span class="lineNum">    3158</span> <span class="tlaGNC">           8 :                             }</span></span>
<span id="L3159"><span class="lineNum">    3159</span> <span class="tlaGNC">           8 :                             const minCharacterValue = codePointAt(operand, 0);</span></span>
<span id="L3160"><span class="lineNum">    3160</span> <span class="tlaGNC">           8 :                             const maxCharacterValue = codePointAt(secondOperand, 0);</span></span>
<span id="L3161"><span class="lineNum">    3161</span> <span class="tlaGNC">           8 :                             if (</span></span>
<span id="L3162"><span class="lineNum">    3162</span> <span class="tlaGNC">           8 :                                 operand.length === charSize(minCharacterValue) &amp;&amp;</span></span>
<span id="L3163"><span class="lineNum">    3163</span> <span class="tlaGNC">           8 :                                 secondOperand.length === charSize(maxCharacterValue) &amp;&amp;</span></span>
<span id="L3164"><span class="lineNum">    3164</span> <span class="tlaGNC">           8 :                                 minCharacterValue &gt; maxCharacterValue</span></span>
<span id="L3165"><span class="lineNum">    3165</span> <span class="tlaGNC">           8 :                             ) {</span></span>
<span id="L3166"><span class="lineNum">    3166</span> <span class="tlaGNC">           8 :                                 error(Diagnostics.Range_out_of_order_in_character_class, start, pos - start);</span></span>
<span id="L3167"><span class="lineNum">    3167</span> <span class="tlaGNC">           8 :                             }</span></span>
<span id="L3168"><span class="lineNum">    3168</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L3169"><span class="lineNum">    3169</span> <span class="tlaGNC">           8 :                         break;</span></span>
<span id="L3170"><span class="lineNum">    3170</span> <span class="tlaGNC">           8 :                     case CharacterCodes.ampersand:</span></span>
<span id="L3171"><span class="lineNum">    3171</span> <span class="tlaGNC">           8 :                         start = pos;</span></span>
<span id="L3172"><span class="lineNum">    3172</span> <span class="tlaGNC">           8 :                         pos++;</span></span>
<span id="L3173"><span class="lineNum">    3173</span> <span class="tlaGNC">           8 :                         if (charCodeChecked(pos) === CharacterCodes.ampersand) {</span></span>
<span id="L3174"><span class="lineNum">    3174</span> <span class="tlaGNC">           8 :                             pos++;</span></span>
<span id="L3175"><span class="lineNum">    3175</span> <span class="tlaGNC">           8 :                             error(Diagnostics.Operators_must_not_be_mixed_within_a_character_class_Wrap_it_in_a_nested_class_instead, pos - 2, 2);</span></span>
<span id="L3176"><span class="lineNum">    3176</span> <span class="tlaGNC">           8 :                             if (charCodeChecked(pos) === CharacterCodes.ampersand) {</span></span>
<span id="L3177"><span class="lineNum">    3177</span> <span class="tlaGNC">           8 :                                 error(Diagnostics.Unexpected_0_Did_you_mean_to_escape_it_with_backslash, pos, 1, String.fromCharCode(ch));</span></span>
<span id="L3178"><span class="lineNum">    3178</span> <span class="tlaGNC">           8 :                                 pos++;</span></span>
<span id="L3179"><span class="lineNum">    3179</span> <span class="tlaGNC">           8 :                             }</span></span>
<span id="L3180"><span class="lineNum">    3180</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L3181"><span class="lineNum">    3181</span> <span class="tlaGNC">           8 :                         else {</span></span>
<span id="L3182"><span class="lineNum">    3182</span> <span class="tlaGNC">           8 :                             error(Diagnostics.Unexpected_0_Did_you_mean_to_escape_it_with_backslash, pos - 1, 1, String.fromCharCode(ch));</span></span>
<span id="L3183"><span class="lineNum">    3183</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L3184"><span class="lineNum">    3184</span> <span class="tlaGNC">           8 :                         operand = text.slice(start, pos);</span></span>
<span id="L3185"><span class="lineNum">    3185</span> <span class="tlaGNC">           8 :                         continue;</span></span>
<span id="L3186"><span class="lineNum">    3186</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L3187"><span class="lineNum">    3187</span> <span class="tlaGNC">           8 :                 if (isClassContentExit(charCodeChecked(pos))) {</span></span>
<span id="L3188"><span class="lineNum">    3188</span> <span class="tlaGNC">           8 :                     break;</span></span>
<span id="L3189"><span class="lineNum">    3189</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L3190"><span class="lineNum">    3190</span> <span class="tlaGNC">           8 :                 start = pos;</span></span>
<span id="L3191"><span class="lineNum">    3191</span> <span class="tlaGNC">           8 :                 switch (text.slice(pos, pos + 2)) { // TODO: don't use slice</span></span>
<span id="L3192"><span class="lineNum">    3192</span> <span class="tlaGNC">           8 :                     case &quot;--&quot;:</span></span>
<span id="L3193"><span class="lineNum">    3193</span> <span class="tlaGNC">           8 :                     case &quot;&amp;&amp;&quot;:</span></span>
<span id="L3194"><span class="lineNum">    3194</span> <span class="tlaGNC">           8 :                         error(Diagnostics.Operators_must_not_be_mixed_within_a_character_class_Wrap_it_in_a_nested_class_instead, pos, 2);</span></span>
<span id="L3195"><span class="lineNum">    3195</span> <span class="tlaGNC">           8 :                         pos += 2;</span></span>
<span id="L3196"><span class="lineNum">    3196</span> <span class="tlaGNC">           8 :                         operand = text.slice(start, pos);</span></span>
<span id="L3197"><span class="lineNum">    3197</span> <span class="tlaGNC">           8 :                         break;</span></span>
<span id="L3198"><span class="lineNum">    3198</span> <span class="tlaGNC">           8 :                     default:</span></span>
<span id="L3199"><span class="lineNum">    3199</span> <span class="tlaGNC">           8 :                         operand = scanClassSetOperand();</span></span>
<span id="L3200"><span class="lineNum">    3200</span> <span class="tlaGNC">           8 :                         break;</span></span>
<span id="L3201"><span class="lineNum">    3201</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L3202"><span class="lineNum">    3202</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L3203"><span class="lineNum">    3203</span> <span class="tlaGNC">           8 :             mayContainStrings = !isCharacterComplement &amp;&amp; expressionMayContainStrings;</span></span>
<span id="L3204"><span class="lineNum">    3204</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L3205"><span class="lineNum">    3205</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3206"><span class="lineNum">    3206</span> <span class="tlaGNC">           8 :         function scanClassSetSubExpression(expressionType: ClassSetExpressionType) {</span></span>
<span id="L3207"><span class="lineNum">    3207</span> <span class="tlaGNC">           8 :             let expressionMayContainStrings = mayContainStrings;</span></span>
<span id="L3208"><span class="lineNum">    3208</span> <span class="tlaGNC">           8 :             while (true) {</span></span>
<span id="L3209"><span class="lineNum">    3209</span> <span class="tlaGNC">           8 :                 let ch = charCodeChecked(pos);</span></span>
<span id="L3210"><span class="lineNum">    3210</span> <span class="tlaGNC">           8 :                 if (isClassContentExit(ch)) {</span></span>
<span id="L3211"><span class="lineNum">    3211</span> <span class="tlaGNC">           8 :                     break;</span></span>
<span id="L3212"><span class="lineNum">    3212</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L3213"><span class="lineNum">    3213</span> <span class="tlaGNC">           8 :                 // Provide user-friendly diagnostic messages</span></span>
<span id="L3214"><span class="lineNum">    3214</span> <span class="tlaGNC">           8 :                 switch (ch) {</span></span>
<span id="L3215"><span class="lineNum">    3215</span> <span class="tlaGNC">           8 :                     case CharacterCodes.minus:</span></span>
<span id="L3216"><span class="lineNum">    3216</span> <span class="tlaGNC">           8 :                         pos++;</span></span>
<span id="L3217"><span class="lineNum">    3217</span> <span class="tlaGNC">           8 :                         if (charCodeChecked(pos) === CharacterCodes.minus) {</span></span>
<span id="L3218"><span class="lineNum">    3218</span> <span class="tlaGNC">           8 :                             pos++;</span></span>
<span id="L3219"><span class="lineNum">    3219</span> <span class="tlaGNC">           8 :                             if (expressionType !== ClassSetExpressionType.ClassSubtraction) {</span></span>
<span id="L3220"><span class="lineNum">    3220</span> <span class="tlaGNC">           8 :                                 error(Diagnostics.Operators_must_not_be_mixed_within_a_character_class_Wrap_it_in_a_nested_class_instead, pos - 2, 2);</span></span>
<span id="L3221"><span class="lineNum">    3221</span> <span class="tlaGNC">           8 :                             }</span></span>
<span id="L3222"><span class="lineNum">    3222</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L3223"><span class="lineNum">    3223</span> <span class="tlaGNC">           8 :                         else {</span></span>
<span id="L3224"><span class="lineNum">    3224</span> <span class="tlaGNC">           8 :                             error(Diagnostics.Operators_must_not_be_mixed_within_a_character_class_Wrap_it_in_a_nested_class_instead, pos - 1, 1);</span></span>
<span id="L3225"><span class="lineNum">    3225</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L3226"><span class="lineNum">    3226</span> <span class="tlaGNC">           8 :                         break;</span></span>
<span id="L3227"><span class="lineNum">    3227</span> <span class="tlaGNC">           8 :                     case CharacterCodes.ampersand:</span></span>
<span id="L3228"><span class="lineNum">    3228</span> <span class="tlaGNC">           8 :                         pos++;</span></span>
<span id="L3229"><span class="lineNum">    3229</span> <span class="tlaGNC">           8 :                         if (charCodeChecked(pos) === CharacterCodes.ampersand) {</span></span>
<span id="L3230"><span class="lineNum">    3230</span> <span class="tlaGNC">           8 :                             pos++;</span></span>
<span id="L3231"><span class="lineNum">    3231</span> <span class="tlaGNC">           8 :                             if (expressionType !== ClassSetExpressionType.ClassIntersection) {</span></span>
<span id="L3232"><span class="lineNum">    3232</span> <span class="tlaGNC">           8 :                                 error(Diagnostics.Operators_must_not_be_mixed_within_a_character_class_Wrap_it_in_a_nested_class_instead, pos - 2, 2);</span></span>
<span id="L3233"><span class="lineNum">    3233</span> <span class="tlaGNC">           8 :                             }</span></span>
<span id="L3234"><span class="lineNum">    3234</span> <span class="tlaGNC">           8 :                             if (charCodeChecked(pos) === CharacterCodes.ampersand) {</span></span>
<span id="L3235"><span class="lineNum">    3235</span> <span class="tlaGNC">           8 :                                 error(Diagnostics.Unexpected_0_Did_you_mean_to_escape_it_with_backslash, pos, 1, String.fromCharCode(ch));</span></span>
<span id="L3236"><span class="lineNum">    3236</span> <span class="tlaGNC">           8 :                                 pos++;</span></span>
<span id="L3237"><span class="lineNum">    3237</span> <span class="tlaGNC">           8 :                             }</span></span>
<span id="L3238"><span class="lineNum">    3238</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L3239"><span class="lineNum">    3239</span> <span class="tlaGNC">           8 :                         else {</span></span>
<span id="L3240"><span class="lineNum">    3240</span> <span class="tlaGNC">           8 :                             error(Diagnostics.Unexpected_0_Did_you_mean_to_escape_it_with_backslash, pos - 1, 1, String.fromCharCode(ch));</span></span>
<span id="L3241"><span class="lineNum">    3241</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L3242"><span class="lineNum">    3242</span> <span class="tlaGNC">           8 :                         break;</span></span>
<span id="L3243"><span class="lineNum">    3243</span> <span class="tlaGNC">           8 :                     default:</span></span>
<span id="L3244"><span class="lineNum">    3244</span> <span class="tlaGNC">           8 :                         switch (expressionType) {</span></span>
<span id="L3245"><span class="lineNum">    3245</span> <span class="tlaGNC">           8 :                             case ClassSetExpressionType.ClassSubtraction:</span></span>
<span id="L3246"><span class="lineNum">    3246</span> <span class="tlaGNC">           8 :                                 error(Diagnostics._0_expected, pos, 0, &quot;--&quot;);</span></span>
<span id="L3247"><span class="lineNum">    3247</span> <span class="tlaGNC">           8 :                                 break;</span></span>
<span id="L3248"><span class="lineNum">    3248</span> <span class="tlaGNC">           8 :                             case ClassSetExpressionType.ClassIntersection:</span></span>
<span id="L3249"><span class="lineNum">    3249</span> <span class="tlaGNC">           8 :                                 error(Diagnostics._0_expected, pos, 0, &quot;&amp;&amp;&quot;);</span></span>
<span id="L3250"><span class="lineNum">    3250</span> <span class="tlaGNC">           8 :                                 break;</span></span>
<span id="L3251"><span class="lineNum">    3251</span> <span class="tlaGNC">           8 :                             default:</span></span>
<span id="L3252"><span class="lineNum">    3252</span> <span class="tlaGNC">           8 :                                 break;</span></span>
<span id="L3253"><span class="lineNum">    3253</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L3254"><span class="lineNum">    3254</span> <span class="tlaGNC">           8 :                         break;</span></span>
<span id="L3255"><span class="lineNum">    3255</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L3256"><span class="lineNum">    3256</span> <span class="tlaGNC">           8 :                 ch = charCodeChecked(pos);</span></span>
<span id="L3257"><span class="lineNum">    3257</span> <span class="tlaGNC">           8 :                 if (isClassContentExit(ch)) {</span></span>
<span id="L3258"><span class="lineNum">    3258</span> <span class="tlaGNC">           8 :                     error(Diagnostics.Expected_a_class_set_operand);</span></span>
<span id="L3259"><span class="lineNum">    3259</span> <span class="tlaGNC">           8 :                     break;</span></span>
<span id="L3260"><span class="lineNum">    3260</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L3261"><span class="lineNum">    3261</span> <span class="tlaGNC">           8 :                 scanClassSetOperand();</span></span>
<span id="L3262"><span class="lineNum">    3262</span> <span class="tlaGNC">           8 :                 // Used only if expressionType is Intersection</span></span>
<span id="L3263"><span class="lineNum">    3263</span> <span class="tlaGNC">           8 :                 expressionMayContainStrings &amp;&amp;= mayContainStrings;</span></span>
<span id="L3264"><span class="lineNum">    3264</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L3265"><span class="lineNum">    3265</span> <span class="tlaGNC">           8 :             mayContainStrings = expressionMayContainStrings;</span></span>
<span id="L3266"><span class="lineNum">    3266</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L3267"><span class="lineNum">    3267</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3268"><span class="lineNum">    3268</span> <span class="tlaGNC">           8 :         // ClassSetOperand ::=</span></span>
<span id="L3269"><span class="lineNum">    3269</span> <span class="tlaGNC">           8 :         //     | '[' ClassSetExpression ']'</span></span>
<span id="L3270"><span class="lineNum">    3270</span> <span class="tlaGNC">           8 :         //     | '\' CharacterClassEscape</span></span>
<span id="L3271"><span class="lineNum">    3271</span> <span class="tlaGNC">           8 :         //     | '\q{' ClassStringDisjunctionContents '}'</span></span>
<span id="L3272"><span class="lineNum">    3272</span> <span class="tlaGNC">           8 :         //     | ClassSetCharacter</span></span>
<span id="L3273"><span class="lineNum">    3273</span> <span class="tlaGNC">           8 :         function scanClassSetOperand(): string {</span></span>
<span id="L3274"><span class="lineNum">    3274</span> <span class="tlaGNC">           8 :             mayContainStrings = false;</span></span>
<span id="L3275"><span class="lineNum">    3275</span> <span class="tlaGNC">           8 :             switch (charCodeChecked(pos)) {</span></span>
<span id="L3276"><span class="lineNum">    3276</span> <span class="tlaGNC">           8 :                 case CharacterCodes.EOF:</span></span>
<span id="L3277"><span class="lineNum">    3277</span> <span class="tlaGNC">           8 :                     return &quot;&quot;;</span></span>
<span id="L3278"><span class="lineNum">    3278</span> <span class="tlaGNC">           8 :                 case CharacterCodes.openBracket:</span></span>
<span id="L3279"><span class="lineNum">    3279</span> <span class="tlaGNC">           8 :                     pos++;</span></span>
<span id="L3280"><span class="lineNum">    3280</span> <span class="tlaGNC">           8 :                     scanClassSetExpression();</span></span>
<span id="L3281"><span class="lineNum">    3281</span> <span class="tlaGNC">           8 :                     scanExpectedChar(CharacterCodes.closeBracket);</span></span>
<span id="L3282"><span class="lineNum">    3282</span> <span class="tlaGNC">           8 :                     return &quot;&quot;;</span></span>
<span id="L3283"><span class="lineNum">    3283</span> <span class="tlaGNC">           8 :                 case CharacterCodes.backslash:</span></span>
<span id="L3284"><span class="lineNum">    3284</span> <span class="tlaGNC">           8 :                     pos++;</span></span>
<span id="L3285"><span class="lineNum">    3285</span> <span class="tlaGNC">           8 :                     if (scanCharacterClassEscape()) {</span></span>
<span id="L3286"><span class="lineNum">    3286</span> <span class="tlaGNC">           8 :                         return &quot;&quot;;</span></span>
<span id="L3287"><span class="lineNum">    3287</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L3288"><span class="lineNum">    3288</span> <span class="tlaGNC">           8 :                     else if (charCodeChecked(pos) === CharacterCodes.q) {</span></span>
<span id="L3289"><span class="lineNum">    3289</span> <span class="tlaGNC">           8 :                         pos++;</span></span>
<span id="L3290"><span class="lineNum">    3290</span> <span class="tlaGNC">           8 :                         if (charCodeChecked(pos) === CharacterCodes.openBrace) {</span></span>
<span id="L3291"><span class="lineNum">    3291</span> <span class="tlaGNC">           8 :                             pos++;</span></span>
<span id="L3292"><span class="lineNum">    3292</span> <span class="tlaGNC">           8 :                             scanClassStringDisjunctionContents();</span></span>
<span id="L3293"><span class="lineNum">    3293</span> <span class="tlaGNC">           8 :                             scanExpectedChar(CharacterCodes.closeBrace);</span></span>
<span id="L3294"><span class="lineNum">    3294</span> <span class="tlaGNC">           8 :                             return &quot;&quot;;</span></span>
<span id="L3295"><span class="lineNum">    3295</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L3296"><span class="lineNum">    3296</span> <span class="tlaGNC">           8 :                         else {</span></span>
<span id="L3297"><span class="lineNum">    3297</span> <span class="tlaGNC">           8 :                             error(Diagnostics.q_must_be_followed_by_string_alternatives_enclosed_in_braces, pos - 2, 2);</span></span>
<span id="L3298"><span class="lineNum">    3298</span> <span class="tlaGNC">           8 :                             return &quot;q&quot;;</span></span>
<span id="L3299"><span class="lineNum">    3299</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L3300"><span class="lineNum">    3300</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L3301"><span class="lineNum">    3301</span> <span class="tlaGNC">           8 :                     pos--;</span></span>
<span id="L3302"><span class="lineNum">    3302</span> <span class="tlaGNC">           8 :                 // falls through</span></span>
<span id="L3303"><span class="lineNum">    3303</span> <span class="tlaGNC">           8 :                 default:</span></span>
<span id="L3304"><span class="lineNum">    3304</span> <span class="tlaGNC">           8 :                     return scanClassSetCharacter();</span></span>
<span id="L3305"><span class="lineNum">    3305</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L3306"><span class="lineNum">    3306</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L3307"><span class="lineNum">    3307</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3308"><span class="lineNum">    3308</span> <span class="tlaGNC">           8 :         // ClassStringDisjunctionContents ::= ClassSetCharacter* ('|' ClassSetCharacter*)*</span></span>
<span id="L3309"><span class="lineNum">    3309</span> <span class="tlaGNC">           8 :         function scanClassStringDisjunctionContents() {</span></span>
<span id="L3310"><span class="lineNum">    3310</span> <span class="tlaGNC">           8 :             Debug.assertEqual(charCodeUnchecked(pos - 1), CharacterCodes.openBrace);</span></span>
<span id="L3311"><span class="lineNum">    3311</span> <span class="tlaGNC">           8 :             let characterCount = 0;</span></span>
<span id="L3312"><span class="lineNum">    3312</span> <span class="tlaGNC">           8 :             while (true) {</span></span>
<span id="L3313"><span class="lineNum">    3313</span> <span class="tlaGNC">           8 :                 const ch = charCodeChecked(pos);</span></span>
<span id="L3314"><span class="lineNum">    3314</span> <span class="tlaGNC">           8 :                 switch (ch) {</span></span>
<span id="L3315"><span class="lineNum">    3315</span> <span class="tlaGNC">           8 :                     case CharacterCodes.EOF:</span></span>
<span id="L3316"><span class="lineNum">    3316</span> <span class="tlaGNC">           8 :                         return;</span></span>
<span id="L3317"><span class="lineNum">    3317</span> <span class="tlaGNC">           8 :                     case CharacterCodes.closeBrace:</span></span>
<span id="L3318"><span class="lineNum">    3318</span> <span class="tlaGNC">           8 :                         if (characterCount !== 1) {</span></span>
<span id="L3319"><span class="lineNum">    3319</span> <span class="tlaGNC">           8 :                             mayContainStrings = true;</span></span>
<span id="L3320"><span class="lineNum">    3320</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L3321"><span class="lineNum">    3321</span> <span class="tlaGNC">           8 :                         return;</span></span>
<span id="L3322"><span class="lineNum">    3322</span> <span class="tlaGNC">           8 :                     case CharacterCodes.bar:</span></span>
<span id="L3323"><span class="lineNum">    3323</span> <span class="tlaGNC">           8 :                         if (characterCount !== 1) {</span></span>
<span id="L3324"><span class="lineNum">    3324</span> <span class="tlaGNC">           8 :                             mayContainStrings = true;</span></span>
<span id="L3325"><span class="lineNum">    3325</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L3326"><span class="lineNum">    3326</span> <span class="tlaGNC">           8 :                         pos++;</span></span>
<span id="L3327"><span class="lineNum">    3327</span> <span class="tlaGNC">           8 :                         start = pos;</span></span>
<span id="L3328"><span class="lineNum">    3328</span> <span class="tlaGNC">           8 :                         characterCount = 0;</span></span>
<span id="L3329"><span class="lineNum">    3329</span> <span class="tlaGNC">           8 :                         break;</span></span>
<span id="L3330"><span class="lineNum">    3330</span> <span class="tlaGNC">           8 :                     default:</span></span>
<span id="L3331"><span class="lineNum">    3331</span> <span class="tlaGNC">           8 :                         scanClassSetCharacter();</span></span>
<span id="L3332"><span class="lineNum">    3332</span> <span class="tlaGNC">           8 :                         characterCount++;</span></span>
<span id="L3333"><span class="lineNum">    3333</span> <span class="tlaGNC">           8 :                         break;</span></span>
<span id="L3334"><span class="lineNum">    3334</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L3335"><span class="lineNum">    3335</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L3336"><span class="lineNum">    3336</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L3337"><span class="lineNum">    3337</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3338"><span class="lineNum">    3338</span> <span class="tlaGNC">           8 :         // ClassSetCharacter ::=</span></span>
<span id="L3339"><span class="lineNum">    3339</span> <span class="tlaGNC">           8 :         //     | SourceCharacter -- ClassSetSyntaxCharacter -- ClassSetReservedDoublePunctuator</span></span>
<span id="L3340"><span class="lineNum">    3340</span> <span class="tlaGNC">           8 :         //     | '\' (CharacterEscape | ClassSetReservedPunctuator | 'b')</span></span>
<span id="L3341"><span class="lineNum">    3341</span> <span class="tlaGNC">           8 :         function scanClassSetCharacter(): string {</span></span>
<span id="L3342"><span class="lineNum">    3342</span> <span class="tlaGNC">           8 :             const ch = charCodeChecked(pos);</span></span>
<span id="L3343"><span class="lineNum">    3343</span> <span class="tlaGNC">           8 :             if (ch === CharacterCodes.EOF) {</span></span>
<span id="L3344"><span class="lineNum">    3344</span> <span class="tlaGNC">           8 :                 // no need to report an error, the initial scan will already have reported that the RegExp is unterminated.</span></span>
<span id="L3345"><span class="lineNum">    3345</span> <span class="tlaGNC">           8 :                 return &quot;&quot;;</span></span>
<span id="L3346"><span class="lineNum">    3346</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L3347"><span class="lineNum">    3347</span> <span class="tlaGNC">           8 :             if (ch === CharacterCodes.backslash) {</span></span>
<span id="L3348"><span class="lineNum">    3348</span> <span class="tlaGNC">           8 :                 pos++;</span></span>
<span id="L3349"><span class="lineNum">    3349</span> <span class="tlaGNC">           8 :                 const ch = charCodeChecked(pos);</span></span>
<span id="L3350"><span class="lineNum">    3350</span> <span class="tlaGNC">           8 :                 switch (ch) {</span></span>
<span id="L3351"><span class="lineNum">    3351</span> <span class="tlaGNC">           8 :                     case CharacterCodes.b:</span></span>
<span id="L3352"><span class="lineNum">    3352</span> <span class="tlaGNC">           8 :                         pos++;</span></span>
<span id="L3353"><span class="lineNum">    3353</span> <span class="tlaGNC">           8 :                         return &quot;\b&quot;;</span></span>
<span id="L3354"><span class="lineNum">    3354</span> <span class="tlaGNC">           8 :                     case CharacterCodes.ampersand:</span></span>
<span id="L3355"><span class="lineNum">    3355</span> <span class="tlaGNC">           8 :                     case CharacterCodes.minus:</span></span>
<span id="L3356"><span class="lineNum">    3356</span> <span class="tlaGNC">           8 :                     case CharacterCodes.exclamation:</span></span>
<span id="L3357"><span class="lineNum">    3357</span> <span class="tlaGNC">           8 :                     case CharacterCodes.hash:</span></span>
<span id="L3358"><span class="lineNum">    3358</span> <span class="tlaGNC">           8 :                     case CharacterCodes.percent:</span></span>
<span id="L3359"><span class="lineNum">    3359</span> <span class="tlaGNC">           8 :                     case CharacterCodes.comma:</span></span>
<span id="L3360"><span class="lineNum">    3360</span> <span class="tlaGNC">           8 :                     case CharacterCodes.colon:</span></span>
<span id="L3361"><span class="lineNum">    3361</span> <span class="tlaGNC">           8 :                     case CharacterCodes.semicolon:</span></span>
<span id="L3362"><span class="lineNum">    3362</span> <span class="tlaGNC">           8 :                     case CharacterCodes.lessThan:</span></span>
<span id="L3363"><span class="lineNum">    3363</span> <span class="tlaGNC">           8 :                     case CharacterCodes.equals:</span></span>
<span id="L3364"><span class="lineNum">    3364</span> <span class="tlaGNC">           8 :                     case CharacterCodes.greaterThan:</span></span>
<span id="L3365"><span class="lineNum">    3365</span> <span class="tlaGNC">           8 :                     case CharacterCodes.at:</span></span>
<span id="L3366"><span class="lineNum">    3366</span> <span class="tlaGNC">           8 :                     case CharacterCodes.backtick:</span></span>
<span id="L3367"><span class="lineNum">    3367</span> <span class="tlaGNC">           8 :                     case CharacterCodes.tilde:</span></span>
<span id="L3368"><span class="lineNum">    3368</span> <span class="tlaGNC">           8 :                         pos++;</span></span>
<span id="L3369"><span class="lineNum">    3369</span> <span class="tlaGNC">           8 :                         return String.fromCharCode(ch);</span></span>
<span id="L3370"><span class="lineNum">    3370</span> <span class="tlaGNC">           8 :                     default:</span></span>
<span id="L3371"><span class="lineNum">    3371</span> <span class="tlaGNC">           8 :                         return scanCharacterEscape(/*atomEscape*/ false);</span></span>
<span id="L3372"><span class="lineNum">    3372</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L3373"><span class="lineNum">    3373</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L3374"><span class="lineNum">    3374</span> <span class="tlaGNC">           8 :             else if (ch === charCodeChecked(pos + 1)) {</span></span>
<span id="L3375"><span class="lineNum">    3375</span> <span class="tlaGNC">           8 :                 switch (ch) {</span></span>
<span id="L3376"><span class="lineNum">    3376</span> <span class="tlaGNC">           8 :                     case CharacterCodes.ampersand:</span></span>
<span id="L3377"><span class="lineNum">    3377</span> <span class="tlaGNC">           8 :                     case CharacterCodes.exclamation:</span></span>
<span id="L3378"><span class="lineNum">    3378</span> <span class="tlaGNC">           8 :                     case CharacterCodes.hash:</span></span>
<span id="L3379"><span class="lineNum">    3379</span> <span class="tlaGNC">           8 :                     case CharacterCodes.percent:</span></span>
<span id="L3380"><span class="lineNum">    3380</span> <span class="tlaGNC">           8 :                     case CharacterCodes.asterisk:</span></span>
<span id="L3381"><span class="lineNum">    3381</span> <span class="tlaGNC">           8 :                     case CharacterCodes.plus:</span></span>
<span id="L3382"><span class="lineNum">    3382</span> <span class="tlaGNC">           8 :                     case CharacterCodes.comma:</span></span>
<span id="L3383"><span class="lineNum">    3383</span> <span class="tlaGNC">           8 :                     case CharacterCodes.dot:</span></span>
<span id="L3384"><span class="lineNum">    3384</span> <span class="tlaGNC">           8 :                     case CharacterCodes.colon:</span></span>
<span id="L3385"><span class="lineNum">    3385</span> <span class="tlaGNC">           8 :                     case CharacterCodes.semicolon:</span></span>
<span id="L3386"><span class="lineNum">    3386</span> <span class="tlaGNC">           8 :                     case CharacterCodes.lessThan:</span></span>
<span id="L3387"><span class="lineNum">    3387</span> <span class="tlaGNC">           8 :                     case CharacterCodes.equals:</span></span>
<span id="L3388"><span class="lineNum">    3388</span> <span class="tlaGNC">           8 :                     case CharacterCodes.greaterThan:</span></span>
<span id="L3389"><span class="lineNum">    3389</span> <span class="tlaGNC">           8 :                     case CharacterCodes.question:</span></span>
<span id="L3390"><span class="lineNum">    3390</span> <span class="tlaGNC">           8 :                     case CharacterCodes.at:</span></span>
<span id="L3391"><span class="lineNum">    3391</span> <span class="tlaGNC">           8 :                     case CharacterCodes.backtick:</span></span>
<span id="L3392"><span class="lineNum">    3392</span> <span class="tlaGNC">           8 :                     case CharacterCodes.tilde:</span></span>
<span id="L3393"><span class="lineNum">    3393</span> <span class="tlaGNC">           8 :                         error(Diagnostics.A_character_class_must_not_contain_a_reserved_double_punctuator_Did_you_mean_to_escape_it_with_backslash, pos, 2);</span></span>
<span id="L3394"><span class="lineNum">    3394</span> <span class="tlaGNC">           8 :                         pos += 2;</span></span>
<span id="L3395"><span class="lineNum">    3395</span> <span class="tlaGNC">           8 :                         return text.substring(pos - 2, pos);</span></span>
<span id="L3396"><span class="lineNum">    3396</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L3397"><span class="lineNum">    3397</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L3398"><span class="lineNum">    3398</span> <span class="tlaGNC">           8 :             switch (ch) {</span></span>
<span id="L3399"><span class="lineNum">    3399</span> <span class="tlaGNC">           8 :                 case CharacterCodes.slash:</span></span>
<span id="L3400"><span class="lineNum">    3400</span> <span class="tlaGNC">           8 :                 case CharacterCodes.openParen:</span></span>
<span id="L3401"><span class="lineNum">    3401</span> <span class="tlaGNC">           8 :                 case CharacterCodes.closeParen:</span></span>
<span id="L3402"><span class="lineNum">    3402</span> <span class="tlaGNC">           8 :                 case CharacterCodes.openBracket:</span></span>
<span id="L3403"><span class="lineNum">    3403</span> <span class="tlaGNC">           8 :                 case CharacterCodes.closeBracket:</span></span>
<span id="L3404"><span class="lineNum">    3404</span> <span class="tlaGNC">           8 :                 case CharacterCodes.openBrace:</span></span>
<span id="L3405"><span class="lineNum">    3405</span> <span class="tlaGNC">           8 :                 case CharacterCodes.closeBrace:</span></span>
<span id="L3406"><span class="lineNum">    3406</span> <span class="tlaGNC">           8 :                 case CharacterCodes.minus:</span></span>
<span id="L3407"><span class="lineNum">    3407</span> <span class="tlaGNC">           8 :                 case CharacterCodes.bar:</span></span>
<span id="L3408"><span class="lineNum">    3408</span> <span class="tlaGNC">           8 :                     error(Diagnostics.Unexpected_0_Did_you_mean_to_escape_it_with_backslash, pos, 1, String.fromCharCode(ch));</span></span>
<span id="L3409"><span class="lineNum">    3409</span> <span class="tlaGNC">           8 :                     pos++;</span></span>
<span id="L3410"><span class="lineNum">    3410</span> <span class="tlaGNC">           8 :                     return String.fromCharCode(ch);</span></span>
<span id="L3411"><span class="lineNum">    3411</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L3412"><span class="lineNum">    3412</span> <span class="tlaGNC">           8 :             return scanSourceCharacter();</span></span>
<span id="L3413"><span class="lineNum">    3413</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L3414"><span class="lineNum">    3414</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3415"><span class="lineNum">    3415</span> <span class="tlaGNC">           8 :         // ClassAtom ::=</span></span>
<span id="L3416"><span class="lineNum">    3416</span> <span class="tlaGNC">           8 :         //     | SourceCharacter but not one of '\' or ']'</span></span>
<span id="L3417"><span class="lineNum">    3417</span> <span class="tlaGNC">           8 :         //     | '\' ClassEscape</span></span>
<span id="L3418"><span class="lineNum">    3418</span> <span class="tlaGNC">           8 :         // ClassEscape ::=</span></span>
<span id="L3419"><span class="lineNum">    3419</span> <span class="tlaGNC">           8 :         //     | 'b'</span></span>
<span id="L3420"><span class="lineNum">    3420</span> <span class="tlaGNC">           8 :         //     | '-'</span></span>
<span id="L3421"><span class="lineNum">    3421</span> <span class="tlaGNC">           8 :         //     | CharacterClassEscape</span></span>
<span id="L3422"><span class="lineNum">    3422</span> <span class="tlaGNC">           8 :         //     | CharacterEscape</span></span>
<span id="L3423"><span class="lineNum">    3423</span> <span class="tlaGNC">           8 :         function scanClassAtom(): string {</span></span>
<span id="L3424"><span class="lineNum">    3424</span> <span class="tlaGNC">           8 :             if (charCodeChecked(pos) === CharacterCodes.backslash) {</span></span>
<span id="L3425"><span class="lineNum">    3425</span> <span class="tlaGNC">           8 :                 pos++;</span></span>
<span id="L3426"><span class="lineNum">    3426</span> <span class="tlaGNC">           8 :                 const ch = charCodeChecked(pos);</span></span>
<span id="L3427"><span class="lineNum">    3427</span> <span class="tlaGNC">           8 :                 switch (ch) {</span></span>
<span id="L3428"><span class="lineNum">    3428</span> <span class="tlaGNC">           8 :                     case CharacterCodes.b:</span></span>
<span id="L3429"><span class="lineNum">    3429</span> <span class="tlaGNC">           8 :                         pos++;</span></span>
<span id="L3430"><span class="lineNum">    3430</span> <span class="tlaGNC">           8 :                         return &quot;\b&quot;;</span></span>
<span id="L3431"><span class="lineNum">    3431</span> <span class="tlaGNC">           8 :                     case CharacterCodes.minus:</span></span>
<span id="L3432"><span class="lineNum">    3432</span> <span class="tlaGNC">           8 :                         pos++;</span></span>
<span id="L3433"><span class="lineNum">    3433</span> <span class="tlaGNC">           8 :                         return String.fromCharCode(ch);</span></span>
<span id="L3434"><span class="lineNum">    3434</span> <span class="tlaGNC">           8 :                     default:</span></span>
<span id="L3435"><span class="lineNum">    3435</span> <span class="tlaGNC">           8 :                         if (scanCharacterClassEscape()) {</span></span>
<span id="L3436"><span class="lineNum">    3436</span> <span class="tlaGNC">           8 :                             return &quot;&quot;;</span></span>
<span id="L3437"><span class="lineNum">    3437</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L3438"><span class="lineNum">    3438</span> <span class="tlaGNC">           8 :                         return scanCharacterEscape(/*atomEscape*/ false);</span></span>
<span id="L3439"><span class="lineNum">    3439</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L3440"><span class="lineNum">    3440</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L3441"><span class="lineNum">    3441</span> <span class="tlaGNC">           8 :             else {</span></span>
<span id="L3442"><span class="lineNum">    3442</span> <span class="tlaGNC">           8 :                 return scanSourceCharacter();</span></span>
<span id="L3443"><span class="lineNum">    3443</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L3444"><span class="lineNum">    3444</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L3445"><span class="lineNum">    3445</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3446"><span class="lineNum">    3446</span> <span class="tlaGNC">           8 :         // CharacterClassEscape ::=</span></span>
<span id="L3447"><span class="lineNum">    3447</span> <span class="tlaGNC">           8 :         //     | 'd' | 'D' | 's' | 'S' | 'w' | 'W'</span></span>
<span id="L3448"><span class="lineNum">    3448</span> <span class="tlaGNC">           8 :         //     | [+UnicodeMode] ('P' | 'p') '{' UnicodePropertyValueExpression '}'</span></span>
<span id="L3449"><span class="lineNum">    3449</span> <span class="tlaGNC">           8 :         function scanCharacterClassEscape(): boolean {</span></span>
<span id="L3450"><span class="lineNum">    3450</span> <span class="tlaGNC">           8 :             Debug.assertEqual(charCodeUnchecked(pos - 1), CharacterCodes.backslash);</span></span>
<span id="L3451"><span class="lineNum">    3451</span> <span class="tlaGNC">           8 :             let isCharacterComplement = false;</span></span>
<span id="L3452"><span class="lineNum">    3452</span> <span class="tlaGNC">           8 :             const start = pos - 1;</span></span>
<span id="L3453"><span class="lineNum">    3453</span> <span class="tlaGNC">           8 :             const ch = charCodeChecked(pos);</span></span>
<span id="L3454"><span class="lineNum">    3454</span> <span class="tlaGNC">           8 :             switch (ch) {</span></span>
<span id="L3455"><span class="lineNum">    3455</span> <span class="tlaGNC">           8 :                 case CharacterCodes.d:</span></span>
<span id="L3456"><span class="lineNum">    3456</span> <span class="tlaGNC">           8 :                 case CharacterCodes.D:</span></span>
<span id="L3457"><span class="lineNum">    3457</span> <span class="tlaGNC">           8 :                 case CharacterCodes.s:</span></span>
<span id="L3458"><span class="lineNum">    3458</span> <span class="tlaGNC">           8 :                 case CharacterCodes.S:</span></span>
<span id="L3459"><span class="lineNum">    3459</span> <span class="tlaGNC">           8 :                 case CharacterCodes.w:</span></span>
<span id="L3460"><span class="lineNum">    3460</span> <span class="tlaGNC">           8 :                 case CharacterCodes.W:</span></span>
<span id="L3461"><span class="lineNum">    3461</span> <span class="tlaGNC">           8 :                     pos++;</span></span>
<span id="L3462"><span class="lineNum">    3462</span> <span class="tlaGNC">           8 :                     return true;</span></span>
<span id="L3463"><span class="lineNum">    3463</span> <span class="tlaGNC">           8 :                 case CharacterCodes.P:</span></span>
<span id="L3464"><span class="lineNum">    3464</span> <span class="tlaGNC">           8 :                     isCharacterComplement = true;</span></span>
<span id="L3465"><span class="lineNum">    3465</span> <span class="tlaGNC">           8 :                 // falls through</span></span>
<span id="L3466"><span class="lineNum">    3466</span> <span class="tlaGNC">           8 :                 case CharacterCodes.p:</span></span>
<span id="L3467"><span class="lineNum">    3467</span> <span class="tlaGNC">           8 :                     pos++;</span></span>
<span id="L3468"><span class="lineNum">    3468</span> <span class="tlaGNC">           8 :                     if (charCodeChecked(pos) === CharacterCodes.openBrace) {</span></span>
<span id="L3469"><span class="lineNum">    3469</span> <span class="tlaGNC">           8 :                         pos++;</span></span>
<span id="L3470"><span class="lineNum">    3470</span> <span class="tlaGNC">           8 :                         const propertyNameOrValueStart = pos;</span></span>
<span id="L3471"><span class="lineNum">    3471</span> <span class="tlaGNC">           8 :                         const propertyNameOrValue = scanWordCharacters();</span></span>
<span id="L3472"><span class="lineNum">    3472</span> <span class="tlaGNC">           8 :                         if (charCodeChecked(pos) === CharacterCodes.equals) {</span></span>
<span id="L3473"><span class="lineNum">    3473</span> <span class="tlaGNC">           8 :                             const propertyName = nonBinaryUnicodeProperties.get(propertyNameOrValue);</span></span>
<span id="L3474"><span class="lineNum">    3474</span> <span class="tlaGNC">           8 :                             if (pos === propertyNameOrValueStart) {</span></span>
<span id="L3475"><span class="lineNum">    3475</span> <span class="tlaGNC">           8 :                                 error(Diagnostics.Expected_a_Unicode_property_name);</span></span>
<span id="L3476"><span class="lineNum">    3476</span> <span class="tlaGNC">           8 :                             }</span></span>
<span id="L3477"><span class="lineNum">    3477</span> <span class="tlaGNC">           8 :                             else if (propertyName === undefined) {</span></span>
<span id="L3478"><span class="lineNum">    3478</span> <span class="tlaGNC">           8 :                                 error(Diagnostics.Unknown_Unicode_property_name, propertyNameOrValueStart, pos - propertyNameOrValueStart);</span></span>
<span id="L3479"><span class="lineNum">    3479</span> <span class="tlaGNC">           8 :                                 const suggestion = getSpellingSuggestion(propertyNameOrValue, nonBinaryUnicodeProperties.keys(), identity);</span></span>
<span id="L3480"><span class="lineNum">    3480</span> <span class="tlaGNC">           8 :                                 if (suggestion) {</span></span>
<span id="L3481"><span class="lineNum">    3481</span> <span class="tlaGNC">           8 :                                     error(Diagnostics.Did_you_mean_0, propertyNameOrValueStart, pos - propertyNameOrValueStart, suggestion);</span></span>
<span id="L3482"><span class="lineNum">    3482</span> <span class="tlaGNC">           8 :                                 }</span></span>
<span id="L3483"><span class="lineNum">    3483</span> <span class="tlaGNC">           8 :                             }</span></span>
<span id="L3484"><span class="lineNum">    3484</span> <span class="tlaGNC">           8 :                             pos++;</span></span>
<span id="L3485"><span class="lineNum">    3485</span> <span class="tlaGNC">           8 :                             const propertyValueStart = pos;</span></span>
<span id="L3486"><span class="lineNum">    3486</span> <span class="tlaGNC">           8 :                             const propertyValue = scanWordCharacters();</span></span>
<span id="L3487"><span class="lineNum">    3487</span> <span class="tlaGNC">           8 :                             if (pos === propertyValueStart) {</span></span>
<span id="L3488"><span class="lineNum">    3488</span> <span class="tlaGNC">           8 :                                 error(Diagnostics.Expected_a_Unicode_property_value);</span></span>
<span id="L3489"><span class="lineNum">    3489</span> <span class="tlaGNC">           8 :                             }</span></span>
<span id="L3490"><span class="lineNum">    3490</span> <span class="tlaGNC">           8 :                             else if (propertyName !== undefined &amp;&amp; !valuesOfNonBinaryUnicodeProperties[propertyName].has(propertyValue)) {</span></span>
<span id="L3491"><span class="lineNum">    3491</span> <span class="tlaGNC">           8 :                                 error(Diagnostics.Unknown_Unicode_property_value, propertyValueStart, pos - propertyValueStart);</span></span>
<span id="L3492"><span class="lineNum">    3492</span> <span class="tlaGNC">           8 :                                 const suggestion = getSpellingSuggestion(propertyValue, valuesOfNonBinaryUnicodeProperties[propertyName], identity);</span></span>
<span id="L3493"><span class="lineNum">    3493</span> <span class="tlaGNC">           8 :                                 if (suggestion) {</span></span>
<span id="L3494"><span class="lineNum">    3494</span> <span class="tlaGNC">           8 :                                     error(Diagnostics.Did_you_mean_0, propertyValueStart, pos - propertyValueStart, suggestion);</span></span>
<span id="L3495"><span class="lineNum">    3495</span> <span class="tlaGNC">           8 :                                 }</span></span>
<span id="L3496"><span class="lineNum">    3496</span> <span class="tlaGNC">           8 :                             }</span></span>
<span id="L3497"><span class="lineNum">    3497</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L3498"><span class="lineNum">    3498</span> <span class="tlaGNC">           8 :                         else {</span></span>
<span id="L3499"><span class="lineNum">    3499</span> <span class="tlaGNC">           8 :                             if (pos === propertyNameOrValueStart) {</span></span>
<span id="L3500"><span class="lineNum">    3500</span> <span class="tlaGNC">           8 :                                 error(Diagnostics.Expected_a_Unicode_property_name_or_value);</span></span>
<span id="L3501"><span class="lineNum">    3501</span> <span class="tlaGNC">           8 :                             }</span></span>
<span id="L3502"><span class="lineNum">    3502</span> <span class="tlaGNC">           8 :                             else if (binaryUnicodePropertiesOfStrings.has(propertyNameOrValue)) {</span></span>
<span id="L3503"><span class="lineNum">    3503</span> <span class="tlaGNC">           8 :                                 if (!unicodeSetsMode) {</span></span>
<span id="L3504"><span class="lineNum">    3504</span> <span class="tlaGNC">           8 :                                     error(Diagnostics.Any_Unicode_property_that_would_possibly_match_more_than_a_single_character_is_only_available_when_the_Unicode_Sets_v_flag_is_set, propertyNameOrValueStart, pos - propertyNameOrValueStart);</span></span>
<span id="L3505"><span class="lineNum">    3505</span> <span class="tlaGNC">           8 :                                 }</span></span>
<span id="L3506"><span class="lineNum">    3506</span> <span class="tlaGNC">           8 :                                 else if (isCharacterComplement) {</span></span>
<span id="L3507"><span class="lineNum">    3507</span> <span class="tlaGNC">           8 :                                     error(Diagnostics.Anything_that_would_possibly_match_more_than_a_single_character_is_invalid_inside_a_negated_character_class, propertyNameOrValueStart, pos - propertyNameOrValueStart);</span></span>
<span id="L3508"><span class="lineNum">    3508</span> <span class="tlaGNC">           8 :                                 }</span></span>
<span id="L3509"><span class="lineNum">    3509</span> <span class="tlaGNC">           8 :                                 else {</span></span>
<span id="L3510"><span class="lineNum">    3510</span> <span class="tlaGNC">           8 :                                     mayContainStrings = true;</span></span>
<span id="L3511"><span class="lineNum">    3511</span> <span class="tlaGNC">           8 :                                 }</span></span>
<span id="L3512"><span class="lineNum">    3512</span> <span class="tlaGNC">           8 :                             }</span></span>
<span id="L3513"><span class="lineNum">    3513</span> <span class="tlaGNC">           8 :                             else if (!valuesOfNonBinaryUnicodeProperties.General_Category.has(propertyNameOrValue) &amp;&amp; !binaryUnicodeProperties.has(propertyNameOrValue)) {</span></span>
<span id="L3514"><span class="lineNum">    3514</span> <span class="tlaGNC">           8 :                                 error(Diagnostics.Unknown_Unicode_property_name_or_value, propertyNameOrValueStart, pos - propertyNameOrValueStart);</span></span>
<span id="L3515"><span class="lineNum">    3515</span> <span class="tlaGNC">           8 :                                 const suggestion = getSpellingSuggestion(propertyNameOrValue, [...valuesOfNonBinaryUnicodeProperties.General_Category, ...binaryUnicodeProperties, ...binaryUnicodePropertiesOfStrings], identity);</span></span>
<span id="L3516"><span class="lineNum">    3516</span> <span class="tlaGNC">           8 :                                 if (suggestion) {</span></span>
<span id="L3517"><span class="lineNum">    3517</span> <span class="tlaGNC">           8 :                                     error(Diagnostics.Did_you_mean_0, propertyNameOrValueStart, pos - propertyNameOrValueStart, suggestion);</span></span>
<span id="L3518"><span class="lineNum">    3518</span> <span class="tlaGNC">           8 :                                 }</span></span>
<span id="L3519"><span class="lineNum">    3519</span> <span class="tlaGNC">           8 :                             }</span></span>
<span id="L3520"><span class="lineNum">    3520</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L3521"><span class="lineNum">    3521</span> <span class="tlaGNC">           8 :                         scanExpectedChar(CharacterCodes.closeBrace);</span></span>
<span id="L3522"><span class="lineNum">    3522</span> <span class="tlaGNC">           8 :                         if (!anyUnicodeMode) {</span></span>
<span id="L3523"><span class="lineNum">    3523</span> <span class="tlaGNC">           8 :                             error(Diagnostics.Unicode_property_value_expressions_are_only_available_when_the_Unicode_u_flag_or_the_Unicode_Sets_v_flag_is_set, start, pos - start);</span></span>
<span id="L3524"><span class="lineNum">    3524</span> <span class="tlaGNC">           8 :                         }</span></span>
<span id="L3525"><span class="lineNum">    3525</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L3526"><span class="lineNum">    3526</span> <span class="tlaGNC">           8 :                     else if (anyUnicodeModeOrNonAnnexB) {</span></span>
<span id="L3527"><span class="lineNum">    3527</span> <span class="tlaGNC">           8 :                         error(Diagnostics._0_must_be_followed_by_a_Unicode_property_value_expression_enclosed_in_braces, pos - 2, 2, String.fromCharCode(ch));</span></span>
<span id="L3528"><span class="lineNum">    3528</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L3529"><span class="lineNum">    3529</span> <span class="tlaGNC">           8 :                     else {</span></span>
<span id="L3530"><span class="lineNum">    3530</span> <span class="tlaGNC">           8 :                         pos--;</span></span>
<span id="L3531"><span class="lineNum">    3531</span> <span class="tlaGNC">           8 :                         return false;</span></span>
<span id="L3532"><span class="lineNum">    3532</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L3533"><span class="lineNum">    3533</span> <span class="tlaGNC">           8 :                     return true;</span></span>
<span id="L3534"><span class="lineNum">    3534</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L3535"><span class="lineNum">    3535</span> <span class="tlaGNC">           8 :             return false;</span></span>
<span id="L3536"><span class="lineNum">    3536</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L3537"><span class="lineNum">    3537</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3538"><span class="lineNum">    3538</span> <span class="tlaGNC">           8 :         function scanWordCharacters(): string {</span></span>
<span id="L3539"><span class="lineNum">    3539</span> <span class="tlaGNC">           8 :             let value = &quot;&quot;;</span></span>
<span id="L3540"><span class="lineNum">    3540</span> <span class="tlaGNC">           8 :             while (true) {</span></span>
<span id="L3541"><span class="lineNum">    3541</span> <span class="tlaGNC">           8 :                 const ch = charCodeChecked(pos);</span></span>
<span id="L3542"><span class="lineNum">    3542</span> <span class="tlaGNC">           8 :                 if (ch === CharacterCodes.EOF || !isWordCharacter(ch)) {</span></span>
<span id="L3543"><span class="lineNum">    3543</span> <span class="tlaGNC">           8 :                     break;</span></span>
<span id="L3544"><span class="lineNum">    3544</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L3545"><span class="lineNum">    3545</span> <span class="tlaGNC">           8 :                 value += String.fromCharCode(ch);</span></span>
<span id="L3546"><span class="lineNum">    3546</span> <span class="tlaGNC">           8 :                 pos++;</span></span>
<span id="L3547"><span class="lineNum">    3547</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L3548"><span class="lineNum">    3548</span> <span class="tlaGNC">           8 :             return value;</span></span>
<span id="L3549"><span class="lineNum">    3549</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L3550"><span class="lineNum">    3550</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3551"><span class="lineNum">    3551</span> <span class="tlaGNC">           8 :         function scanSourceCharacter(): string {</span></span>
<span id="L3552"><span class="lineNum">    3552</span> <span class="tlaGNC">           8 :             const size = anyUnicodeMode ? charSize(charCodeChecked(pos)) : 1;</span></span>
<span id="L3553"><span class="lineNum">    3553</span> <span class="tlaGNC">           8 :             pos += size;</span></span>
<span id="L3554"><span class="lineNum">    3554</span> <span class="tlaGNC">           8 :             return size &gt; 0 ? text.substring(pos - size, pos) : &quot;&quot;;</span></span>
<span id="L3555"><span class="lineNum">    3555</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L3556"><span class="lineNum">    3556</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3557"><span class="lineNum">    3557</span> <span class="tlaGNC">           8 :         function scanExpectedChar(ch: CharacterCodes) {</span></span>
<span id="L3558"><span class="lineNum">    3558</span> <span class="tlaGNC">           8 :             if (charCodeChecked(pos) === ch) {</span></span>
<span id="L3559"><span class="lineNum">    3559</span> <span class="tlaGNC">           8 :                 pos++;</span></span>
<span id="L3560"><span class="lineNum">    3560</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L3561"><span class="lineNum">    3561</span> <span class="tlaGNC">           8 :             else {</span></span>
<span id="L3562"><span class="lineNum">    3562</span> <span class="tlaGNC">           8 :                 error(Diagnostics._0_expected, pos, 0, String.fromCharCode(ch));</span></span>
<span id="L3563"><span class="lineNum">    3563</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L3564"><span class="lineNum">    3564</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L3565"><span class="lineNum">    3565</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3566"><span class="lineNum">    3566</span> <span class="tlaGNC">           8 :         scanDisjunction(/*isInGroup*/ false);</span></span>
<span id="L3567"><span class="lineNum">    3567</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3568"><span class="lineNum">    3568</span> <span class="tlaGNC">           8 :         forEach(groupNameReferences, reference =&gt; {</span></span>
<span id="L3569"><span class="lineNum">    3569</span> <span class="tlaGNC">           8 :             if (!groupSpecifiers?.has(reference.name)) {</span></span>
<span id="L3570"><span class="lineNum">    3570</span> <span class="tlaGNC">           8 :                 error(Diagnostics.There_is_no_capturing_group_named_0_in_this_regular_expression, reference.pos, reference.end - reference.pos, reference.name);</span></span>
<span id="L3571"><span class="lineNum">    3571</span> <span class="tlaGNC">           8 :                 if (groupSpecifiers) {</span></span>
<span id="L3572"><span class="lineNum">    3572</span> <span class="tlaGNC">           8 :                     const suggestion = getSpellingSuggestion(reference.name, groupSpecifiers, identity);</span></span>
<span id="L3573"><span class="lineNum">    3573</span> <span class="tlaGNC">           8 :                     if (suggestion) {</span></span>
<span id="L3574"><span class="lineNum">    3574</span> <span class="tlaGNC">           8 :                         error(Diagnostics.Did_you_mean_0, reference.pos, reference.end - reference.pos, suggestion);</span></span>
<span id="L3575"><span class="lineNum">    3575</span> <span class="tlaGNC">           8 :                     }</span></span>
<span id="L3576"><span class="lineNum">    3576</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L3577"><span class="lineNum">    3577</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L3578"><span class="lineNum">    3578</span> <span class="tlaGNC">           8 :         });</span></span>
<span id="L3579"><span class="lineNum">    3579</span> <span class="tlaGNC">           8 :         forEach(decimalEscapes, escape =&gt; {</span></span>
<span id="L3580"><span class="lineNum">    3580</span> <span class="tlaGNC">           8 :             // Although a DecimalEscape with a value greater than the number of capturing groups</span></span>
<span id="L3581"><span class="lineNum">    3581</span> <span class="tlaGNC">           8 :             // is treated as either a LegacyOctalEscapeSequence or an IdentityEscape in Annex B,</span></span>
<span id="L3582"><span class="lineNum">    3582</span> <span class="tlaGNC">           8 :             // an error is nevertheless reported since it's most likely a mistake.</span></span>
<span id="L3583"><span class="lineNum">    3583</span> <span class="tlaGNC">           8 :             if (escape.value &gt; numberOfCapturingGroups) {</span></span>
<span id="L3584"><span class="lineNum">    3584</span> <span class="tlaGNC">           8 :                 if (numberOfCapturingGroups) {</span></span>
<span id="L3585"><span class="lineNum">    3585</span> <span class="tlaGNC">           8 :                     error(Diagnostics.This_backreference_refers_to_a_group_that_does_not_exist_There_are_only_0_capturing_groups_in_this_regular_expression, escape.pos, escape.end - escape.pos, numberOfCapturingGroups);</span></span>
<span id="L3586"><span class="lineNum">    3586</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L3587"><span class="lineNum">    3587</span> <span class="tlaGNC">           8 :                 else {</span></span>
<span id="L3588"><span class="lineNum">    3588</span> <span class="tlaGNC">           8 :                     error(Diagnostics.This_backreference_refers_to_a_group_that_does_not_exist_There_are_no_capturing_groups_in_this_regular_expression, escape.pos, escape.end - escape.pos);</span></span>
<span id="L3589"><span class="lineNum">    3589</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L3590"><span class="lineNum">    3590</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L3591"><span class="lineNum">    3591</span> <span class="tlaGNC">           8 :         });</span></span>
<span id="L3592"><span class="lineNum">    3592</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L3593"><span class="lineNum">    3593</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3594"><span class="lineNum">    3594</span> <span class="tlaGNC">           8 :     function checkRegularExpressionFlagAvailability(flag: RegularExpressionFlags, size: number) {</span></span>
<span id="L3595"><span class="lineNum">    3595</span> <span class="tlaGNC">           8 :         const availableFrom = regExpFlagToFirstAvailableLanguageVersion.get(flag) as ScriptTarget | undefined;</span></span>
<span id="L3596"><span class="lineNum">    3596</span> <span class="tlaGNC">           8 :         if (availableFrom &amp;&amp; languageVersion &lt; availableFrom) {</span></span>
<span id="L3597"><span class="lineNum">    3597</span> <span class="tlaGNC">           8 :             error(Diagnostics.This_regular_expression_flag_is_only_available_when_targeting_0_or_later, pos, size, getNameOfScriptTarget(availableFrom));</span></span>
<span id="L3598"><span class="lineNum">    3598</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L3599"><span class="lineNum">    3599</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L3600"><span class="lineNum">    3600</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3601"><span class="lineNum">    3601</span> <span class="tlaGNC">           8 :     function appendIfCommentDirective(</span></span>
<span id="L3602"><span class="lineNum">    3602</span> <span class="tlaGNC">           8 :         commentDirectives: CommentDirective[] | undefined,</span></span>
<span id="L3603"><span class="lineNum">    3603</span> <span class="tlaGNC">           8 :         text: string,</span></span>
<span id="L3604"><span class="lineNum">    3604</span> <span class="tlaGNC">           8 :         commentDirectiveRegEx: RegExp,</span></span>
<span id="L3605"><span class="lineNum">    3605</span> <span class="tlaGNC">           8 :         lineStart: number,</span></span>
<span id="L3606"><span class="lineNum">    3606</span> <span class="tlaGNC">           8 :     ) {</span></span>
<span id="L3607"><span class="lineNum">    3607</span> <span class="tlaGNC">           8 :         const type = getDirectiveFromComment(text.trimStart(), commentDirectiveRegEx);</span></span>
<span id="L3608"><span class="lineNum">    3608</span> <span class="tlaGNC">           8 :         if (type === undefined) {</span></span>
<span id="L3609"><span class="lineNum">    3609</span> <span class="tlaGNC">           8 :             return commentDirectives;</span></span>
<span id="L3610"><span class="lineNum">    3610</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L3611"><span class="lineNum">    3611</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3612"><span class="lineNum">    3612</span> <span class="tlaGNC">           8 :         return append(</span></span>
<span id="L3613"><span class="lineNum">    3613</span> <span class="tlaGNC">           8 :             commentDirectives,</span></span>
<span id="L3614"><span class="lineNum">    3614</span> <span class="tlaGNC">           8 :             {</span></span>
<span id="L3615"><span class="lineNum">    3615</span> <span class="tlaGNC">           8 :                 range: { pos: lineStart, end: pos },</span></span>
<span id="L3616"><span class="lineNum">    3616</span> <span class="tlaGNC">           8 :                 type,</span></span>
<span id="L3617"><span class="lineNum">    3617</span> <span class="tlaGNC">           8 :             },</span></span>
<span id="L3618"><span class="lineNum">    3618</span> <span class="tlaGNC">           8 :         );</span></span>
<span id="L3619"><span class="lineNum">    3619</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L3620"><span class="lineNum">    3620</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3621"><span class="lineNum">    3621</span> <span class="tlaGNC">           8 :     function getDirectiveFromComment(text: string, commentDirectiveRegEx: RegExp) {</span></span>
<span id="L3622"><span class="lineNum">    3622</span> <span class="tlaGNC">           8 :         const match = commentDirectiveRegEx.exec(text);</span></span>
<span id="L3623"><span class="lineNum">    3623</span> <span class="tlaGNC">           8 :         if (!match) {</span></span>
<span id="L3624"><span class="lineNum">    3624</span> <span class="tlaGNC">           8 :             return undefined;</span></span>
<span id="L3625"><span class="lineNum">    3625</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L3626"><span class="lineNum">    3626</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3627"><span class="lineNum">    3627</span> <span class="tlaGNC">           8 :         switch (match[1]) {</span></span>
<span id="L3628"><span class="lineNum">    3628</span> <span class="tlaGNC">           8 :             case &quot;ts-expect-error&quot;:</span></span>
<span id="L3629"><span class="lineNum">    3629</span> <span class="tlaGNC">           8 :                 return CommentDirectiveType.ExpectError;</span></span>
<span id="L3630"><span class="lineNum">    3630</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3631"><span class="lineNum">    3631</span> <span class="tlaGNC">           8 :             case &quot;ts-ignore&quot;:</span></span>
<span id="L3632"><span class="lineNum">    3632</span> <span class="tlaGNC">           8 :                 return CommentDirectiveType.Ignore;</span></span>
<span id="L3633"><span class="lineNum">    3633</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L3634"><span class="lineNum">    3634</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3635"><span class="lineNum">    3635</span> <span class="tlaGNC">           8 :         return undefined;</span></span>
<span id="L3636"><span class="lineNum">    3636</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L3637"><span class="lineNum">    3637</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3638"><span class="lineNum">    3638</span> <span class="tlaGNC">           8 :     /**</span></span>
<span id="L3639"><span class="lineNum">    3639</span> <span class="tlaGNC">           8 :      * Unconditionally back up and scan a template expression portion.</span></span>
<span id="L3640"><span class="lineNum">    3640</span> <span class="tlaGNC">           8 :      */</span></span>
<span id="L3641"><span class="lineNum">    3641</span> <span class="tlaGNC">           8 :     function reScanTemplateToken(isTaggedTemplate: boolean): SyntaxKind {</span></span>
<span id="L3642"><span class="lineNum">    3642</span> <span class="tlaGNC">           8 :         pos = tokenStart;</span></span>
<span id="L3643"><span class="lineNum">    3643</span> <span class="tlaGNC">           8 :         return token = scanTemplateAndSetTokenValue(!isTaggedTemplate);</span></span>
<span id="L3644"><span class="lineNum">    3644</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L3645"><span class="lineNum">    3645</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3646"><span class="lineNum">    3646</span> <span class="tlaGNC">           8 :     function reScanTemplateHeadOrNoSubstitutionTemplate(): SyntaxKind {</span></span>
<span id="L3647"><span class="lineNum">    3647</span> <span class="tlaGNC">           8 :         pos = tokenStart;</span></span>
<span id="L3648"><span class="lineNum">    3648</span> <span class="tlaGNC">           8 :         return token = scanTemplateAndSetTokenValue(/*shouldEmitInvalidEscapeError*/ true);</span></span>
<span id="L3649"><span class="lineNum">    3649</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L3650"><span class="lineNum">    3650</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3651"><span class="lineNum">    3651</span> <span class="tlaGNC">           8 :     function reScanJsxToken(allowMultilineJsxText = true): JsxTokenSyntaxKind {</span></span>
<span id="L3652"><span class="lineNum">    3652</span> <span class="tlaGNC">           8 :         pos = tokenStart = fullStartPos;</span></span>
<span id="L3653"><span class="lineNum">    3653</span> <span class="tlaGNC">           8 :         return token = scanJsxToken(allowMultilineJsxText);</span></span>
<span id="L3654"><span class="lineNum">    3654</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L3655"><span class="lineNum">    3655</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3656"><span class="lineNum">    3656</span> <span class="tlaGNC">           8 :     function reScanLessThanToken(): SyntaxKind {</span></span>
<span id="L3657"><span class="lineNum">    3657</span> <span class="tlaGNC">           8 :         if (token === SyntaxKind.LessThanLessThanToken) {</span></span>
<span id="L3658"><span class="lineNum">    3658</span> <span class="tlaGNC">           8 :             pos = tokenStart + 1;</span></span>
<span id="L3659"><span class="lineNum">    3659</span> <span class="tlaGNC">           8 :             return token = SyntaxKind.LessThanToken;</span></span>
<span id="L3660"><span class="lineNum">    3660</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L3661"><span class="lineNum">    3661</span> <span class="tlaGNC">           8 :         return token;</span></span>
<span id="L3662"><span class="lineNum">    3662</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L3663"><span class="lineNum">    3663</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3664"><span class="lineNum">    3664</span> <span class="tlaGNC">           8 :     function reScanHashToken(): SyntaxKind {</span></span>
<span id="L3665"><span class="lineNum">    3665</span> <span class="tlaGNC">           8 :         if (token === SyntaxKind.PrivateIdentifier) {</span></span>
<span id="L3666"><span class="lineNum">    3666</span> <span class="tlaGNC">           8 :             pos = tokenStart + 1;</span></span>
<span id="L3667"><span class="lineNum">    3667</span> <span class="tlaGNC">           8 :             return token = SyntaxKind.HashToken;</span></span>
<span id="L3668"><span class="lineNum">    3668</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L3669"><span class="lineNum">    3669</span> <span class="tlaGNC">           8 :         return token;</span></span>
<span id="L3670"><span class="lineNum">    3670</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L3671"><span class="lineNum">    3671</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3672"><span class="lineNum">    3672</span> <span class="tlaGNC">           8 :     function reScanQuestionToken(): SyntaxKind {</span></span>
<span id="L3673"><span class="lineNum">    3673</span> <span class="tlaGNC">           8 :         Debug.assert(token === SyntaxKind.QuestionQuestionToken, &quot;'reScanQuestionToken' should only be called on a '??'&quot;);</span></span>
<span id="L3674"><span class="lineNum">    3674</span> <span class="tlaGNC">           8 :         pos = tokenStart + 1;</span></span>
<span id="L3675"><span class="lineNum">    3675</span> <span class="tlaGNC">           8 :         return token = SyntaxKind.QuestionToken;</span></span>
<span id="L3676"><span class="lineNum">    3676</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L3677"><span class="lineNum">    3677</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3678"><span class="lineNum">    3678</span> <span class="tlaGNC">           8 :     function scanJsxToken(allowMultilineJsxText = true): JsxTokenSyntaxKind {</span></span>
<span id="L3679"><span class="lineNum">    3679</span> <span class="tlaGNC">           8 :         fullStartPos = tokenStart = pos;</span></span>
<span id="L3680"><span class="lineNum">    3680</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3681"><span class="lineNum">    3681</span> <span class="tlaGNC">           8 :         if (pos &gt;= end) {</span></span>
<span id="L3682"><span class="lineNum">    3682</span> <span class="tlaGNC">           8 :             return token = SyntaxKind.EndOfFileToken;</span></span>
<span id="L3683"><span class="lineNum">    3683</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L3684"><span class="lineNum">    3684</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3685"><span class="lineNum">    3685</span> <span class="tlaGNC">           8 :         let char = charCodeUnchecked(pos);</span></span>
<span id="L3686"><span class="lineNum">    3686</span> <span class="tlaGNC">           8 :         if (char === CharacterCodes.lessThan) {</span></span>
<span id="L3687"><span class="lineNum">    3687</span> <span class="tlaGNC">           8 :             if (charCodeUnchecked(pos + 1) === CharacterCodes.slash) {</span></span>
<span id="L3688"><span class="lineNum">    3688</span> <span class="tlaGNC">           8 :                 pos += 2;</span></span>
<span id="L3689"><span class="lineNum">    3689</span> <span class="tlaGNC">           8 :                 return token = SyntaxKind.LessThanSlashToken;</span></span>
<span id="L3690"><span class="lineNum">    3690</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L3691"><span class="lineNum">    3691</span> <span class="tlaGNC">           8 :             pos++;</span></span>
<span id="L3692"><span class="lineNum">    3692</span> <span class="tlaGNC">           8 :             return token = SyntaxKind.LessThanToken;</span></span>
<span id="L3693"><span class="lineNum">    3693</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L3694"><span class="lineNum">    3694</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3695"><span class="lineNum">    3695</span> <span class="tlaGNC">           8 :         if (char === CharacterCodes.openBrace) {</span></span>
<span id="L3696"><span class="lineNum">    3696</span> <span class="tlaGNC">           8 :             pos++;</span></span>
<span id="L3697"><span class="lineNum">    3697</span> <span class="tlaGNC">           8 :             return token = SyntaxKind.OpenBraceToken;</span></span>
<span id="L3698"><span class="lineNum">    3698</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L3699"><span class="lineNum">    3699</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3700"><span class="lineNum">    3700</span> <span class="tlaGNC">           8 :         // First non-whitespace character on this line.</span></span>
<span id="L3701"><span class="lineNum">    3701</span> <span class="tlaGNC">           8 :         let firstNonWhitespace = 0;</span></span>
<span id="L3702"><span class="lineNum">    3702</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3703"><span class="lineNum">    3703</span> <span class="tlaGNC">           8 :         // These initial values are special because the first line is:</span></span>
<span id="L3704"><span class="lineNum">    3704</span> <span class="tlaGNC">           8 :         // firstNonWhitespace = 0 to indicate that we want leading whitespace,</span></span>
<span id="L3705"><span class="lineNum">    3705</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3706"><span class="lineNum">    3706</span> <span class="tlaGNC">           8 :         while (pos &lt; end) {</span></span>
<span id="L3707"><span class="lineNum">    3707</span> <span class="tlaGNC">           8 :             char = charCodeUnchecked(pos);</span></span>
<span id="L3708"><span class="lineNum">    3708</span> <span class="tlaGNC">           8 :             if (char === CharacterCodes.openBrace) {</span></span>
<span id="L3709"><span class="lineNum">    3709</span> <span class="tlaGNC">           8 :                 break;</span></span>
<span id="L3710"><span class="lineNum">    3710</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L3711"><span class="lineNum">    3711</span> <span class="tlaGNC">           8 :             if (char === CharacterCodes.lessThan) {</span></span>
<span id="L3712"><span class="lineNum">    3712</span> <span class="tlaGNC">           8 :                 if (isConflictMarkerTrivia(text, pos)) {</span></span>
<span id="L3713"><span class="lineNum">    3713</span> <span class="tlaGNC">           8 :                     pos = scanConflictMarkerTrivia(text, pos, error);</span></span>
<span id="L3714"><span class="lineNum">    3714</span> <span class="tlaGNC">           8 :                     return token = SyntaxKind.ConflictMarkerTrivia;</span></span>
<span id="L3715"><span class="lineNum">    3715</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L3716"><span class="lineNum">    3716</span> <span class="tlaGNC">           8 :                 break;</span></span>
<span id="L3717"><span class="lineNum">    3717</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L3718"><span class="lineNum">    3718</span> <span class="tlaGNC">           8 :             if (char === CharacterCodes.greaterThan) {</span></span>
<span id="L3719"><span class="lineNum">    3719</span> <span class="tlaGNC">           8 :                 error(Diagnostics.Unexpected_token_Did_you_mean_or_gt, pos, 1);</span></span>
<span id="L3720"><span class="lineNum">    3720</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L3721"><span class="lineNum">    3721</span> <span class="tlaGNC">           8 :             if (char === CharacterCodes.closeBrace) {</span></span>
<span id="L3722"><span class="lineNum">    3722</span> <span class="tlaGNC">           8 :                 error(Diagnostics.Unexpected_token_Did_you_mean_or_rbrace, pos, 1);</span></span>
<span id="L3723"><span class="lineNum">    3723</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L3724"><span class="lineNum">    3724</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3725"><span class="lineNum">    3725</span> <span class="tlaGNC">           8 :             // FirstNonWhitespace is 0, then we only see whitespaces so far. If we see a linebreak, we want to ignore that whitespaces.</span></span>
<span id="L3726"><span class="lineNum">    3726</span> <span class="tlaGNC">           8 :             // i.e (- : whitespace)</span></span>
<span id="L3727"><span class="lineNum">    3727</span> <span class="tlaGNC">           8 :             //      &lt;div&gt;----</span></span>
<span id="L3728"><span class="lineNum">    3728</span> <span class="tlaGNC">           8 :             //      &lt;/div&gt; becomes &lt;div&gt;&lt;/div&gt;</span></span>
<span id="L3729"><span class="lineNum">    3729</span> <span class="tlaGNC">           8 :             //</span></span>
<span id="L3730"><span class="lineNum">    3730</span> <span class="tlaGNC">           8 :             //      &lt;div&gt;----&lt;/div&gt; becomes &lt;div&gt;----&lt;/div&gt;</span></span>
<span id="L3731"><span class="lineNum">    3731</span> <span class="tlaGNC">           8 :             if (isLineBreak(char) &amp;&amp; firstNonWhitespace === 0) {</span></span>
<span id="L3732"><span class="lineNum">    3732</span> <span class="tlaGNC">           8 :                 firstNonWhitespace = -1;</span></span>
<span id="L3733"><span class="lineNum">    3733</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L3734"><span class="lineNum">    3734</span> <span class="tlaGNC">           8 :             else if (!allowMultilineJsxText &amp;&amp; isLineBreak(char) &amp;&amp; firstNonWhitespace &gt; 0) {</span></span>
<span id="L3735"><span class="lineNum">    3735</span> <span class="tlaGNC">           8 :                 // Stop JsxText on each line during formatting. This allows the formatter to</span></span>
<span id="L3736"><span class="lineNum">    3736</span> <span class="tlaGNC">           8 :                 // indent each line correctly.</span></span>
<span id="L3737"><span class="lineNum">    3737</span> <span class="tlaGNC">           8 :                 break;</span></span>
<span id="L3738"><span class="lineNum">    3738</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L3739"><span class="lineNum">    3739</span> <span class="tlaGNC">           8 :             else if (!isWhiteSpaceLike(char)) {</span></span>
<span id="L3740"><span class="lineNum">    3740</span> <span class="tlaGNC">           8 :                 firstNonWhitespace = pos;</span></span>
<span id="L3741"><span class="lineNum">    3741</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L3742"><span class="lineNum">    3742</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3743"><span class="lineNum">    3743</span> <span class="tlaGNC">           8 :             pos++;</span></span>
<span id="L3744"><span class="lineNum">    3744</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L3745"><span class="lineNum">    3745</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3746"><span class="lineNum">    3746</span> <span class="tlaGNC">           8 :         tokenValue = text.substring(fullStartPos, pos);</span></span>
<span id="L3747"><span class="lineNum">    3747</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3748"><span class="lineNum">    3748</span> <span class="tlaGNC">           8 :         return firstNonWhitespace === -1 ? SyntaxKind.JsxTextAllWhiteSpaces : SyntaxKind.JsxText;</span></span>
<span id="L3749"><span class="lineNum">    3749</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L3750"><span class="lineNum">    3750</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3751"><span class="lineNum">    3751</span> <span class="tlaGNC">           8 :     // Scans a JSX identifier; these differ from normal identifiers in that</span></span>
<span id="L3752"><span class="lineNum">    3752</span> <span class="tlaGNC">           8 :     // they allow dashes</span></span>
<span id="L3753"><span class="lineNum">    3753</span> <span class="tlaGNC">           8 :     function scanJsxIdentifier(): SyntaxKind {</span></span>
<span id="L3754"><span class="lineNum">    3754</span> <span class="tlaGNC">           8 :         if (tokenIsIdentifierOrKeyword(token)) {</span></span>
<span id="L3755"><span class="lineNum">    3755</span> <span class="tlaGNC">           8 :             // An identifier or keyword has already been parsed - check for a `-` or a single instance of `:` and then append it and</span></span>
<span id="L3756"><span class="lineNum">    3756</span> <span class="tlaGNC">           8 :             // everything after it to the token</span></span>
<span id="L3757"><span class="lineNum">    3757</span> <span class="tlaGNC">           8 :             // Do note that this means that `scanJsxIdentifier` effectively _mutates_ the visible token without advancing to a new token</span></span>
<span id="L3758"><span class="lineNum">    3758</span> <span class="tlaGNC">           8 :             // Any caller should be expecting this behavior and should only read the pos or token value after calling it.</span></span>
<span id="L3759"><span class="lineNum">    3759</span> <span class="tlaGNC">           8 :             while (pos &lt; end) {</span></span>
<span id="L3760"><span class="lineNum">    3760</span> <span class="tlaGNC">           8 :                 const ch = charCodeUnchecked(pos);</span></span>
<span id="L3761"><span class="lineNum">    3761</span> <span class="tlaGNC">           8 :                 if (ch === CharacterCodes.minus) {</span></span>
<span id="L3762"><span class="lineNum">    3762</span> <span class="tlaGNC">           8 :                     tokenValue += &quot;-&quot;;</span></span>
<span id="L3763"><span class="lineNum">    3763</span> <span class="tlaGNC">           8 :                     pos++;</span></span>
<span id="L3764"><span class="lineNum">    3764</span> <span class="tlaGNC">           8 :                     continue;</span></span>
<span id="L3765"><span class="lineNum">    3765</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L3766"><span class="lineNum">    3766</span> <span class="tlaGNC">           8 :                 const oldPos = pos;</span></span>
<span id="L3767"><span class="lineNum">    3767</span> <span class="tlaGNC">           8 :                 tokenValue += scanIdentifierParts(); // reuse `scanIdentifierParts` so unicode escapes are handled</span></span>
<span id="L3768"><span class="lineNum">    3768</span> <span class="tlaGNC">           8 :                 if (pos === oldPos) {</span></span>
<span id="L3769"><span class="lineNum">    3769</span> <span class="tlaGNC">           8 :                     break;</span></span>
<span id="L3770"><span class="lineNum">    3770</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L3771"><span class="lineNum">    3771</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L3772"><span class="lineNum">    3772</span> <span class="tlaGNC">           8 :             return getIdentifierToken();</span></span>
<span id="L3773"><span class="lineNum">    3773</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L3774"><span class="lineNum">    3774</span> <span class="tlaGNC">           8 :         return token;</span></span>
<span id="L3775"><span class="lineNum">    3775</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L3776"><span class="lineNum">    3776</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3777"><span class="lineNum">    3777</span> <span class="tlaGNC">           8 :     function scanJsxAttributeValue(): SyntaxKind {</span></span>
<span id="L3778"><span class="lineNum">    3778</span> <span class="tlaGNC">           8 :         fullStartPos = pos;</span></span>
<span id="L3779"><span class="lineNum">    3779</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3780"><span class="lineNum">    3780</span> <span class="tlaGNC">           8 :         switch (charCodeUnchecked(pos)) {</span></span>
<span id="L3781"><span class="lineNum">    3781</span> <span class="tlaGNC">           8 :             case CharacterCodes.doubleQuote:</span></span>
<span id="L3782"><span class="lineNum">    3782</span> <span class="tlaGNC">           8 :             case CharacterCodes.singleQuote:</span></span>
<span id="L3783"><span class="lineNum">    3783</span> <span class="tlaGNC">           8 :                 tokenValue = scanString(/*jsxAttributeString*/ true);</span></span>
<span id="L3784"><span class="lineNum">    3784</span> <span class="tlaGNC">           8 :                 return token = SyntaxKind.StringLiteral;</span></span>
<span id="L3785"><span class="lineNum">    3785</span> <span class="tlaGNC">           8 :             default:</span></span>
<span id="L3786"><span class="lineNum">    3786</span> <span class="tlaGNC">           8 :                 // If this scans anything other than `{`, it's a parse error.</span></span>
<span id="L3787"><span class="lineNum">    3787</span> <span class="tlaGNC">           8 :                 return scan();</span></span>
<span id="L3788"><span class="lineNum">    3788</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L3789"><span class="lineNum">    3789</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L3790"><span class="lineNum">    3790</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3791"><span class="lineNum">    3791</span> <span class="tlaGNC">           8 :     function reScanJsxAttributeValue(): SyntaxKind {</span></span>
<span id="L3792"><span class="lineNum">    3792</span> <span class="tlaGNC">           8 :         pos = tokenStart = fullStartPos;</span></span>
<span id="L3793"><span class="lineNum">    3793</span> <span class="tlaGNC">           8 :         return scanJsxAttributeValue();</span></span>
<span id="L3794"><span class="lineNum">    3794</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L3795"><span class="lineNum">    3795</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3796"><span class="lineNum">    3796</span> <span class="tlaGNC">           8 :     function scanJSDocCommentTextToken(inBackticks: boolean): JSDocSyntaxKind | SyntaxKind.JSDocCommentTextToken {</span></span>
<span id="L3797"><span class="lineNum">    3797</span> <span class="tlaGNC">           8 :         fullStartPos = tokenStart = pos;</span></span>
<span id="L3798"><span class="lineNum">    3798</span> <span class="tlaGNC">           8 :         tokenFlags = TokenFlags.None;</span></span>
<span id="L3799"><span class="lineNum">    3799</span> <span class="tlaGNC">           8 :         if (pos &gt;= end) {</span></span>
<span id="L3800"><span class="lineNum">    3800</span> <span class="tlaGNC">           8 :             return token = SyntaxKind.EndOfFileToken;</span></span>
<span id="L3801"><span class="lineNum">    3801</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L3802"><span class="lineNum">    3802</span> <span class="tlaGNC">           8 :         for (let ch = charCodeUnchecked(pos); pos &lt; end &amp;&amp; (!isLineBreak(ch) &amp;&amp; ch !== CharacterCodes.backtick); ch = codePointUnchecked(++pos)) {</span></span>
<span id="L3803"><span class="lineNum">    3803</span> <span class="tlaGNC">           8 :             if (!inBackticks) {</span></span>
<span id="L3804"><span class="lineNum">    3804</span> <span class="tlaGNC">           8 :                 if (ch === CharacterCodes.openBrace) {</span></span>
<span id="L3805"><span class="lineNum">    3805</span> <span class="tlaGNC">           8 :                     break;</span></span>
<span id="L3806"><span class="lineNum">    3806</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L3807"><span class="lineNum">    3807</span> <span class="tlaGNC">           8 :                 else if (</span></span>
<span id="L3808"><span class="lineNum">    3808</span> <span class="tlaGNC">           8 :                     ch === CharacterCodes.at</span></span>
<span id="L3809"><span class="lineNum">    3809</span> <span class="tlaGNC">           8 :                     &amp;&amp; pos - 1 &gt;= 0 &amp;&amp; isWhiteSpaceSingleLine(charCodeUnchecked(pos - 1))</span></span>
<span id="L3810"><span class="lineNum">    3810</span> <span class="tlaGNC">           8 :                     &amp;&amp; !(pos + 1 &lt; end &amp;&amp; isWhiteSpaceLike(charCodeUnchecked(pos + 1)))</span></span>
<span id="L3811"><span class="lineNum">    3811</span> <span class="tlaGNC">           8 :                 ) {</span></span>
<span id="L3812"><span class="lineNum">    3812</span> <span class="tlaGNC">           8 :                     // @ doesn't start a new tag inside ``, and elsewhere, only after whitespace and before non-whitespace</span></span>
<span id="L3813"><span class="lineNum">    3813</span> <span class="tlaGNC">           8 :                     break;</span></span>
<span id="L3814"><span class="lineNum">    3814</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L3815"><span class="lineNum">    3815</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L3816"><span class="lineNum">    3816</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L3817"><span class="lineNum">    3817</span> <span class="tlaGNC">           8 :         if (pos === tokenStart) {</span></span>
<span id="L3818"><span class="lineNum">    3818</span> <span class="tlaGNC">           8 :             return scanJsDocToken();</span></span>
<span id="L3819"><span class="lineNum">    3819</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L3820"><span class="lineNum">    3820</span> <span class="tlaGNC">           8 :         tokenValue = text.substring(tokenStart, pos);</span></span>
<span id="L3821"><span class="lineNum">    3821</span> <span class="tlaGNC">           8 :         return token = SyntaxKind.JSDocCommentTextToken;</span></span>
<span id="L3822"><span class="lineNum">    3822</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L3823"><span class="lineNum">    3823</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3824"><span class="lineNum">    3824</span> <span class="tlaGNC">           8 :     function scanJsDocToken(): JSDocSyntaxKind {</span></span>
<span id="L3825"><span class="lineNum">    3825</span> <span class="tlaGNC">           8 :         fullStartPos = tokenStart = pos;</span></span>
<span id="L3826"><span class="lineNum">    3826</span> <span class="tlaGNC">           8 :         tokenFlags = TokenFlags.None;</span></span>
<span id="L3827"><span class="lineNum">    3827</span> <span class="tlaGNC">           8 :         if (pos &gt;= end) {</span></span>
<span id="L3828"><span class="lineNum">    3828</span> <span class="tlaGNC">           8 :             return token = SyntaxKind.EndOfFileToken;</span></span>
<span id="L3829"><span class="lineNum">    3829</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L3830"><span class="lineNum">    3830</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3831"><span class="lineNum">    3831</span> <span class="tlaGNC">           8 :         const ch = codePointUnchecked(pos);</span></span>
<span id="L3832"><span class="lineNum">    3832</span> <span class="tlaGNC">           8 :         pos += charSize(ch);</span></span>
<span id="L3833"><span class="lineNum">    3833</span> <span class="tlaGNC">           8 :         switch (ch) {</span></span>
<span id="L3834"><span class="lineNum">    3834</span> <span class="tlaGNC">           8 :             case CharacterCodes.tab:</span></span>
<span id="L3835"><span class="lineNum">    3835</span> <span class="tlaGNC">           8 :             case CharacterCodes.verticalTab:</span></span>
<span id="L3836"><span class="lineNum">    3836</span> <span class="tlaGNC">           8 :             case CharacterCodes.formFeed:</span></span>
<span id="L3837"><span class="lineNum">    3837</span> <span class="tlaGNC">           8 :             case CharacterCodes.space:</span></span>
<span id="L3838"><span class="lineNum">    3838</span> <span class="tlaGNC">           8 :                 while (pos &lt; end &amp;&amp; isWhiteSpaceSingleLine(charCodeUnchecked(pos))) {</span></span>
<span id="L3839"><span class="lineNum">    3839</span> <span class="tlaGNC">           8 :                     pos++;</span></span>
<span id="L3840"><span class="lineNum">    3840</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L3841"><span class="lineNum">    3841</span> <span class="tlaGNC">           8 :                 return token = SyntaxKind.WhitespaceTrivia;</span></span>
<span id="L3842"><span class="lineNum">    3842</span> <span class="tlaGNC">           8 :             case CharacterCodes.at:</span></span>
<span id="L3843"><span class="lineNum">    3843</span> <span class="tlaGNC">           8 :                 return token = SyntaxKind.AtToken;</span></span>
<span id="L3844"><span class="lineNum">    3844</span> <span class="tlaGNC">           8 :             case CharacterCodes.carriageReturn:</span></span>
<span id="L3845"><span class="lineNum">    3845</span> <span class="tlaGNC">           8 :                 if (charCodeUnchecked(pos) === CharacterCodes.lineFeed) {</span></span>
<span id="L3846"><span class="lineNum">    3846</span> <span class="tlaGNC">           8 :                     pos++;</span></span>
<span id="L3847"><span class="lineNum">    3847</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L3848"><span class="lineNum">    3848</span> <span class="tlaGNC">           8 :                 // falls through</span></span>
<span id="L3849"><span class="lineNum">    3849</span> <span class="tlaGNC">           8 :             case CharacterCodes.lineFeed:</span></span>
<span id="L3850"><span class="lineNum">    3850</span> <span class="tlaGNC">           8 :                 tokenFlags |= TokenFlags.PrecedingLineBreak;</span></span>
<span id="L3851"><span class="lineNum">    3851</span> <span class="tlaGNC">           8 :                 return token = SyntaxKind.NewLineTrivia;</span></span>
<span id="L3852"><span class="lineNum">    3852</span> <span class="tlaGNC">           8 :             case CharacterCodes.asterisk:</span></span>
<span id="L3853"><span class="lineNum">    3853</span> <span class="tlaGNC">           8 :                 return token = SyntaxKind.AsteriskToken;</span></span>
<span id="L3854"><span class="lineNum">    3854</span> <span class="tlaGNC">           8 :             case CharacterCodes.openBrace:</span></span>
<span id="L3855"><span class="lineNum">    3855</span> <span class="tlaGNC">           8 :                 return token = SyntaxKind.OpenBraceToken;</span></span>
<span id="L3856"><span class="lineNum">    3856</span> <span class="tlaGNC">           8 :             case CharacterCodes.closeBrace:</span></span>
<span id="L3857"><span class="lineNum">    3857</span> <span class="tlaGNC">           8 :                 return token = SyntaxKind.CloseBraceToken;</span></span>
<span id="L3858"><span class="lineNum">    3858</span> <span class="tlaGNC">           8 :             case CharacterCodes.openBracket:</span></span>
<span id="L3859"><span class="lineNum">    3859</span> <span class="tlaGNC">           8 :                 return token = SyntaxKind.OpenBracketToken;</span></span>
<span id="L3860"><span class="lineNum">    3860</span> <span class="tlaGNC">           8 :             case CharacterCodes.closeBracket:</span></span>
<span id="L3861"><span class="lineNum">    3861</span> <span class="tlaGNC">           8 :                 return token = SyntaxKind.CloseBracketToken;</span></span>
<span id="L3862"><span class="lineNum">    3862</span> <span class="tlaGNC">           8 :             case CharacterCodes.openParen:</span></span>
<span id="L3863"><span class="lineNum">    3863</span> <span class="tlaGNC">           8 :                 return token = SyntaxKind.OpenParenToken;</span></span>
<span id="L3864"><span class="lineNum">    3864</span> <span class="tlaGNC">           8 :             case CharacterCodes.closeParen:</span></span>
<span id="L3865"><span class="lineNum">    3865</span> <span class="tlaGNC">           8 :                 return token = SyntaxKind.CloseParenToken;</span></span>
<span id="L3866"><span class="lineNum">    3866</span> <span class="tlaGNC">           8 :             case CharacterCodes.lessThan:</span></span>
<span id="L3867"><span class="lineNum">    3867</span> <span class="tlaGNC">           8 :                 return token = SyntaxKind.LessThanToken;</span></span>
<span id="L3868"><span class="lineNum">    3868</span> <span class="tlaGNC">           8 :             case CharacterCodes.greaterThan:</span></span>
<span id="L3869"><span class="lineNum">    3869</span> <span class="tlaGNC">           8 :                 return token = SyntaxKind.GreaterThanToken;</span></span>
<span id="L3870"><span class="lineNum">    3870</span> <span class="tlaGNC">           8 :             case CharacterCodes.equals:</span></span>
<span id="L3871"><span class="lineNum">    3871</span> <span class="tlaGNC">           8 :                 return token = SyntaxKind.EqualsToken;</span></span>
<span id="L3872"><span class="lineNum">    3872</span> <span class="tlaGNC">           8 :             case CharacterCodes.comma:</span></span>
<span id="L3873"><span class="lineNum">    3873</span> <span class="tlaGNC">           8 :                 return token = SyntaxKind.CommaToken;</span></span>
<span id="L3874"><span class="lineNum">    3874</span> <span class="tlaGNC">           8 :             case CharacterCodes.dot:</span></span>
<span id="L3875"><span class="lineNum">    3875</span> <span class="tlaGNC">           8 :                 return token = SyntaxKind.DotToken;</span></span>
<span id="L3876"><span class="lineNum">    3876</span> <span class="tlaGNC">           8 :             case CharacterCodes.backtick:</span></span>
<span id="L3877"><span class="lineNum">    3877</span> <span class="tlaGNC">           8 :                 return token = SyntaxKind.BacktickToken;</span></span>
<span id="L3878"><span class="lineNum">    3878</span> <span class="tlaGNC">           8 :             case CharacterCodes.hash:</span></span>
<span id="L3879"><span class="lineNum">    3879</span> <span class="tlaGNC">           8 :                 return token = SyntaxKind.HashToken;</span></span>
<span id="L3880"><span class="lineNum">    3880</span> <span class="tlaGNC">           8 :             case CharacterCodes.backslash:</span></span>
<span id="L3881"><span class="lineNum">    3881</span> <span class="tlaGNC">           8 :                 pos--;</span></span>
<span id="L3882"><span class="lineNum">    3882</span> <span class="tlaGNC">           8 :                 const extendedCookedChar = peekExtendedUnicodeEscape();</span></span>
<span id="L3883"><span class="lineNum">    3883</span> <span class="tlaGNC">           8 :                 if (extendedCookedChar &gt;= 0 &amp;&amp; isIdentifierStart(extendedCookedChar, languageVersion)) {</span></span>
<span id="L3884"><span class="lineNum">    3884</span> <span class="tlaGNC">           8 :                     tokenValue = scanExtendedUnicodeEscape(/*shouldEmitInvalidEscapeError*/ true) + scanIdentifierParts();</span></span>
<span id="L3885"><span class="lineNum">    3885</span> <span class="tlaGNC">           8 :                     return token = getIdentifierToken();</span></span>
<span id="L3886"><span class="lineNum">    3886</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L3887"><span class="lineNum">    3887</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3888"><span class="lineNum">    3888</span> <span class="tlaGNC">           8 :                 const cookedChar = peekUnicodeEscape();</span></span>
<span id="L3889"><span class="lineNum">    3889</span> <span class="tlaGNC">           8 :                 if (cookedChar &gt;= 0 &amp;&amp; isIdentifierStart(cookedChar, languageVersion)) {</span></span>
<span id="L3890"><span class="lineNum">    3890</span> <span class="tlaGNC">           8 :                     pos += 6;</span></span>
<span id="L3891"><span class="lineNum">    3891</span> <span class="tlaGNC">           8 :                     tokenFlags |= TokenFlags.UnicodeEscape;</span></span>
<span id="L3892"><span class="lineNum">    3892</span> <span class="tlaGNC">           8 :                     tokenValue = String.fromCharCode(cookedChar) + scanIdentifierParts();</span></span>
<span id="L3893"><span class="lineNum">    3893</span> <span class="tlaGNC">           8 :                     return token = getIdentifierToken();</span></span>
<span id="L3894"><span class="lineNum">    3894</span> <span class="tlaGNC">           8 :                 }</span></span>
<span id="L3895"><span class="lineNum">    3895</span> <span class="tlaGNC">           8 :                 pos++;</span></span>
<span id="L3896"><span class="lineNum">    3896</span> <span class="tlaGNC">           8 :                 return token = SyntaxKind.Unknown;</span></span>
<span id="L3897"><span class="lineNum">    3897</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L3898"><span class="lineNum">    3898</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3899"><span class="lineNum">    3899</span> <span class="tlaGNC">           8 :         if (isIdentifierStart(ch, languageVersion)) {</span></span>
<span id="L3900"><span class="lineNum">    3900</span> <span class="tlaGNC">           8 :             let char = ch;</span></span>
<span id="L3901"><span class="lineNum">    3901</span> <span class="tlaGNC">           8 :             while (pos &lt; end &amp;&amp; isIdentifierPart(char = codePointUnchecked(pos), languageVersion) || char === CharacterCodes.minus) pos += charSize(char);</span></span>
<span id="L3902"><span class="lineNum">    3902</span> <span class="tlaGNC">           8 :             tokenValue = text.substring(tokenStart, pos);</span></span>
<span id="L3903"><span class="lineNum">    3903</span> <span class="tlaGNC">           8 :             if (char === CharacterCodes.backslash) {</span></span>
<span id="L3904"><span class="lineNum">    3904</span> <span class="tlaGNC">           8 :                 tokenValue += scanIdentifierParts();</span></span>
<span id="L3905"><span class="lineNum">    3905</span> <span class="tlaGNC">           8 :             }</span></span>
<span id="L3906"><span class="lineNum">    3906</span> <span class="tlaGNC">           8 :             return token = getIdentifierToken();</span></span>
<span id="L3907"><span class="lineNum">    3907</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L3908"><span class="lineNum">    3908</span> <span class="tlaGNC">           8 :         else {</span></span>
<span id="L3909"><span class="lineNum">    3909</span> <span class="tlaGNC">           8 :             return token = SyntaxKind.Unknown;</span></span>
<span id="L3910"><span class="lineNum">    3910</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L3911"><span class="lineNum">    3911</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L3912"><span class="lineNum">    3912</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3913"><span class="lineNum">    3913</span> <span class="tlaGNC">           8 :     function speculationHelper&lt;T&gt;(callback: () =&gt; T, isLookahead: boolean): T {</span></span>
<span id="L3914"><span class="lineNum">    3914</span> <span class="tlaGNC">           8 :         const savePos = pos;</span></span>
<span id="L3915"><span class="lineNum">    3915</span> <span class="tlaGNC">           8 :         const saveStartPos = fullStartPos;</span></span>
<span id="L3916"><span class="lineNum">    3916</span> <span class="tlaGNC">           8 :         const saveTokenPos = tokenStart;</span></span>
<span id="L3917"><span class="lineNum">    3917</span> <span class="tlaGNC">           8 :         const saveToken = token;</span></span>
<span id="L3918"><span class="lineNum">    3918</span> <span class="tlaGNC">           8 :         const saveTokenValue = tokenValue;</span></span>
<span id="L3919"><span class="lineNum">    3919</span> <span class="tlaGNC">           8 :         const saveTokenFlags = tokenFlags;</span></span>
<span id="L3920"><span class="lineNum">    3920</span> <span class="tlaGNC">           8 :         const result = callback();</span></span>
<span id="L3921"><span class="lineNum">    3921</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3922"><span class="lineNum">    3922</span> <span class="tlaGNC">           8 :         // If our callback returned something 'falsy' or we're just looking ahead,</span></span>
<span id="L3923"><span class="lineNum">    3923</span> <span class="tlaGNC">           8 :         // then unconditionally restore us to where we were.</span></span>
<span id="L3924"><span class="lineNum">    3924</span> <span class="tlaGNC">           8 :         if (!result || isLookahead) {</span></span>
<span id="L3925"><span class="lineNum">    3925</span> <span class="tlaGNC">           8 :             pos = savePos;</span></span>
<span id="L3926"><span class="lineNum">    3926</span> <span class="tlaGNC">           8 :             fullStartPos = saveStartPos;</span></span>
<span id="L3927"><span class="lineNum">    3927</span> <span class="tlaGNC">           8 :             tokenStart = saveTokenPos;</span></span>
<span id="L3928"><span class="lineNum">    3928</span> <span class="tlaGNC">           8 :             token = saveToken;</span></span>
<span id="L3929"><span class="lineNum">    3929</span> <span class="tlaGNC">           8 :             tokenValue = saveTokenValue;</span></span>
<span id="L3930"><span class="lineNum">    3930</span> <span class="tlaGNC">           8 :             tokenFlags = saveTokenFlags;</span></span>
<span id="L3931"><span class="lineNum">    3931</span> <span class="tlaGNC">           8 :         }</span></span>
<span id="L3932"><span class="lineNum">    3932</span> <span class="tlaGNC">           8 :         return result;</span></span>
<span id="L3933"><span class="lineNum">    3933</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L3934"><span class="lineNum">    3934</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3935"><span class="lineNum">    3935</span> <span class="tlaGNC">           8 :     function scanRange&lt;T&gt;(start: number, length: number, callback: () =&gt; T): T {</span></span>
<span id="L3936"><span class="lineNum">    3936</span> <span class="tlaGNC">           8 :         const saveEnd = end;</span></span>
<span id="L3937"><span class="lineNum">    3937</span> <span class="tlaGNC">           8 :         const savePos = pos;</span></span>
<span id="L3938"><span class="lineNum">    3938</span> <span class="tlaGNC">           8 :         const saveStartPos = fullStartPos;</span></span>
<span id="L3939"><span class="lineNum">    3939</span> <span class="tlaGNC">           8 :         const saveTokenPos = tokenStart;</span></span>
<span id="L3940"><span class="lineNum">    3940</span> <span class="tlaGNC">           8 :         const saveToken = token;</span></span>
<span id="L3941"><span class="lineNum">    3941</span> <span class="tlaGNC">           8 :         const saveTokenValue = tokenValue;</span></span>
<span id="L3942"><span class="lineNum">    3942</span> <span class="tlaGNC">           8 :         const saveTokenFlags = tokenFlags;</span></span>
<span id="L3943"><span class="lineNum">    3943</span> <span class="tlaGNC">           8 :         const saveErrorExpectations = commentDirectives;</span></span>
<span id="L3944"><span class="lineNum">    3944</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3945"><span class="lineNum">    3945</span> <span class="tlaGNC">           8 :         setText(text, start, length);</span></span>
<span id="L3946"><span class="lineNum">    3946</span> <span class="tlaGNC">           8 :         const result = callback();</span></span>
<span id="L3947"><span class="lineNum">    3947</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3948"><span class="lineNum">    3948</span> <span class="tlaGNC">           8 :         end = saveEnd;</span></span>
<span id="L3949"><span class="lineNum">    3949</span> <span class="tlaGNC">           8 :         pos = savePos;</span></span>
<span id="L3950"><span class="lineNum">    3950</span> <span class="tlaGNC">           8 :         fullStartPos = saveStartPos;</span></span>
<span id="L3951"><span class="lineNum">    3951</span> <span class="tlaGNC">           8 :         tokenStart = saveTokenPos;</span></span>
<span id="L3952"><span class="lineNum">    3952</span> <span class="tlaGNC">           8 :         token = saveToken;</span></span>
<span id="L3953"><span class="lineNum">    3953</span> <span class="tlaGNC">           8 :         tokenValue = saveTokenValue;</span></span>
<span id="L3954"><span class="lineNum">    3954</span> <span class="tlaGNC">           8 :         tokenFlags = saveTokenFlags;</span></span>
<span id="L3955"><span class="lineNum">    3955</span> <span class="tlaGNC">           8 :         commentDirectives = saveErrorExpectations;</span></span>
<span id="L3956"><span class="lineNum">    3956</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3957"><span class="lineNum">    3957</span> <span class="tlaGNC">           8 :         return result;</span></span>
<span id="L3958"><span class="lineNum">    3958</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L3959"><span class="lineNum">    3959</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3960"><span class="lineNum">    3960</span> <span class="tlaGNC">           8 :     function lookAhead&lt;T&gt;(callback: () =&gt; T): T {</span></span>
<span id="L3961"><span class="lineNum">    3961</span> <span class="tlaGNC">           8 :         return speculationHelper(callback, /*isLookahead*/ true);</span></span>
<span id="L3962"><span class="lineNum">    3962</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L3963"><span class="lineNum">    3963</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3964"><span class="lineNum">    3964</span> <span class="tlaGNC">           8 :     function tryScan&lt;T&gt;(callback: () =&gt; T): T {</span></span>
<span id="L3965"><span class="lineNum">    3965</span> <span class="tlaGNC">           8 :         return speculationHelper(callback, /*isLookahead*/ false);</span></span>
<span id="L3966"><span class="lineNum">    3966</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L3967"><span class="lineNum">    3967</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3968"><span class="lineNum">    3968</span> <span class="tlaGNC">           8 :     function getText(): string {</span></span>
<span id="L3969"><span class="lineNum">    3969</span> <span class="tlaGNC">           8 :         return text;</span></span>
<span id="L3970"><span class="lineNum">    3970</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L3971"><span class="lineNum">    3971</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3972"><span class="lineNum">    3972</span> <span class="tlaGNC">           8 :     function clearCommentDirectives() {</span></span>
<span id="L3973"><span class="lineNum">    3973</span> <span class="tlaGNC">           8 :         commentDirectives = undefined;</span></span>
<span id="L3974"><span class="lineNum">    3974</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L3975"><span class="lineNum">    3975</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3976"><span class="lineNum">    3976</span> <span class="tlaGNC">           8 :     function setText(newText: string | undefined, start: number | undefined, length: number | undefined) {</span></span>
<span id="L3977"><span class="lineNum">    3977</span> <span class="tlaGNC">           8 :         text = newText || &quot;&quot;;</span></span>
<span id="L3978"><span class="lineNum">    3978</span> <span class="tlaGNC">           8 :         end = length === undefined ? text.length : start! + length;</span></span>
<span id="L3979"><span class="lineNum">    3979</span> <span class="tlaGNC">           8 :         resetTokenState(start || 0);</span></span>
<span id="L3980"><span class="lineNum">    3980</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L3981"><span class="lineNum">    3981</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3982"><span class="lineNum">    3982</span> <span class="tlaGNC">           8 :     function setOnError(errorCallback: ErrorCallback | undefined) {</span></span>
<span id="L3983"><span class="lineNum">    3983</span> <span class="tlaGNC">           8 :         onError = errorCallback;</span></span>
<span id="L3984"><span class="lineNum">    3984</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L3985"><span class="lineNum">    3985</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3986"><span class="lineNum">    3986</span> <span class="tlaGNC">           8 :     function setScriptTarget(scriptTarget: ScriptTarget) {</span></span>
<span id="L3987"><span class="lineNum">    3987</span> <span class="tlaGNC">           8 :         languageVersion = scriptTarget;</span></span>
<span id="L3988"><span class="lineNum">    3988</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L3989"><span class="lineNum">    3989</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3990"><span class="lineNum">    3990</span> <span class="tlaGNC">           8 :     function setLanguageVariant(variant: LanguageVariant) {</span></span>
<span id="L3991"><span class="lineNum">    3991</span> <span class="tlaGNC">           8 :         languageVariant = variant;</span></span>
<span id="L3992"><span class="lineNum">    3992</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L3993"><span class="lineNum">    3993</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3994"><span class="lineNum">    3994</span> <span class="tlaGNC">           8 :     function setScriptKind(kind: ScriptKind) {</span></span>
<span id="L3995"><span class="lineNum">    3995</span> <span class="tlaGNC">           8 :         scriptKind = kind;</span></span>
<span id="L3996"><span class="lineNum">    3996</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L3997"><span class="lineNum">    3997</span> <span class="tlaGNC">           8 : </span></span>
<span id="L3998"><span class="lineNum">    3998</span> <span class="tlaGNC">           8 :     function setJSDocParsingMode(kind: JSDocParsingMode) {</span></span>
<span id="L3999"><span class="lineNum">    3999</span> <span class="tlaGNC">           8 :         jsDocParsingMode = kind;</span></span>
<span id="L4000"><span class="lineNum">    4000</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L4001"><span class="lineNum">    4001</span> <span class="tlaGNC">           8 : </span></span>
<span id="L4002"><span class="lineNum">    4002</span> <span class="tlaGNC">           8 :     function resetTokenState(position: number) {</span></span>
<span id="L4003"><span class="lineNum">    4003</span> <span class="tlaGNC">           8 :         Debug.assert(position &gt;= 0);</span></span>
<span id="L4004"><span class="lineNum">    4004</span> <span class="tlaGNC">           8 :         pos = position;</span></span>
<span id="L4005"><span class="lineNum">    4005</span> <span class="tlaGNC">           8 :         fullStartPos = position;</span></span>
<span id="L4006"><span class="lineNum">    4006</span> <span class="tlaGNC">           8 :         tokenStart = position;</span></span>
<span id="L4007"><span class="lineNum">    4007</span> <span class="tlaGNC">           8 :         token = SyntaxKind.Unknown;</span></span>
<span id="L4008"><span class="lineNum">    4008</span> <span class="tlaGNC">           8 :         tokenValue = undefined!;</span></span>
<span id="L4009"><span class="lineNum">    4009</span> <span class="tlaGNC">           8 :         tokenFlags = TokenFlags.None;</span></span>
<span id="L4010"><span class="lineNum">    4010</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L4011"><span class="lineNum">    4011</span> <span class="tlaGNC">           8 : </span></span>
<span id="L4012"><span class="lineNum">    4012</span> <span class="tlaGNC">           8 :     function setSkipJsDocLeadingAsterisks(skip: boolean) {</span></span>
<span id="L4013"><span class="lineNum">    4013</span> <span class="tlaGNC">           8 :         skipJsDocLeadingAsterisks += skip ? 1 : -1;</span></span>
<span id="L4014"><span class="lineNum">    4014</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L4015"><span class="lineNum">    4015</span> <span class="tlaGNC">           8 : }</span></span>
<span id="L4016"><span class="lineNum">    4016</span> <span class="tlaGNC">           8 : </span></span>
<span id="L4017"><span class="lineNum">    4017</span> <span class="tlaGNC">           8 : function codePointAt(s: string, i: number): number {</span></span>
<span id="L4018"><span class="lineNum">    4018</span> <span class="tlaGNC">           8 :     // TODO(jakebailey): this is wrong and should have ?? 0; but all users are okay with it</span></span>
<span id="L4019"><span class="lineNum">    4019</span> <span class="tlaGNC">           8 :     return s.codePointAt(i)!;</span></span>
<span id="L4020"><span class="lineNum">    4020</span> <span class="tlaGNC">           8 : }</span></span>
<span id="L4021"><span class="lineNum">    4021</span> <span class="tlaGNC">           8 : </span></span>
<span id="L4022"><span class="lineNum">    4022</span> <span class="tlaGNC">           8 : function charSize(ch: number) {</span></span>
<span id="L4023"><span class="lineNum">    4023</span> <span class="tlaGNC">           8 :     if (ch &gt;= 0x10000) {</span></span>
<span id="L4024"><span class="lineNum">    4024</span> <span class="tlaGNC">           8 :         return 2;</span></span>
<span id="L4025"><span class="lineNum">    4025</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L4026"><span class="lineNum">    4026</span> <span class="tlaGNC">           8 :     if (ch === CharacterCodes.EOF) {</span></span>
<span id="L4027"><span class="lineNum">    4027</span> <span class="tlaGNC">           8 :         return 0;</span></span>
<span id="L4028"><span class="lineNum">    4028</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L4029"><span class="lineNum">    4029</span> <span class="tlaGNC">           8 :     return 1;</span></span>
<span id="L4030"><span class="lineNum">    4030</span> <span class="tlaGNC">           8 : }</span></span>
<span id="L4031"><span class="lineNum">    4031</span> <span class="tlaGNC">           8 : </span></span>
<span id="L4032"><span class="lineNum">    4032</span> <span class="tlaGNC">           8 : // Derived from the 10.1.1 UTF16Encoding of the ES6 Spec.</span></span>
<span id="L4033"><span class="lineNum">    4033</span> <span class="tlaGNC">           8 : function utf16EncodeAsStringFallback(codePoint: number) {</span></span>
<span id="L4034"><span class="lineNum">    4034</span> <span class="tlaGNC">           8 :     Debug.assert(0x0 &lt;= codePoint &amp;&amp; codePoint &lt;= 0x10FFFF);</span></span>
<span id="L4035"><span class="lineNum">    4035</span> <span class="tlaGNC">           8 : </span></span>
<span id="L4036"><span class="lineNum">    4036</span> <span class="tlaGNC">           8 :     if (codePoint &lt;= 65535) {</span></span>
<span id="L4037"><span class="lineNum">    4037</span> <span class="tlaGNC">           8 :         return String.fromCharCode(codePoint);</span></span>
<span id="L4038"><span class="lineNum">    4038</span> <span class="tlaGNC">           8 :     }</span></span>
<span id="L4039"><span class="lineNum">    4039</span> <span class="tlaGNC">           8 : </span></span>
<span id="L4040"><span class="lineNum">    4040</span> <span class="tlaGNC">           8 :     const codeUnit1 = Math.floor((codePoint - 65536) / 1024) + 0xD800;</span></span>
<span id="L4041"><span class="lineNum">    4041</span> <span class="tlaGNC">           8 :     const codeUnit2 = ((codePoint - 65536) % 1024) + 0xDC00;</span></span>
<span id="L4042"><span class="lineNum">    4042</span> <span class="tlaGNC">           8 : </span></span>
<span id="L4043"><span class="lineNum">    4043</span> <span class="tlaGNC">           8 :     return String.fromCharCode(codeUnit1, codeUnit2);</span></span>
<span id="L4044"><span class="lineNum">    4044</span> <span class="tlaGNC">           8 : }</span></span>
<span id="L4045"><span class="lineNum">    4045</span> <span class="tlaGNC">           8 : </span></span>
<span id="L4046"><span class="lineNum">    4046</span> <span class="tlaGNC">           8 : const utf16EncodeAsStringWorker: (codePoint: number) =&gt; string = (String as any).fromCodePoint ? codePoint =&gt; (String as any).fromCodePoint(codePoint) : utf16EncodeAsStringFallback;</span></span>
<span id="L4047"><span class="lineNum">    4047</span> <span class="tlaGNC">           8 : </span></span>
<span id="L4048"><span class="lineNum">    4048</span> <span class="tlaGNC">           8 : /** @internal */</span></span>
<span id="L4049"><span class="lineNum">    4049</span> <span class="tlaGNC">           8 : export function utf16EncodeAsString(codePoint: number) {</span></span>
<span id="L4050"><span class="lineNum">    4050</span> <span class="tlaGNC">           8 :     return utf16EncodeAsStringWorker(codePoint);</span></span>
<span id="L4051"><span class="lineNum">    4051</span> <span class="tlaGNC">           8 : }</span></span>
<span id="L4052"><span class="lineNum">    4052</span> <span class="tlaGNC">           8 : </span></span>
<span id="L4053"><span class="lineNum">    4053</span> <span class="tlaGNC">           8 : // Table 66: Non-binary Unicode property aliases and their canonical property names</span></span>
<span id="L4054"><span class="lineNum">    4054</span> <span class="tlaGNC">           8 : // https://tc39.es/ecma262/#table-nonbinary-unicode-properties</span></span>
<span id="L4055"><span class="lineNum">    4055</span> <span class="tlaGNC">           8 : // dprint-ignore</span></span>
<span id="L4056"><span class="lineNum">    4056</span> <span class="tlaGNC">           8 : const nonBinaryUnicodeProperties = new Map(Object.entries({</span></span>
<span id="L4057"><span class="lineNum">    4057</span> <span class="tlaGNC">           8 :     General_Category: &quot;General_Category&quot;,</span></span>
<span id="L4058"><span class="lineNum">    4058</span> <span class="tlaGNC">           8 :     gc: &quot;General_Category&quot;,</span></span>
<span id="L4059"><span class="lineNum">    4059</span> <span class="tlaGNC">           8 :     Script: &quot;Script&quot;,</span></span>
<span id="L4060"><span class="lineNum">    4060</span> <span class="tlaGNC">           8 :     sc: &quot;Script&quot;,</span></span>
<span id="L4061"><span class="lineNum">    4061</span> <span class="tlaGNC">           8 :     Script_Extensions: &quot;Script_Extensions&quot;,</span></span>
<span id="L4062"><span class="lineNum">    4062</span> <span class="tlaGNC">           8 :     scx: &quot;Script_Extensions&quot;,</span></span>
<span id="L4063"><span class="lineNum">    4063</span> <span class="tlaGNC">           8 : } as const));</span></span>
<span id="L4064"><span class="lineNum">    4064</span> <span class="tlaGNC">           8 : </span></span>
<span id="L4065"><span class="lineNum">    4065</span> <span class="tlaGNC">           8 : // Table 67: Binary Unicode property aliases and their canonical property names</span></span>
<span id="L4066"><span class="lineNum">    4066</span> <span class="tlaGNC">           8 : // https://tc39.es/ecma262/#table-binary-unicode-properties</span></span>
<span id="L4067"><span class="lineNum">    4067</span> <span class="tlaGNC">           8 : // dprint-ignore</span></span>
<span id="L4068"><span class="lineNum">    4068</span> <span class="tlaGNC">           8 : const binaryUnicodeProperties = new Set([&quot;ASCII&quot;, &quot;ASCII_Hex_Digit&quot;, &quot;AHex&quot;, &quot;Alphabetic&quot;, &quot;Alpha&quot;, &quot;Any&quot;, &quot;Assigned&quot;, &quot;Bidi_Control&quot;, &quot;Bidi_C&quot;, &quot;Bidi_Mirrored&quot;, &quot;Bidi_M&quot;, &quot;Case_Ignorable&quot;, &quot;CI&quot;, &quot;Cased&quot;, &quot;Changes_When_Casefolded&quot;, &quot;CWCF&quot;, &quot;Changes_When_Casemapped&quot;, &quot;CWCM&quot;, &quot;Changes_When_Lowercased&quot;, &quot;CWL&quot;, &quot;Changes_When_NFKC_Casefolded&quot;, &quot;CWKCF&quot;, &quot;Changes_When_Titlecased&quot;, &quot;CWT&quot;, &quot;Changes_When_Uppercased&quot;, &quot;CWU&quot;, &quot;Dash&quot;, &quot;Default_Ignorable_Code_Point&quot;, &quot;DI&quot;, &quot;Deprecated&quot;, &quot;Dep&quot;, &quot;Diacritic&quot;, &quot;Dia&quot;, &quot;Emoji&quot;, &quot;Emoji_Component&quot;, &quot;EComp&quot;, &quot;Emoji_Modifier&quot;, &quot;EMod&quot;, &quot;Emoji_Modifier_Base&quot;, &quot;EBase&quot;, &quot;Emoji_Presentation&quot;, &quot;EPres&quot;, &quot;Extended_Pictographic&quot;, &quot;ExtPict&quot;, &quot;Extender&quot;, &quot;Ext&quot;, &quot;Grapheme_Base&quot;, &quot;Gr_Base&quot;, &quot;Grapheme_Extend&quot;, &quot;Gr_Ext&quot;, &quot;Hex_Digit&quot;, &quot;Hex&quot;, &quot;IDS_Binary_Operator&quot;, &quot;IDSB&quot;, &quot;IDS_Trinary_Operator&quot;, &quot;IDST&quot;, &quot;ID_Continue&quot;, &quot;IDC&quot;, &quot;ID_Start&quot;, &quot;IDS&quot;, &quot;Ideographic&quot;, &quot;Ideo&quot;, &quot;Join_Control&quot;, &quot;Join_C&quot;, &quot;Logical_Order_Exception&quot;, &quot;LOE&quot;, &quot;Lowercase&quot;, &quot;Lower&quot;, &quot;Math&quot;, &quot;Noncharacter_Code_Point&quot;, &quot;NChar&quot;, &quot;Pattern_Syntax&quot;, &quot;Pat_Syn&quot;, &quot;Pattern_White_Space&quot;, &quot;Pat_WS&quot;, &quot;Quotation_Mark&quot;, &quot;QMark&quot;, &quot;Radical&quot;, &quot;Regional_Indicator&quot;, &quot;RI&quot;, &quot;Sentence_Terminal&quot;, &quot;STerm&quot;, &quot;Soft_Dotted&quot;, &quot;SD&quot;, &quot;Terminal_Punctuation&quot;, &quot;Term&quot;, &quot;Unified_Ideograph&quot;, &quot;UIdeo&quot;, &quot;Uppercase&quot;, &quot;Upper&quot;, &quot;Variation_Selector&quot;, &quot;VS&quot;, &quot;White_Space&quot;, &quot;space&quot;, &quot;XID_Continue&quot;, &quot;XIDC&quot;, &quot;XID_Start&quot;, &quot;XIDS&quot;]);</span></span>
<span id="L4069"><span class="lineNum">    4069</span> <span class="tlaGNC">           8 : </span></span>
<span id="L4070"><span class="lineNum">    4070</span> <span class="tlaGNC">           8 : // Table 68: Binary Unicode properties of strings</span></span>
<span id="L4071"><span class="lineNum">    4071</span> <span class="tlaGNC">           8 : // https://tc39.es/ecma262/#table-binary-unicode-properties-of-strings</span></span>
<span id="L4072"><span class="lineNum">    4072</span> <span class="tlaGNC">           8 : // dprint-ignore</span></span>
<span id="L4073"><span class="lineNum">    4073</span> <span class="tlaGNC">           8 : const binaryUnicodePropertiesOfStrings = new Set([&quot;Basic_Emoji&quot;, &quot;Emoji_Keycap_Sequence&quot;, &quot;RGI_Emoji_Modifier_Sequence&quot;, &quot;RGI_Emoji_Flag_Sequence&quot;, &quot;RGI_Emoji_Tag_Sequence&quot;, &quot;RGI_Emoji_ZWJ_Sequence&quot;, &quot;RGI_Emoji&quot;]);</span></span>
<span id="L4074"><span class="lineNum">    4074</span> <span class="tlaGNC">           8 : </span></span>
<span id="L4075"><span class="lineNum">    4075</span> <span class="tlaGNC">           8 : // Unicode 15.1</span></span>
<span id="L4076"><span class="lineNum">    4076</span> <span class="tlaGNC">           8 : // dprint-ignore</span></span>
<span id="L4077"><span class="lineNum">    4077</span> <span class="tlaGNC">           8 : const valuesOfNonBinaryUnicodeProperties = {</span></span>
<span id="L4078"><span class="lineNum">    4078</span> <span class="tlaGNC">           8 :     General_Category: new Set([&quot;C&quot;, &quot;Other&quot;, &quot;Cc&quot;, &quot;Control&quot;, &quot;cntrl&quot;, &quot;Cf&quot;, &quot;Format&quot;, &quot;Cn&quot;, &quot;Unassigned&quot;, &quot;Co&quot;, &quot;Private_Use&quot;, &quot;Cs&quot;, &quot;Surrogate&quot;, &quot;L&quot;, &quot;Letter&quot;, &quot;LC&quot;, &quot;Cased_Letter&quot;, &quot;Ll&quot;, &quot;Lowercase_Letter&quot;, &quot;Lm&quot;, &quot;Modifier_Letter&quot;, &quot;Lo&quot;, &quot;Other_Letter&quot;, &quot;Lt&quot;, &quot;Titlecase_Letter&quot;, &quot;Lu&quot;, &quot;Uppercase_Letter&quot;, &quot;M&quot;, &quot;Mark&quot;, &quot;Combining_Mark&quot;, &quot;Mc&quot;, &quot;Spacing_Mark&quot;, &quot;Me&quot;, &quot;Enclosing_Mark&quot;, &quot;Mn&quot;, &quot;Nonspacing_Mark&quot;, &quot;N&quot;, &quot;Number&quot;, &quot;Nd&quot;, &quot;Decimal_Number&quot;, &quot;digit&quot;, &quot;Nl&quot;, &quot;Letter_Number&quot;, &quot;No&quot;, &quot;Other_Number&quot;, &quot;P&quot;, &quot;Punctuation&quot;, &quot;punct&quot;, &quot;Pc&quot;, &quot;Connector_Punctuation&quot;, &quot;Pd&quot;, &quot;Dash_Punctuation&quot;, &quot;Pe&quot;, &quot;Close_Punctuation&quot;, &quot;Pf&quot;, &quot;Final_Punctuation&quot;, &quot;Pi&quot;, &quot;Initial_Punctuation&quot;, &quot;Po&quot;, &quot;Other_Punctuation&quot;, &quot;Ps&quot;, &quot;Open_Punctuation&quot;, &quot;S&quot;, &quot;Symbol&quot;, &quot;Sc&quot;, &quot;Currency_Symbol&quot;, &quot;Sk&quot;, &quot;Modifier_Symbol&quot;, &quot;Sm&quot;, &quot;Math_Symbol&quot;, &quot;So&quot;, &quot;Other_Symbol&quot;, &quot;Z&quot;, &quot;Separator&quot;, &quot;Zl&quot;, &quot;Line_Separator&quot;, &quot;Zp&quot;, &quot;Paragraph_Separator&quot;, &quot;Zs&quot;, &quot;Space_Separator&quot;]),</span></span>
<span id="L4079"><span class="lineNum">    4079</span> <span class="tlaGNC">           8 :     Script: new Set([&quot;Adlm&quot;, &quot;Adlam&quot;, &quot;Aghb&quot;, &quot;Caucasian_Albanian&quot;, &quot;Ahom&quot;, &quot;Arab&quot;, &quot;Arabic&quot;, &quot;Armi&quot;, &quot;Imperial_Aramaic&quot;, &quot;Armn&quot;, &quot;Armenian&quot;, &quot;Avst&quot;, &quot;Avestan&quot;, &quot;Bali&quot;, &quot;Balinese&quot;, &quot;Bamu&quot;, &quot;Bamum&quot;, &quot;Bass&quot;, &quot;Bassa_Vah&quot;, &quot;Batk&quot;, &quot;Batak&quot;, &quot;Beng&quot;, &quot;Bengali&quot;, &quot;Bhks&quot;, &quot;Bhaiksuki&quot;, &quot;Bopo&quot;, &quot;Bopomofo&quot;, &quot;Brah&quot;, &quot;Brahmi&quot;, &quot;Brai&quot;, &quot;Braille&quot;, &quot;Bugi&quot;, &quot;Buginese&quot;, &quot;Buhd&quot;, &quot;Buhid&quot;, &quot;Cakm&quot;, &quot;Chakma&quot;, &quot;Cans&quot;, &quot;Canadian_Aboriginal&quot;, &quot;Cari&quot;, &quot;Carian&quot;, &quot;Cham&quot;, &quot;Cher&quot;, &quot;Cherokee&quot;, &quot;Chrs&quot;, &quot;Chorasmian&quot;, &quot;Copt&quot;, &quot;Coptic&quot;, &quot;Qaac&quot;, &quot;Cpmn&quot;, &quot;Cypro_Minoan&quot;, &quot;Cprt&quot;, &quot;Cypriot&quot;, &quot;Cyrl&quot;, &quot;Cyrillic&quot;, &quot;Deva&quot;, &quot;Devanagari&quot;, &quot;Diak&quot;, &quot;Dives_Akuru&quot;, &quot;Dogr&quot;, &quot;Dogra&quot;, &quot;Dsrt&quot;, &quot;Deseret&quot;, &quot;Dupl&quot;, &quot;Duployan&quot;, &quot;Egyp&quot;, &quot;Egyptian_Hieroglyphs&quot;, &quot;Elba&quot;, &quot;Elbasan&quot;, &quot;Elym&quot;, &quot;Elymaic&quot;, &quot;Ethi&quot;, &quot;Ethiopic&quot;, &quot;Geor&quot;, &quot;Georgian&quot;, &quot;Glag&quot;, &quot;Glagolitic&quot;, &quot;Gong&quot;, &quot;Gunjala_Gondi&quot;, &quot;Gonm&quot;, &quot;Masaram_Gondi&quot;, &quot;Goth&quot;, &quot;Gothic&quot;, &quot;Gran&quot;, &quot;Grantha&quot;, &quot;Grek&quot;, &quot;Greek&quot;, &quot;Gujr&quot;, &quot;Gujarati&quot;, &quot;Guru&quot;, &quot;Gurmukhi&quot;, &quot;Hang&quot;, &quot;Hangul&quot;, &quot;Hani&quot;, &quot;Han&quot;, &quot;Hano&quot;, &quot;Hanunoo&quot;, &quot;Hatr&quot;, &quot;Hatran&quot;, &quot;Hebr&quot;, &quot;Hebrew&quot;, &quot;Hira&quot;, &quot;Hiragana&quot;, &quot;Hluw&quot;, &quot;Anatolian_Hieroglyphs&quot;, &quot;Hmng&quot;, &quot;Pahawh_Hmong&quot;, &quot;Hmnp&quot;, &quot;Nyiakeng_Puachue_Hmong&quot;, &quot;Hrkt&quot;, &quot;Katakana_Or_Hiragana&quot;, &quot;Hung&quot;, &quot;Old_Hungarian&quot;, &quot;Ital&quot;, &quot;Old_Italic&quot;, &quot;Java&quot;, &quot;Javanese&quot;, &quot;Kali&quot;, &quot;Kayah_Li&quot;, &quot;Kana&quot;, &quot;Katakana&quot;, &quot;Kawi&quot;, &quot;Khar&quot;, &quot;Kharoshthi&quot;, &quot;Khmr&quot;, &quot;Khmer&quot;, &quot;Khoj&quot;, &quot;Khojki&quot;, &quot;Kits&quot;, &quot;Khitan_Small_Script&quot;, &quot;Knda&quot;, &quot;Kannada&quot;, &quot;Kthi&quot;, &quot;Kaithi&quot;, &quot;Lana&quot;, &quot;Tai_Tham&quot;, &quot;Laoo&quot;, &quot;Lao&quot;, &quot;Latn&quot;, &quot;Latin&quot;, &quot;Lepc&quot;, &quot;Lepcha&quot;, &quot;Limb&quot;, &quot;Limbu&quot;, &quot;Lina&quot;, &quot;Linear_A&quot;, &quot;Linb&quot;, &quot;Linear_B&quot;, &quot;Lisu&quot;, &quot;Lyci&quot;, &quot;Lycian&quot;, &quot;Lydi&quot;, &quot;Lydian&quot;, &quot;Mahj&quot;, &quot;Mahajani&quot;, &quot;Maka&quot;, &quot;Makasar&quot;, &quot;Mand&quot;, &quot;Mandaic&quot;, &quot;Mani&quot;, &quot;Manichaean&quot;, &quot;Marc&quot;, &quot;Marchen&quot;, &quot;Medf&quot;, &quot;Medefaidrin&quot;, &quot;Mend&quot;, &quot;Mende_Kikakui&quot;, &quot;Merc&quot;, &quot;Meroitic_Cursive&quot;, &quot;Mero&quot;, &quot;Meroitic_Hieroglyphs&quot;, &quot;Mlym&quot;, &quot;Malayalam&quot;, &quot;Modi&quot;, &quot;Mong&quot;, &quot;Mongolian&quot;, &quot;Mroo&quot;, &quot;Mro&quot;, &quot;Mtei&quot;, &quot;Meetei_Mayek&quot;, &quot;Mult&quot;, &quot;Multani&quot;, &quot;Mymr&quot;, &quot;Myanmar&quot;, &quot;Nagm&quot;, &quot;Nag_Mundari&quot;, &quot;Nand&quot;, &quot;Nandinagari&quot;, &quot;Narb&quot;, &quot;Old_North_Arabian&quot;, &quot;Nbat&quot;, &quot;Nabataean&quot;, &quot;Newa&quot;, &quot;Nkoo&quot;, &quot;Nko&quot;, &quot;Nshu&quot;, &quot;Nushu&quot;, &quot;Ogam&quot;, &quot;Ogham&quot;, &quot;Olck&quot;, &quot;Ol_Chiki&quot;, &quot;Orkh&quot;, &quot;Old_Turkic&quot;, &quot;Orya&quot;, &quot;Oriya&quot;, &quot;Osge&quot;, &quot;Osage&quot;, &quot;Osma&quot;, &quot;Osmanya&quot;, &quot;Ougr&quot;, &quot;Old_Uyghur&quot;, &quot;Palm&quot;, &quot;Palmyrene&quot;, &quot;Pauc&quot;, &quot;Pau_Cin_Hau&quot;, &quot;Perm&quot;, &quot;Old_Permic&quot;, &quot;Phag&quot;, &quot;Phags_Pa&quot;, &quot;Phli&quot;, &quot;Inscriptional_Pahlavi&quot;, &quot;Phlp&quot;, &quot;Psalter_Pahlavi&quot;, &quot;Phnx&quot;, &quot;Phoenician&quot;, &quot;Plrd&quot;, &quot;Miao&quot;, &quot;Prti&quot;, &quot;Inscriptional_Parthian&quot;, &quot;Rjng&quot;, &quot;Rejang&quot;, &quot;Rohg&quot;, &quot;Hanifi_Rohingya&quot;, &quot;Runr&quot;, &quot;Runic&quot;, &quot;Samr&quot;, &quot;Samaritan&quot;, &quot;Sarb&quot;, &quot;Old_South_Arabian&quot;, &quot;Saur&quot;, &quot;Saurashtra&quot;, &quot;Sgnw&quot;, &quot;SignWriting&quot;, &quot;Shaw&quot;, &quot;Shavian&quot;, &quot;Shrd&quot;, &quot;Sharada&quot;, &quot;Sidd&quot;, &quot;Siddham&quot;, &quot;Sind&quot;, &quot;Khudawadi&quot;, &quot;Sinh&quot;, &quot;Sinhala&quot;, &quot;Sogd&quot;, &quot;Sogdian&quot;, &quot;Sogo&quot;, &quot;Old_Sogdian&quot;, &quot;Sora&quot;, &quot;Sora_Sompeng&quot;, &quot;Soyo&quot;, &quot;Soyombo&quot;, &quot;Sund&quot;, &quot;Sundanese&quot;, &quot;Sylo&quot;, &quot;Syloti_Nagri&quot;, &quot;Syrc&quot;, &quot;Syriac&quot;, &quot;Tagb&quot;, &quot;Tagbanwa&quot;, &quot;Takr&quot;, &quot;Takri&quot;, &quot;Tale&quot;, &quot;Tai_Le&quot;, &quot;Talu&quot;, &quot;New_Tai_Lue&quot;, &quot;Taml&quot;, &quot;Tamil&quot;, &quot;Tang&quot;, &quot;Tangut&quot;, &quot;Tavt&quot;, &quot;Tai_Viet&quot;, &quot;Telu&quot;, &quot;Telugu&quot;, &quot;Tfng&quot;, &quot;Tifinagh&quot;, &quot;Tglg&quot;, &quot;Tagalog&quot;, &quot;Thaa&quot;, &quot;Thaana&quot;, &quot;Thai&quot;, &quot;Tibt&quot;, &quot;Tibetan&quot;, &quot;Tirh&quot;, &quot;Tirhuta&quot;, &quot;Tnsa&quot;, &quot;Tangsa&quot;, &quot;Toto&quot;, &quot;Ugar&quot;, &quot;Ugaritic&quot;, &quot;Vaii&quot;, &quot;Vai&quot;, &quot;Vith&quot;, &quot;Vithkuqi&quot;, &quot;Wara&quot;, &quot;Warang_Citi&quot;, &quot;Wcho&quot;, &quot;Wancho&quot;, &quot;Xpeo&quot;, &quot;Old_Persian&quot;, &quot;Xsux&quot;, &quot;Cuneiform&quot;, &quot;Yezi&quot;, &quot;Yezidi&quot;, &quot;Yiii&quot;, &quot;Yi&quot;, &quot;Zanb&quot;, &quot;Zanabazar_Square&quot;, &quot;Zinh&quot;, &quot;Inherited&quot;, &quot;Qaai&quot;, &quot;Zyyy&quot;, &quot;Common&quot;, &quot;Zzzz&quot;, &quot;Unknown&quot;]),</span></span>
<span id="L4080"><span class="lineNum">    4080</span> <span class="tlaGNC">           8 :     Script_Extensions: undefined! as Set&lt;string&gt;,</span></span>
<span id="L4081"><span class="lineNum">    4081</span> <span class="tlaGNC">           8 : };</span></span>
<span id="L4082"><span class="lineNum">    4082</span> <span class="tlaGNC">           8 : // The Script_Extensions property of a character contains one or more Script values. See https://www.unicode.org/reports/tr24/#Script_Extensions</span></span>
<span id="L4083"><span class="lineNum">    4083</span> <span class="tlaGNC">           8 : // Here since each Unicode property value expression only allows a single value, its values can be considered the same as those of the Script property.</span></span>
<span id="L4084"><span class="lineNum">    4084</span> <span class="tlaGNC">           8 : valuesOfNonBinaryUnicodeProperties.Script_Extensions = valuesOfNonBinaryUnicodeProperties.Script;</span></span>
        </pre>
              </td>
            </tr>
          </table>
          <br>

          <table width="100%" border=0 cellspacing=0 cellpadding=0>
            <tr><td class="ruler"><img src="../glass.png" width=3 height=3 alt=""></td></tr>
            <tr><td class="versionInfo">Generated by: <a href="https://github.com//linux-test-project/lcov" target="_parent">LCOV version 2.1-1</a></td></tr>
          </table>
          <br>

</body>
</html>
